(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();var Xe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ru(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Zm(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var $u={exports:{}},vo={},Du={exports:{}},Q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fs=Symbol.for("react.element"),ep=Symbol.for("react.portal"),tp=Symbol.for("react.fragment"),rp=Symbol.for("react.strict_mode"),np=Symbol.for("react.profiler"),sp=Symbol.for("react.provider"),ap=Symbol.for("react.context"),op=Symbol.for("react.forward_ref"),ip=Symbol.for("react.suspense"),lp=Symbol.for("react.memo"),cp=Symbol.for("react.lazy"),Bc=Symbol.iterator;function dp(t){return t===null||typeof t!="object"?null:(t=Bc&&t[Bc]||t["@@iterator"],typeof t=="function"?t:null)}var Lu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qu=Object.assign,zu={};function Mn(t,e,r){this.props=t,this.context=e,this.refs=zu,this.updater=r||Lu}Mn.prototype.isReactComponent={};Mn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Mn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Uu(){}Uu.prototype=Mn.prototype;function Ll(t,e,r){this.props=t,this.context=e,this.refs=zu,this.updater=r||Lu}var ql=Ll.prototype=new Uu;ql.constructor=Ll;qu(ql,Mn.prototype);ql.isPureReactComponent=!0;var Fc=Array.isArray,Bu=Object.prototype.hasOwnProperty,zl={current:null},Fu={key:!0,ref:!0,__self:!0,__source:!0};function Wu(t,e,r){var n,s={},o=null,i=null;if(e!=null)for(n in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(o=""+e.key),e)Bu.call(e,n)&&!Fu.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Fs,type:t,key:o,ref:i,props:s,_owner:zl.current}}function up(t,e){return{$$typeof:Fs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ul(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fs}function hp(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Wc=/\/+/g;function Wo(t,e){return typeof t=="object"&&t!==null&&t.key!=null?hp(""+t.key):e.toString(36)}function ka(t,e,r,n,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case Fs:case ep:i=!0}}if(i)return i=t,s=s(i),t=n===""?"."+Wo(i,0):n,Fc(s)?(r="",t!=null&&(r=t.replace(Wc,"$&/")+"/"),ka(s,e,r,"",function(d){return d})):s!=null&&(Ul(s)&&(s=up(s,r+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(Wc,"$&/")+"/")+t)),e.push(s)),1;if(i=0,n=n===""?".":n+":",Fc(t))for(var l=0;l<t.length;l++){o=t[l];var c=n+Wo(o,l);i+=ka(o,e,r,c,s)}else if(c=dp(t),typeof c=="function")for(t=c.call(t),l=0;!(o=t.next()).done;)o=o.value,c=n+Wo(o,l++),i+=ka(o,e,r,c,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function ea(t,e,r){if(t==null)return t;var n=[],s=0;return ka(t,n,"","",function(o){return e.call(r,o,s++)}),n}function fp(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Pe={current:null},Ea={transition:null},mp={ReactCurrentDispatcher:Pe,ReactCurrentBatchConfig:Ea,ReactCurrentOwner:zl};function Hu(){throw Error("act(...) is not supported in production builds of React.")}Q.Children={map:ea,forEach:function(t,e,r){ea(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return ea(t,function(){e++}),e},toArray:function(t){return ea(t,function(e){return e})||[]},only:function(t){if(!Ul(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Q.Component=Mn;Q.Fragment=tp;Q.Profiler=np;Q.PureComponent=Ll;Q.StrictMode=rp;Q.Suspense=ip;Q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mp;Q.act=Hu;Q.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=qu({},t.props),s=t.key,o=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,i=zl.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Bu.call(e,c)&&!Fu.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:Fs,type:t.type,key:s,ref:o,props:n,_owner:i}};Q.createContext=function(t){return t={$$typeof:ap,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:sp,_context:t},t.Consumer=t};Q.createElement=Wu;Q.createFactory=function(t){var e=Wu.bind(null,t);return e.type=t,e};Q.createRef=function(){return{current:null}};Q.forwardRef=function(t){return{$$typeof:op,render:t}};Q.isValidElement=Ul;Q.lazy=function(t){return{$$typeof:cp,_payload:{_status:-1,_result:t},_init:fp}};Q.memo=function(t,e){return{$$typeof:lp,type:t,compare:e===void 0?null:e}};Q.startTransition=function(t){var e=Ea.transition;Ea.transition={};try{t()}finally{Ea.transition=e}};Q.unstable_act=Hu;Q.useCallback=function(t,e){return Pe.current.useCallback(t,e)};Q.useContext=function(t){return Pe.current.useContext(t)};Q.useDebugValue=function(){};Q.useDeferredValue=function(t){return Pe.current.useDeferredValue(t)};Q.useEffect=function(t,e){return Pe.current.useEffect(t,e)};Q.useId=function(){return Pe.current.useId()};Q.useImperativeHandle=function(t,e,r){return Pe.current.useImperativeHandle(t,e,r)};Q.useInsertionEffect=function(t,e){return Pe.current.useInsertionEffect(t,e)};Q.useLayoutEffect=function(t,e){return Pe.current.useLayoutEffect(t,e)};Q.useMemo=function(t,e){return Pe.current.useMemo(t,e)};Q.useReducer=function(t,e,r){return Pe.current.useReducer(t,e,r)};Q.useRef=function(t){return Pe.current.useRef(t)};Q.useState=function(t){return Pe.current.useState(t)};Q.useSyncExternalStore=function(t,e,r){return Pe.current.useSyncExternalStore(t,e,r)};Q.useTransition=function(){return Pe.current.useTransition()};Q.version="18.3.1";Du.exports=Q;var k=Du.exports;const dt=Ru(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pp=k,gp=Symbol.for("react.element"),xp=Symbol.for("react.fragment"),vp=Object.prototype.hasOwnProperty,yp=pp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bp={key:!0,ref:!0,__self:!0,__source:!0};function Vu(t,e,r){var n,s={},o=null,i=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(i=e.ref);for(n in e)vp.call(e,n)&&!bp.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:gp,type:t,key:o,ref:i,props:s,_owner:yp.current}}vo.Fragment=xp;vo.jsx=Vu;vo.jsxs=Vu;$u.exports=vo;var a=$u.exports,Pi={},Gu={exports:{}},We={},Qu={exports:{}},Ku={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(T,z){var W=T.length;T.push(z);e:for(;0<W;){var K=W-1>>>1,ue=T[K];if(0<s(ue,z))T[K]=z,T[W]=ue,W=K;else break e}}function r(T){return T.length===0?null:T[0]}function n(T){if(T.length===0)return null;var z=T[0],W=T.pop();if(W!==z){T[0]=W;e:for(var K=0,ue=T.length,pr=ue>>>1;K<pr;){var P=2*(K+1)-1,te=T[P],qe=P+1,Zs=T[qe];if(0>s(te,W))qe<ue&&0>s(Zs,te)?(T[K]=Zs,T[qe]=W,K=qe):(T[K]=te,T[P]=W,K=P);else if(qe<ue&&0>s(Zs,W))T[K]=Zs,T[qe]=W,K=qe;else break e}}return z}function s(T,z){var W=T.sortIndex-z.sortIndex;return W!==0?W:T.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var c=[],d=[],u=1,h=null,p=3,x=!1,b=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f(T){for(var z=r(d);z!==null;){if(z.callback===null)n(d);else if(z.startTime<=T)n(d),z.sortIndex=z.expirationTime,e(c,z);else break;z=r(d)}}function v(T){if(y=!1,f(T),!b)if(r(c)!==null)b=!0,B(_);else{var z=r(d);z!==null&&R(v,z.startTime-T)}}function _(T,z){b=!1,y&&(y=!1,g(j),j=-1),x=!0;var W=p;try{for(f(z),h=r(c);h!==null&&(!(h.expirationTime>z)||T&&!$());){var K=h.callback;if(typeof K=="function"){h.callback=null,p=h.priorityLevel;var ue=K(h.expirationTime<=z);z=t.unstable_now(),typeof ue=="function"?h.callback=ue:h===r(c)&&n(c),f(z)}else n(c);h=r(c)}if(h!==null)var pr=!0;else{var P=r(d);P!==null&&R(v,P.startTime-z),pr=!1}return pr}finally{h=null,p=W,x=!1}}var E=!1,N=null,j=-1,C=5,M=-1;function $(){return!(t.unstable_now()-M<C)}function U(){if(N!==null){var T=t.unstable_now();M=T;var z=!0;try{z=N(!0,T)}finally{z?F():(E=!1,N=null)}}else E=!1}var F;if(typeof m=="function")F=function(){m(U)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,q=S.port2;S.port1.onmessage=U,F=function(){q.postMessage(null)}}else F=function(){w(U,0)};function B(T){N=T,E||(E=!0,F())}function R(T,z){j=w(function(){T(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(T){T.callback=null},t.unstable_continueExecution=function(){b||x||(b=!0,B(_))},t.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<T?Math.floor(1e3/T):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(T){switch(p){case 1:case 2:case 3:var z=3;break;default:z=p}var W=p;p=z;try{return T()}finally{p=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(T,z){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var W=p;p=T;try{return z()}finally{p=W}},t.unstable_scheduleCallback=function(T,z,W){var K=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?K+W:K):W=K,T){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=W+ue,T={id:u++,callback:z,priorityLevel:T,startTime:W,expirationTime:ue,sortIndex:-1},W>K?(T.sortIndex=W,e(d,T),r(c)===null&&T===r(d)&&(y?(g(j),j=-1):y=!0,R(v,W-K))):(T.sortIndex=ue,e(c,T),b||x||(b=!0,B(_))),T},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(T){var z=p;return function(){var W=p;p=z;try{return T.apply(this,arguments)}finally{p=W}}}})(Ku);Qu.exports=Ku;var wp=Qu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jp=k,Fe=wp;function A(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ju=new Set,bs={};function $r(t,e){vn(t,e),vn(t+"Capture",e)}function vn(t,e){for(bs[t]=e,t=0;t<e.length;t++)Ju.add(e[t])}var Tt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Oi=Object.prototype.hasOwnProperty,_p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hc={},Vc={};function Np(t){return Oi.call(Vc,t)?!0:Oi.call(Hc,t)?!1:_p.test(t)?Vc[t]=!0:(Hc[t]=!0,!1)}function Sp(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function kp(t,e,r,n){if(e===null||typeof e>"u"||Sp(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Oe(t,e,r,n,s,o,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=i}var je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){je[t]=new Oe(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];je[e]=new Oe(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){je[t]=new Oe(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){je[t]=new Oe(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){je[t]=new Oe(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){je[t]=new Oe(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){je[t]=new Oe(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){je[t]=new Oe(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){je[t]=new Oe(t,5,!1,t.toLowerCase(),null,!1,!1)});var Bl=/[\-:]([a-z])/g;function Fl(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Bl,Fl);je[e]=new Oe(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Bl,Fl);je[e]=new Oe(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Bl,Fl);je[e]=new Oe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){je[t]=new Oe(t,1,!1,t.toLowerCase(),null,!1,!1)});je.xlinkHref=new Oe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){je[t]=new Oe(t,1,!1,t.toLowerCase(),null,!0,!0)});function Wl(t,e,r,n){var s=je.hasOwnProperty(e)?je[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(kp(e,r,s,n)&&(r=null),n||s===null?Np(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Rt=jp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ta=Symbol.for("react.element"),Jr=Symbol.for("react.portal"),Yr=Symbol.for("react.fragment"),Hl=Symbol.for("react.strict_mode"),Ti=Symbol.for("react.profiler"),Yu=Symbol.for("react.provider"),Xu=Symbol.for("react.context"),Vl=Symbol.for("react.forward_ref"),Mi=Symbol.for("react.suspense"),Ai=Symbol.for("react.suspense_list"),Gl=Symbol.for("react.memo"),Bt=Symbol.for("react.lazy"),Zu=Symbol.for("react.offscreen"),Gc=Symbol.iterator;function Bn(t){return t===null||typeof t!="object"?null:(t=Gc&&t[Gc]||t["@@iterator"],typeof t=="function"?t:null)}var ce=Object.assign,Ho;function rs(t){if(Ho===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Ho=e&&e[1]||""}return`
`+Ho+t}var Vo=!1;function Go(t,e){if(!t||Vo)return"";Vo=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),o=n.stack.split(`
`),i=s.length-1,l=o.length-1;1<=i&&0<=l&&s[i]!==o[l];)l--;for(;1<=i&&0<=l;i--,l--)if(s[i]!==o[l]){if(i!==1||l!==1)do if(i--,l--,0>l||s[i]!==o[l]){var c=`
`+s[i].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=i&&0<=l);break}}}finally{Vo=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?rs(t):""}function Ep(t){switch(t.tag){case 5:return rs(t.type);case 16:return rs("Lazy");case 13:return rs("Suspense");case 19:return rs("SuspenseList");case 0:case 2:case 15:return t=Go(t.type,!1),t;case 11:return t=Go(t.type.render,!1),t;case 1:return t=Go(t.type,!0),t;default:return""}}function Ii(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Yr:return"Fragment";case Jr:return"Portal";case Ti:return"Profiler";case Hl:return"StrictMode";case Mi:return"Suspense";case Ai:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Xu:return(t.displayName||"Context")+".Consumer";case Yu:return(t._context.displayName||"Context")+".Provider";case Vl:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Gl:return e=t.displayName||null,e!==null?e:Ii(t.type)||"Memo";case Bt:e=t._payload,t=t._init;try{return Ii(t(e))}catch{}}return null}function Cp(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ii(e);case 8:return e===Hl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function or(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function eh(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Pp(t){var e=eh(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(i){n=""+i,o.call(this,i)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ra(t){t._valueTracker||(t._valueTracker=Pp(t))}function th(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=eh(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function qa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ri(t,e){var r=e.checked;return ce({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Qc(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=or(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function rh(t,e){e=e.checked,e!=null&&Wl(t,"checked",e,!1)}function $i(t,e){rh(t,e);var r=or(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Di(t,e.type,r):e.hasOwnProperty("defaultValue")&&Di(t,e.type,or(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Kc(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Di(t,e,r){(e!=="number"||qa(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var ns=Array.isArray;function cn(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+or(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Li(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(A(91));return ce({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Jc(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(A(92));if(ns(r)){if(1<r.length)throw Error(A(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:or(r)}}function nh(t,e){var r=or(e.value),n=or(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Yc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function sh(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qi(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?sh(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var na,ah=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(na=na||document.createElement("div"),na.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=na.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ws(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var ls={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Op=["Webkit","ms","Moz","O"];Object.keys(ls).forEach(function(t){Op.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ls[e]=ls[t]})});function oh(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||ls.hasOwnProperty(t)&&ls[t]?(""+e).trim():e+"px"}function ih(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=oh(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var Tp=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zi(t,e){if(e){if(Tp[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(A(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(A(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(A(61))}if(e.style!=null&&typeof e.style!="object")throw Error(A(62))}}function Ui(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bi=null;function Ql(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fi=null,dn=null,un=null;function Xc(t){if(t=Vs(t)){if(typeof Fi!="function")throw Error(A(280));var e=t.stateNode;e&&(e=_o(e),Fi(t.stateNode,t.type,e))}}function lh(t){dn?un?un.push(t):un=[t]:dn=t}function ch(){if(dn){var t=dn,e=un;if(un=dn=null,Xc(t),e)for(t=0;t<e.length;t++)Xc(e[t])}}function dh(t,e){return t(e)}function uh(){}var Qo=!1;function hh(t,e,r){if(Qo)return t(e,r);Qo=!0;try{return dh(t,e,r)}finally{Qo=!1,(dn!==null||un!==null)&&(uh(),ch())}}function js(t,e){var r=t.stateNode;if(r===null)return null;var n=_o(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(A(231,e,typeof r));return r}var Wi=!1;if(Tt)try{var Fn={};Object.defineProperty(Fn,"passive",{get:function(){Wi=!0}}),window.addEventListener("test",Fn,Fn),window.removeEventListener("test",Fn,Fn)}catch{Wi=!1}function Mp(t,e,r,n,s,o,i,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(r,d)}catch(u){this.onError(u)}}var cs=!1,za=null,Ua=!1,Hi=null,Ap={onError:function(t){cs=!0,za=t}};function Ip(t,e,r,n,s,o,i,l,c){cs=!1,za=null,Mp.apply(Ap,arguments)}function Rp(t,e,r,n,s,o,i,l,c){if(Ip.apply(this,arguments),cs){if(cs){var d=za;cs=!1,za=null}else throw Error(A(198));Ua||(Ua=!0,Hi=d)}}function Dr(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function fh(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Zc(t){if(Dr(t)!==t)throw Error(A(188))}function $p(t){var e=t.alternate;if(!e){if(e=Dr(t),e===null)throw Error(A(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return Zc(s),t;if(o===n)return Zc(s),e;o=o.sibling}throw Error(A(188))}if(r.return!==n.return)r=s,n=o;else{for(var i=!1,l=s.child;l;){if(l===r){i=!0,r=s,n=o;break}if(l===n){i=!0,n=s,r=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===r){i=!0,r=o,n=s;break}if(l===n){i=!0,n=o,r=s;break}l=l.sibling}if(!i)throw Error(A(189))}}if(r.alternate!==n)throw Error(A(190))}if(r.tag!==3)throw Error(A(188));return r.stateNode.current===r?t:e}function mh(t){return t=$p(t),t!==null?ph(t):null}function ph(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ph(t);if(e!==null)return e;t=t.sibling}return null}var gh=Fe.unstable_scheduleCallback,ed=Fe.unstable_cancelCallback,Dp=Fe.unstable_shouldYield,Lp=Fe.unstable_requestPaint,he=Fe.unstable_now,qp=Fe.unstable_getCurrentPriorityLevel,Kl=Fe.unstable_ImmediatePriority,xh=Fe.unstable_UserBlockingPriority,Ba=Fe.unstable_NormalPriority,zp=Fe.unstable_LowPriority,vh=Fe.unstable_IdlePriority,yo=null,bt=null;function Up(t){if(bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(yo,t,void 0,(t.current.flags&128)===128)}catch{}}var lt=Math.clz32?Math.clz32:Wp,Bp=Math.log,Fp=Math.LN2;function Wp(t){return t>>>=0,t===0?32:31-(Bp(t)/Fp|0)|0}var sa=64,aa=4194304;function ss(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Fa(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,o=t.pingedLanes,i=r&268435455;if(i!==0){var l=i&~s;l!==0?n=ss(l):(o&=i,o!==0&&(n=ss(o)))}else i=r&~s,i!==0?n=ss(i):o!==0&&(n=ss(o));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-lt(e),s=1<<r,n|=t[r],e&=~s;return n}function Hp(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vp(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var i=31-lt(o),l=1<<i,c=s[i];c===-1?(!(l&r)||l&n)&&(s[i]=Hp(l,e)):c<=e&&(t.expiredLanes|=l),o&=~l}}function Vi(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function yh(){var t=sa;return sa<<=1,!(sa&4194240)&&(sa=64),t}function Ko(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Ws(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-lt(e),t[e]=r}function Gp(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-lt(r),o=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~o}}function Jl(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-lt(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var X=0;function bh(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var wh,Yl,jh,_h,Nh,Gi=!1,oa=[],Yt=null,Xt=null,Zt=null,_s=new Map,Ns=new Map,Wt=[],Qp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function td(t,e){switch(t){case"focusin":case"focusout":Yt=null;break;case"dragenter":case"dragleave":Xt=null;break;case"mouseover":case"mouseout":Zt=null;break;case"pointerover":case"pointerout":_s.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ns.delete(e.pointerId)}}function Wn(t,e,r,n,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[s]},e!==null&&(e=Vs(e),e!==null&&Yl(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Kp(t,e,r,n,s){switch(e){case"focusin":return Yt=Wn(Yt,t,e,r,n,s),!0;case"dragenter":return Xt=Wn(Xt,t,e,r,n,s),!0;case"mouseover":return Zt=Wn(Zt,t,e,r,n,s),!0;case"pointerover":var o=s.pointerId;return _s.set(o,Wn(_s.get(o)||null,t,e,r,n,s)),!0;case"gotpointercapture":return o=s.pointerId,Ns.set(o,Wn(Ns.get(o)||null,t,e,r,n,s)),!0}return!1}function Sh(t){var e=Nr(t.target);if(e!==null){var r=Dr(e);if(r!==null){if(e=r.tag,e===13){if(e=fh(r),e!==null){t.blockedOn=e,Nh(t.priority,function(){jh(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ca(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Qi(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Bi=n,r.target.dispatchEvent(n),Bi=null}else return e=Vs(r),e!==null&&Yl(e),t.blockedOn=r,!1;e.shift()}return!0}function rd(t,e,r){Ca(t)&&r.delete(e)}function Jp(){Gi=!1,Yt!==null&&Ca(Yt)&&(Yt=null),Xt!==null&&Ca(Xt)&&(Xt=null),Zt!==null&&Ca(Zt)&&(Zt=null),_s.forEach(rd),Ns.forEach(rd)}function Hn(t,e){t.blockedOn===e&&(t.blockedOn=null,Gi||(Gi=!0,Fe.unstable_scheduleCallback(Fe.unstable_NormalPriority,Jp)))}function Ss(t){function e(s){return Hn(s,t)}if(0<oa.length){Hn(oa[0],t);for(var r=1;r<oa.length;r++){var n=oa[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Yt!==null&&Hn(Yt,t),Xt!==null&&Hn(Xt,t),Zt!==null&&Hn(Zt,t),_s.forEach(e),Ns.forEach(e),r=0;r<Wt.length;r++)n=Wt[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Wt.length&&(r=Wt[0],r.blockedOn===null);)Sh(r),r.blockedOn===null&&Wt.shift()}var hn=Rt.ReactCurrentBatchConfig,Wa=!0;function Yp(t,e,r,n){var s=X,o=hn.transition;hn.transition=null;try{X=1,Xl(t,e,r,n)}finally{X=s,hn.transition=o}}function Xp(t,e,r,n){var s=X,o=hn.transition;hn.transition=null;try{X=4,Xl(t,e,r,n)}finally{X=s,hn.transition=o}}function Xl(t,e,r,n){if(Wa){var s=Qi(t,e,r,n);if(s===null)ai(t,e,n,Ha,r),td(t,n);else if(Kp(s,t,e,r,n))n.stopPropagation();else if(td(t,n),e&4&&-1<Qp.indexOf(t)){for(;s!==null;){var o=Vs(s);if(o!==null&&wh(o),o=Qi(t,e,r,n),o===null&&ai(t,e,n,Ha,r),o===s)break;s=o}s!==null&&n.stopPropagation()}else ai(t,e,n,null,r)}}var Ha=null;function Qi(t,e,r,n){if(Ha=null,t=Ql(n),t=Nr(t),t!==null)if(e=Dr(t),e===null)t=null;else if(r=e.tag,r===13){if(t=fh(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ha=t,null}function kh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qp()){case Kl:return 1;case xh:return 4;case Ba:case zp:return 16;case vh:return 536870912;default:return 16}default:return 16}}var Qt=null,Zl=null,Pa=null;function Eh(){if(Pa)return Pa;var t,e=Zl,r=e.length,n,s="value"in Qt?Qt.value:Qt.textContent,o=s.length;for(t=0;t<r&&e[t]===s[t];t++);var i=r-t;for(n=1;n<=i&&e[r-n]===s[o-n];n++);return Pa=s.slice(t,1<n?1-n:void 0)}function Oa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ia(){return!0}function nd(){return!1}function He(t){function e(r,n,s,o,i){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ia:nd,this.isPropagationStopped=nd,this}return ce(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ia)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ia)},persist:function(){},isPersistent:ia}),e}var An={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ec=He(An),Hs=ce({},An,{view:0,detail:0}),Zp=He(Hs),Jo,Yo,Vn,bo=ce({},Hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vn&&(Vn&&t.type==="mousemove"?(Jo=t.screenX-Vn.screenX,Yo=t.screenY-Vn.screenY):Yo=Jo=0,Vn=t),Jo)},movementY:function(t){return"movementY"in t?t.movementY:Yo}}),sd=He(bo),eg=ce({},bo,{dataTransfer:0}),tg=He(eg),rg=ce({},Hs,{relatedTarget:0}),Xo=He(rg),ng=ce({},An,{animationName:0,elapsedTime:0,pseudoElement:0}),sg=He(ng),ag=ce({},An,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),og=He(ag),ig=ce({},An,{data:0}),ad=He(ig),lg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ug(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=dg[t])?!!e[t]:!1}function tc(){return ug}var hg=ce({},Hs,{key:function(t){if(t.key){var e=lg[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Oa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cg[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tc,charCode:function(t){return t.type==="keypress"?Oa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Oa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),fg=He(hg),mg=ce({},bo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),od=He(mg),pg=ce({},Hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tc}),gg=He(pg),xg=ce({},An,{propertyName:0,elapsedTime:0,pseudoElement:0}),vg=He(xg),yg=ce({},bo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),bg=He(yg),wg=[9,13,27,32],rc=Tt&&"CompositionEvent"in window,ds=null;Tt&&"documentMode"in document&&(ds=document.documentMode);var jg=Tt&&"TextEvent"in window&&!ds,Ch=Tt&&(!rc||ds&&8<ds&&11>=ds),id=" ",ld=!1;function Ph(t,e){switch(t){case"keyup":return wg.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Oh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xr=!1;function _g(t,e){switch(t){case"compositionend":return Oh(e);case"keypress":return e.which!==32?null:(ld=!0,id);case"textInput":return t=e.data,t===id&&ld?null:t;default:return null}}function Ng(t,e){if(Xr)return t==="compositionend"||!rc&&Ph(t,e)?(t=Eh(),Pa=Zl=Qt=null,Xr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ch&&e.locale!=="ko"?null:e.data;default:return null}}var Sg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Sg[t.type]:e==="textarea"}function Th(t,e,r,n){lh(n),e=Va(e,"onChange"),0<e.length&&(r=new ec("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var us=null,ks=null;function kg(t){Bh(t,0)}function wo(t){var e=tn(t);if(th(e))return t}function Eg(t,e){if(t==="change")return e}var Mh=!1;if(Tt){var Zo;if(Tt){var ei="oninput"in document;if(!ei){var dd=document.createElement("div");dd.setAttribute("oninput","return;"),ei=typeof dd.oninput=="function"}Zo=ei}else Zo=!1;Mh=Zo&&(!document.documentMode||9<document.documentMode)}function ud(){us&&(us.detachEvent("onpropertychange",Ah),ks=us=null)}function Ah(t){if(t.propertyName==="value"&&wo(ks)){var e=[];Th(e,ks,t,Ql(t)),hh(kg,e)}}function Cg(t,e,r){t==="focusin"?(ud(),us=e,ks=r,us.attachEvent("onpropertychange",Ah)):t==="focusout"&&ud()}function Pg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wo(ks)}function Og(t,e){if(t==="click")return wo(e)}function Tg(t,e){if(t==="input"||t==="change")return wo(e)}function Mg(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ut=typeof Object.is=="function"?Object.is:Mg;function Es(t,e){if(ut(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Oi.call(e,s)||!ut(t[s],e[s]))return!1}return!0}function hd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fd(t,e){var r=hd(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=hd(r)}}function Ih(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ih(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Rh(){for(var t=window,e=qa();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=qa(t.document)}return e}function nc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Ag(t){var e=Rh(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Ih(r.ownerDocument.documentElement,r)){if(n!==null&&nc(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,o=Math.min(n.start,s);n=n.end===void 0?o:Math.min(n.end,s),!t.extend&&o>n&&(s=n,n=o,o=s),s=fd(r,o);var i=fd(r,n);s&&i&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>n?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ig=Tt&&"documentMode"in document&&11>=document.documentMode,Zr=null,Ki=null,hs=null,Ji=!1;function md(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ji||Zr==null||Zr!==qa(n)||(n=Zr,"selectionStart"in n&&nc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),hs&&Es(hs,n)||(hs=n,n=Va(Ki,"onSelect"),0<n.length&&(e=new ec("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Zr)))}function la(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var en={animationend:la("Animation","AnimationEnd"),animationiteration:la("Animation","AnimationIteration"),animationstart:la("Animation","AnimationStart"),transitionend:la("Transition","TransitionEnd")},ti={},$h={};Tt&&($h=document.createElement("div").style,"AnimationEvent"in window||(delete en.animationend.animation,delete en.animationiteration.animation,delete en.animationstart.animation),"TransitionEvent"in window||delete en.transitionend.transition);function jo(t){if(ti[t])return ti[t];if(!en[t])return t;var e=en[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in $h)return ti[t]=e[r];return t}var Dh=jo("animationend"),Lh=jo("animationiteration"),qh=jo("animationstart"),zh=jo("transitionend"),Uh=new Map,pd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dr(t,e){Uh.set(t,e),$r(e,[t])}for(var ri=0;ri<pd.length;ri++){var ni=pd[ri],Rg=ni.toLowerCase(),$g=ni[0].toUpperCase()+ni.slice(1);dr(Rg,"on"+$g)}dr(Dh,"onAnimationEnd");dr(Lh,"onAnimationIteration");dr(qh,"onAnimationStart");dr("dblclick","onDoubleClick");dr("focusin","onFocus");dr("focusout","onBlur");dr(zh,"onTransitionEnd");vn("onMouseEnter",["mouseout","mouseover"]);vn("onMouseLeave",["mouseout","mouseover"]);vn("onPointerEnter",["pointerout","pointerover"]);vn("onPointerLeave",["pointerout","pointerover"]);$r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$r("onBeforeInput",["compositionend","keypress","textInput","paste"]);$r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var as="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dg=new Set("cancel close invalid load scroll toggle".split(" ").concat(as));function gd(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Rp(n,e,void 0,t),t.currentTarget=null}function Bh(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var i=n.length-1;0<=i;i--){var l=n[i],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==o&&s.isPropagationStopped())break e;gd(s,l,d),o=c}else for(i=0;i<n.length;i++){if(l=n[i],c=l.instance,d=l.currentTarget,l=l.listener,c!==o&&s.isPropagationStopped())break e;gd(s,l,d),o=c}}}if(Ua)throw t=Hi,Ua=!1,Hi=null,t}function ne(t,e){var r=e[tl];r===void 0&&(r=e[tl]=new Set);var n=t+"__bubble";r.has(n)||(Fh(e,t,2,!1),r.add(n))}function si(t,e,r){var n=0;e&&(n|=4),Fh(r,t,n,e)}var ca="_reactListening"+Math.random().toString(36).slice(2);function Cs(t){if(!t[ca]){t[ca]=!0,Ju.forEach(function(r){r!=="selectionchange"&&(Dg.has(r)||si(r,!1,t),si(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ca]||(e[ca]=!0,si("selectionchange",!1,e))}}function Fh(t,e,r,n){switch(kh(e)){case 1:var s=Yp;break;case 4:s=Xp;break;default:s=Xl}r=s.bind(null,e,r,t),s=void 0,!Wi||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function ai(t,e,r,n,s){var o=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;i=i.return}for(;l!==null;){if(i=Nr(l),i===null)return;if(c=i.tag,c===5||c===6){n=o=i;continue e}l=l.parentNode}}n=n.return}hh(function(){var d=o,u=Ql(r),h=[];e:{var p=Uh.get(t);if(p!==void 0){var x=ec,b=t;switch(t){case"keypress":if(Oa(r)===0)break e;case"keydown":case"keyup":x=fg;break;case"focusin":b="focus",x=Xo;break;case"focusout":b="blur",x=Xo;break;case"beforeblur":case"afterblur":x=Xo;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=sd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=tg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=gg;break;case Dh:case Lh:case qh:x=sg;break;case zh:x=vg;break;case"scroll":x=Zp;break;case"wheel":x=bg;break;case"copy":case"cut":case"paste":x=og;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=od}var y=(e&4)!==0,w=!y&&t==="scroll",g=y?p!==null?p+"Capture":null:p;y=[];for(var m=d,f;m!==null;){f=m;var v=f.stateNode;if(f.tag===5&&v!==null&&(f=v,g!==null&&(v=js(m,g),v!=null&&y.push(Ps(m,v,f)))),w)break;m=m.return}0<y.length&&(p=new x(p,b,null,r,u),h.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",p&&r!==Bi&&(b=r.relatedTarget||r.fromElement)&&(Nr(b)||b[Mt]))break e;if((x||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,x?(b=r.relatedTarget||r.toElement,x=d,b=b?Nr(b):null,b!==null&&(w=Dr(b),b!==w||b.tag!==5&&b.tag!==6)&&(b=null)):(x=null,b=d),x!==b)){if(y=sd,v="onMouseLeave",g="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(y=od,v="onPointerLeave",g="onPointerEnter",m="pointer"),w=x==null?p:tn(x),f=b==null?p:tn(b),p=new y(v,m+"leave",x,r,u),p.target=w,p.relatedTarget=f,v=null,Nr(u)===d&&(y=new y(g,m+"enter",b,r,u),y.target=f,y.relatedTarget=w,v=y),w=v,x&&b)t:{for(y=x,g=b,m=0,f=y;f;f=Ur(f))m++;for(f=0,v=g;v;v=Ur(v))f++;for(;0<m-f;)y=Ur(y),m--;for(;0<f-m;)g=Ur(g),f--;for(;m--;){if(y===g||g!==null&&y===g.alternate)break t;y=Ur(y),g=Ur(g)}y=null}else y=null;x!==null&&xd(h,p,x,y,!1),b!==null&&w!==null&&xd(h,w,b,y,!0)}}e:{if(p=d?tn(d):window,x=p.nodeName&&p.nodeName.toLowerCase(),x==="select"||x==="input"&&p.type==="file")var _=Eg;else if(cd(p))if(Mh)_=Tg;else{_=Pg;var E=Cg}else(x=p.nodeName)&&x.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(_=Og);if(_&&(_=_(t,d))){Th(h,_,r,u);break e}E&&E(t,p,d),t==="focusout"&&(E=p._wrapperState)&&E.controlled&&p.type==="number"&&Di(p,"number",p.value)}switch(E=d?tn(d):window,t){case"focusin":(cd(E)||E.contentEditable==="true")&&(Zr=E,Ki=d,hs=null);break;case"focusout":hs=Ki=Zr=null;break;case"mousedown":Ji=!0;break;case"contextmenu":case"mouseup":case"dragend":Ji=!1,md(h,r,u);break;case"selectionchange":if(Ig)break;case"keydown":case"keyup":md(h,r,u)}var N;if(rc)e:{switch(t){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Xr?Ph(t,r)&&(j="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(j="onCompositionStart");j&&(Ch&&r.locale!=="ko"&&(Xr||j!=="onCompositionStart"?j==="onCompositionEnd"&&Xr&&(N=Eh()):(Qt=u,Zl="value"in Qt?Qt.value:Qt.textContent,Xr=!0)),E=Va(d,j),0<E.length&&(j=new ad(j,t,null,r,u),h.push({event:j,listeners:E}),N?j.data=N:(N=Oh(r),N!==null&&(j.data=N)))),(N=jg?_g(t,r):Ng(t,r))&&(d=Va(d,"onBeforeInput"),0<d.length&&(u=new ad("onBeforeInput","beforeinput",null,r,u),h.push({event:u,listeners:d}),u.data=N))}Bh(h,e)})}function Ps(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Va(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=js(t,r),o!=null&&n.unshift(Ps(t,o,s)),o=js(t,e),o!=null&&n.push(Ps(t,o,s))),t=t.return}return n}function Ur(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function xd(t,e,r,n,s){for(var o=e._reactName,i=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,s?(c=js(r,o),c!=null&&i.unshift(Ps(r,c,l))):s||(c=js(r,o),c!=null&&i.push(Ps(r,c,l)))),r=r.return}i.length!==0&&t.push({event:e,listeners:i})}var Lg=/\r\n?/g,qg=/\u0000|\uFFFD/g;function vd(t){return(typeof t=="string"?t:""+t).replace(Lg,`
`).replace(qg,"")}function da(t,e,r){if(e=vd(e),vd(t)!==e&&r)throw Error(A(425))}function Ga(){}var Yi=null,Xi=null;function Zi(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var el=typeof setTimeout=="function"?setTimeout:void 0,zg=typeof clearTimeout=="function"?clearTimeout:void 0,yd=typeof Promise=="function"?Promise:void 0,Ug=typeof queueMicrotask=="function"?queueMicrotask:typeof yd<"u"?function(t){return yd.resolve(null).then(t).catch(Bg)}:el;function Bg(t){setTimeout(function(){throw t})}function oi(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Ss(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Ss(e)}function er(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function bd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var In=Math.random().toString(36).slice(2),xt="__reactFiber$"+In,Os="__reactProps$"+In,Mt="__reactContainer$"+In,tl="__reactEvents$"+In,Fg="__reactListeners$"+In,Wg="__reactHandles$"+In;function Nr(t){var e=t[xt];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Mt]||r[xt]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=bd(t);t!==null;){if(r=t[xt])return r;t=bd(t)}return e}t=r,r=t.parentNode}return null}function Vs(t){return t=t[xt]||t[Mt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function tn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(A(33))}function _o(t){return t[Os]||null}var rl=[],rn=-1;function ur(t){return{current:t}}function se(t){0>rn||(t.current=rl[rn],rl[rn]=null,rn--)}function ee(t,e){rn++,rl[rn]=t.current,t.current=e}var ir={},ke=ur(ir),$e=ur(!1),Or=ir;function yn(t,e){var r=t.type.contextTypes;if(!r)return ir;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=e[o];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function De(t){return t=t.childContextTypes,t!=null}function Qa(){se($e),se(ke)}function wd(t,e,r){if(ke.current!==ir)throw Error(A(168));ee(ke,e),ee($e,r)}function Wh(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(A(108,Cp(t)||"Unknown",s));return ce({},r,n)}function Ka(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ir,Or=ke.current,ee(ke,t),ee($e,$e.current),!0}function jd(t,e,r){var n=t.stateNode;if(!n)throw Error(A(169));r?(t=Wh(t,e,Or),n.__reactInternalMemoizedMergedChildContext=t,se($e),se(ke),ee(ke,t)):se($e),ee($e,r)}var Et=null,No=!1,ii=!1;function Hh(t){Et===null?Et=[t]:Et.push(t)}function Hg(t){No=!0,Hh(t)}function hr(){if(!ii&&Et!==null){ii=!0;var t=0,e=X;try{var r=Et;for(X=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Et=null,No=!1}catch(s){throw Et!==null&&(Et=Et.slice(t+1)),gh(Kl,hr),s}finally{X=e,ii=!1}}return null}var nn=[],sn=0,Ja=null,Ya=0,Qe=[],Ke=0,Tr=null,Ct=1,Pt="";function yr(t,e){nn[sn++]=Ya,nn[sn++]=Ja,Ja=t,Ya=e}function Vh(t,e,r){Qe[Ke++]=Ct,Qe[Ke++]=Pt,Qe[Ke++]=Tr,Tr=t;var n=Ct;t=Pt;var s=32-lt(n)-1;n&=~(1<<s),r+=1;var o=32-lt(e)+s;if(30<o){var i=s-s%5;o=(n&(1<<i)-1).toString(32),n>>=i,s-=i,Ct=1<<32-lt(e)+s|r<<s|n,Pt=o+t}else Ct=1<<o|r<<s|n,Pt=t}function sc(t){t.return!==null&&(yr(t,1),Vh(t,1,0))}function ac(t){for(;t===Ja;)Ja=nn[--sn],nn[sn]=null,Ya=nn[--sn],nn[sn]=null;for(;t===Tr;)Tr=Qe[--Ke],Qe[Ke]=null,Pt=Qe[--Ke],Qe[Ke]=null,Ct=Qe[--Ke],Qe[Ke]=null}var Be=null,Ue=null,ae=!1,it=null;function Gh(t,e){var r=Je(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function _d(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Be=t,Ue=er(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Be=t,Ue=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Tr!==null?{id:Ct,overflow:Pt}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Je(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Be=t,Ue=null,!0):!1;default:return!1}}function nl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function sl(t){if(ae){var e=Ue;if(e){var r=e;if(!_d(t,e)){if(nl(t))throw Error(A(418));e=er(r.nextSibling);var n=Be;e&&_d(t,e)?Gh(n,r):(t.flags=t.flags&-4097|2,ae=!1,Be=t)}}else{if(nl(t))throw Error(A(418));t.flags=t.flags&-4097|2,ae=!1,Be=t}}}function Nd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Be=t}function ua(t){if(t!==Be)return!1;if(!ae)return Nd(t),ae=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Zi(t.type,t.memoizedProps)),e&&(e=Ue)){if(nl(t))throw Qh(),Error(A(418));for(;e;)Gh(t,e),e=er(e.nextSibling)}if(Nd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(A(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Ue=er(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Ue=null}}else Ue=Be?er(t.stateNode.nextSibling):null;return!0}function Qh(){for(var t=Ue;t;)t=er(t.nextSibling)}function bn(){Ue=Be=null,ae=!1}function oc(t){it===null?it=[t]:it.push(t)}var Vg=Rt.ReactCurrentBatchConfig;function Gn(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(A(309));var n=r.stateNode}if(!n)throw Error(A(147,t));var s=n,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(i){var l=s.refs;i===null?delete l[o]:l[o]=i},e._stringRef=o,e)}if(typeof t!="string")throw Error(A(284));if(!r._owner)throw Error(A(290,t))}return t}function ha(t,e){throw t=Object.prototype.toString.call(e),Error(A(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Sd(t){var e=t._init;return e(t._payload)}function Kh(t){function e(g,m){if(t){var f=g.deletions;f===null?(g.deletions=[m],g.flags|=16):f.push(m)}}function r(g,m){if(!t)return null;for(;m!==null;)e(g,m),m=m.sibling;return null}function n(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function s(g,m){return g=sr(g,m),g.index=0,g.sibling=null,g}function o(g,m,f){return g.index=f,t?(f=g.alternate,f!==null?(f=f.index,f<m?(g.flags|=2,m):f):(g.flags|=2,m)):(g.flags|=1048576,m)}function i(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,m,f,v){return m===null||m.tag!==6?(m=mi(f,g.mode,v),m.return=g,m):(m=s(m,f),m.return=g,m)}function c(g,m,f,v){var _=f.type;return _===Yr?u(g,m,f.props.children,v,f.key):m!==null&&(m.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Bt&&Sd(_)===m.type)?(v=s(m,f.props),v.ref=Gn(g,m,f),v.return=g,v):(v=Da(f.type,f.key,f.props,null,g.mode,v),v.ref=Gn(g,m,f),v.return=g,v)}function d(g,m,f,v){return m===null||m.tag!==4||m.stateNode.containerInfo!==f.containerInfo||m.stateNode.implementation!==f.implementation?(m=pi(f,g.mode,v),m.return=g,m):(m=s(m,f.children||[]),m.return=g,m)}function u(g,m,f,v,_){return m===null||m.tag!==7?(m=Cr(f,g.mode,v,_),m.return=g,m):(m=s(m,f),m.return=g,m)}function h(g,m,f){if(typeof m=="string"&&m!==""||typeof m=="number")return m=mi(""+m,g.mode,f),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ta:return f=Da(m.type,m.key,m.props,null,g.mode,f),f.ref=Gn(g,null,m),f.return=g,f;case Jr:return m=pi(m,g.mode,f),m.return=g,m;case Bt:var v=m._init;return h(g,v(m._payload),f)}if(ns(m)||Bn(m))return m=Cr(m,g.mode,f,null),m.return=g,m;ha(g,m)}return null}function p(g,m,f,v){var _=m!==null?m.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return _!==null?null:l(g,m,""+f,v);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case ta:return f.key===_?c(g,m,f,v):null;case Jr:return f.key===_?d(g,m,f,v):null;case Bt:return _=f._init,p(g,m,_(f._payload),v)}if(ns(f)||Bn(f))return _!==null?null:u(g,m,f,v,null);ha(g,f)}return null}function x(g,m,f,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return g=g.get(f)||null,l(m,g,""+v,_);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ta:return g=g.get(v.key===null?f:v.key)||null,c(m,g,v,_);case Jr:return g=g.get(v.key===null?f:v.key)||null,d(m,g,v,_);case Bt:var E=v._init;return x(g,m,f,E(v._payload),_)}if(ns(v)||Bn(v))return g=g.get(f)||null,u(m,g,v,_,null);ha(m,v)}return null}function b(g,m,f,v){for(var _=null,E=null,N=m,j=m=0,C=null;N!==null&&j<f.length;j++){N.index>j?(C=N,N=null):C=N.sibling;var M=p(g,N,f[j],v);if(M===null){N===null&&(N=C);break}t&&N&&M.alternate===null&&e(g,N),m=o(M,m,j),E===null?_=M:E.sibling=M,E=M,N=C}if(j===f.length)return r(g,N),ae&&yr(g,j),_;if(N===null){for(;j<f.length;j++)N=h(g,f[j],v),N!==null&&(m=o(N,m,j),E===null?_=N:E.sibling=N,E=N);return ae&&yr(g,j),_}for(N=n(g,N);j<f.length;j++)C=x(N,g,j,f[j],v),C!==null&&(t&&C.alternate!==null&&N.delete(C.key===null?j:C.key),m=o(C,m,j),E===null?_=C:E.sibling=C,E=C);return t&&N.forEach(function($){return e(g,$)}),ae&&yr(g,j),_}function y(g,m,f,v){var _=Bn(f);if(typeof _!="function")throw Error(A(150));if(f=_.call(f),f==null)throw Error(A(151));for(var E=_=null,N=m,j=m=0,C=null,M=f.next();N!==null&&!M.done;j++,M=f.next()){N.index>j?(C=N,N=null):C=N.sibling;var $=p(g,N,M.value,v);if($===null){N===null&&(N=C);break}t&&N&&$.alternate===null&&e(g,N),m=o($,m,j),E===null?_=$:E.sibling=$,E=$,N=C}if(M.done)return r(g,N),ae&&yr(g,j),_;if(N===null){for(;!M.done;j++,M=f.next())M=h(g,M.value,v),M!==null&&(m=o(M,m,j),E===null?_=M:E.sibling=M,E=M);return ae&&yr(g,j),_}for(N=n(g,N);!M.done;j++,M=f.next())M=x(N,g,j,M.value,v),M!==null&&(t&&M.alternate!==null&&N.delete(M.key===null?j:M.key),m=o(M,m,j),E===null?_=M:E.sibling=M,E=M);return t&&N.forEach(function(U){return e(g,U)}),ae&&yr(g,j),_}function w(g,m,f,v){if(typeof f=="object"&&f!==null&&f.type===Yr&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case ta:e:{for(var _=f.key,E=m;E!==null;){if(E.key===_){if(_=f.type,_===Yr){if(E.tag===7){r(g,E.sibling),m=s(E,f.props.children),m.return=g,g=m;break e}}else if(E.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Bt&&Sd(_)===E.type){r(g,E.sibling),m=s(E,f.props),m.ref=Gn(g,E,f),m.return=g,g=m;break e}r(g,E);break}else e(g,E);E=E.sibling}f.type===Yr?(m=Cr(f.props.children,g.mode,v,f.key),m.return=g,g=m):(v=Da(f.type,f.key,f.props,null,g.mode,v),v.ref=Gn(g,m,f),v.return=g,g=v)}return i(g);case Jr:e:{for(E=f.key;m!==null;){if(m.key===E)if(m.tag===4&&m.stateNode.containerInfo===f.containerInfo&&m.stateNode.implementation===f.implementation){r(g,m.sibling),m=s(m,f.children||[]),m.return=g,g=m;break e}else{r(g,m);break}else e(g,m);m=m.sibling}m=pi(f,g.mode,v),m.return=g,g=m}return i(g);case Bt:return E=f._init,w(g,m,E(f._payload),v)}if(ns(f))return b(g,m,f,v);if(Bn(f))return y(g,m,f,v);ha(g,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,m!==null&&m.tag===6?(r(g,m.sibling),m=s(m,f),m.return=g,g=m):(r(g,m),m=mi(f,g.mode,v),m.return=g,g=m),i(g)):r(g,m)}return w}var wn=Kh(!0),Jh=Kh(!1),Xa=ur(null),Za=null,an=null,ic=null;function lc(){ic=an=Za=null}function cc(t){var e=Xa.current;se(Xa),t._currentValue=e}function al(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function fn(t,e){Za=t,ic=an=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ie=!0),t.firstContext=null)}function Ze(t){var e=t._currentValue;if(ic!==t)if(t={context:t,memoizedValue:e,next:null},an===null){if(Za===null)throw Error(A(308));an=t,Za.dependencies={lanes:0,firstContext:t}}else an=an.next=t;return e}var Sr=null;function dc(t){Sr===null?Sr=[t]:Sr.push(t)}function Yh(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,dc(e)):(r.next=s.next,s.next=r),e.interleaved=r,At(t,n)}function At(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Ft=!1;function uc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ot(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function tr(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,J&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,At(t,r)}return s=n.interleaved,s===null?(e.next=e,dc(n)):(e.next=s.next,s.next=e),n.interleaved=e,At(t,r)}function Ta(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Jl(t,r)}}function kd(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=i:o=o.next=i,r=r.next}while(r!==null);o===null?s=o=e:o=o.next=e}else s=o=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function eo(t,e,r,n){var s=t.updateQueue;Ft=!1;var o=s.firstBaseUpdate,i=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,i===null?o=d:i.next=d,i=c;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==i&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(o!==null){var h=s.baseState;i=0,u=d=c=null,l=o;do{var p=l.lane,x=l.eventTime;if((n&p)===p){u!==null&&(u=u.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,y=l;switch(p=e,x=r,y.tag){case 1:if(b=y.payload,typeof b=="function"){h=b.call(x,h,p);break e}h=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=y.payload,p=typeof b=="function"?b.call(x,h,p):b,p==null)break e;h=ce({},h,p);break e;case 2:Ft=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else x={eventTime:x,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=x,c=h):u=u.next=x,i|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(u===null&&(c=h),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do i|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);Ar|=i,t.lanes=i,t.memoizedState=h}}function Ed(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(A(191,s));s.call(n)}}}var Gs={},wt=ur(Gs),Ts=ur(Gs),Ms=ur(Gs);function kr(t){if(t===Gs)throw Error(A(174));return t}function hc(t,e){switch(ee(Ms,e),ee(Ts,t),ee(wt,Gs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:qi(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=qi(e,t)}se(wt),ee(wt,e)}function jn(){se(wt),se(Ts),se(Ms)}function Zh(t){kr(Ms.current);var e=kr(wt.current),r=qi(e,t.type);e!==r&&(ee(Ts,t),ee(wt,r))}function fc(t){Ts.current===t&&(se(wt),se(Ts))}var oe=ur(0);function to(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var li=[];function mc(){for(var t=0;t<li.length;t++)li[t]._workInProgressVersionPrimary=null;li.length=0}var Ma=Rt.ReactCurrentDispatcher,ci=Rt.ReactCurrentBatchConfig,Mr=0,ie=null,ge=null,ve=null,ro=!1,fs=!1,As=0,Gg=0;function _e(){throw Error(A(321))}function pc(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!ut(t[r],e[r]))return!1;return!0}function gc(t,e,r,n,s,o){if(Mr=o,ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ma.current=t===null||t.memoizedState===null?Yg:Xg,t=r(n,s),fs){o=0;do{if(fs=!1,As=0,25<=o)throw Error(A(301));o+=1,ve=ge=null,e.updateQueue=null,Ma.current=Zg,t=r(n,s)}while(fs)}if(Ma.current=no,e=ge!==null&&ge.next!==null,Mr=0,ve=ge=ie=null,ro=!1,e)throw Error(A(300));return t}function xc(){var t=As!==0;return As=0,t}function mt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ve===null?ie.memoizedState=ve=t:ve=ve.next=t,ve}function et(){if(ge===null){var t=ie.alternate;t=t!==null?t.memoizedState:null}else t=ge.next;var e=ve===null?ie.memoizedState:ve.next;if(e!==null)ve=e,ge=t;else{if(t===null)throw Error(A(310));ge=t,t={memoizedState:ge.memoizedState,baseState:ge.baseState,baseQueue:ge.baseQueue,queue:ge.queue,next:null},ve===null?ie.memoizedState=ve=t:ve=ve.next=t}return ve}function Is(t,e){return typeof e=="function"?e(t):e}function di(t){var e=et(),r=e.queue;if(r===null)throw Error(A(311));r.lastRenderedReducer=t;var n=ge,s=n.baseQueue,o=r.pending;if(o!==null){if(s!==null){var i=s.next;s.next=o.next,o.next=i}n.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,n=n.baseState;var l=i=null,c=null,d=o;do{var u=d.lane;if((Mr&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,i=n):c=c.next=h,ie.lanes|=u,Ar|=u}d=d.next}while(d!==null&&d!==o);c===null?i=n:c.next=l,ut(n,e.memoizedState)||(Ie=!0),e.memoizedState=n,e.baseState=i,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do o=s.lane,ie.lanes|=o,Ar|=o,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function ui(t){var e=et(),r=e.queue;if(r===null)throw Error(A(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,o=e.memoizedState;if(s!==null){r.pending=null;var i=s=s.next;do o=t(o,i.action),i=i.next;while(i!==s);ut(o,e.memoizedState)||(Ie=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,n]}function ef(){}function tf(t,e){var r=ie,n=et(),s=e(),o=!ut(n.memoizedState,s);if(o&&(n.memoizedState=s,Ie=!0),n=n.queue,vc(sf.bind(null,r,n,t),[t]),n.getSnapshot!==e||o||ve!==null&&ve.memoizedState.tag&1){if(r.flags|=2048,Rs(9,nf.bind(null,r,n,s,e),void 0,null),ye===null)throw Error(A(349));Mr&30||rf(r,e,s)}return s}function rf(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=ie.updateQueue,e===null?(e={lastEffect:null,stores:null},ie.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function nf(t,e,r,n){e.value=r,e.getSnapshot=n,af(e)&&of(t)}function sf(t,e,r){return r(function(){af(e)&&of(t)})}function af(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!ut(t,r)}catch{return!0}}function of(t){var e=At(t,1);e!==null&&ct(e,t,1,-1)}function Cd(t){var e=mt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:t},e.queue=t,t=t.dispatch=Jg.bind(null,ie,t),[e.memoizedState,t]}function Rs(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=ie.updateQueue,e===null?(e={lastEffect:null,stores:null},ie.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function lf(){return et().memoizedState}function Aa(t,e,r,n){var s=mt();ie.flags|=t,s.memoizedState=Rs(1|e,r,void 0,n===void 0?null:n)}function So(t,e,r,n){var s=et();n=n===void 0?null:n;var o=void 0;if(ge!==null){var i=ge.memoizedState;if(o=i.destroy,n!==null&&pc(n,i.deps)){s.memoizedState=Rs(e,r,o,n);return}}ie.flags|=t,s.memoizedState=Rs(1|e,r,o,n)}function Pd(t,e){return Aa(8390656,8,t,e)}function vc(t,e){return So(2048,8,t,e)}function cf(t,e){return So(4,2,t,e)}function df(t,e){return So(4,4,t,e)}function uf(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hf(t,e,r){return r=r!=null?r.concat([t]):null,So(4,4,uf.bind(null,e,t),r)}function yc(){}function ff(t,e){var r=et();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&pc(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function mf(t,e){var r=et();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&pc(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function pf(t,e,r){return Mr&21?(ut(r,e)||(r=yh(),ie.lanes|=r,Ar|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ie=!0),t.memoizedState=r)}function Qg(t,e){var r=X;X=r!==0&&4>r?r:4,t(!0);var n=ci.transition;ci.transition={};try{t(!1),e()}finally{X=r,ci.transition=n}}function gf(){return et().memoizedState}function Kg(t,e,r){var n=nr(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},xf(t))vf(e,r);else if(r=Yh(t,e,r,n),r!==null){var s=Ce();ct(r,t,n,s),yf(r,e,n)}}function Jg(t,e,r){var n=nr(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(xf(t))vf(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var i=e.lastRenderedState,l=o(i,r);if(s.hasEagerState=!0,s.eagerState=l,ut(l,i)){var c=e.interleaved;c===null?(s.next=s,dc(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}r=Yh(t,e,s,n),r!==null&&(s=Ce(),ct(r,t,n,s),yf(r,e,n))}}function xf(t){var e=t.alternate;return t===ie||e!==null&&e===ie}function vf(t,e){fs=ro=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function yf(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Jl(t,r)}}var no={readContext:Ze,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useInsertionEffect:_e,useLayoutEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useMutableSource:_e,useSyncExternalStore:_e,useId:_e,unstable_isNewReconciler:!1},Yg={readContext:Ze,useCallback:function(t,e){return mt().memoizedState=[t,e===void 0?null:e],t},useContext:Ze,useEffect:Pd,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Aa(4194308,4,uf.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Aa(4194308,4,t,e)},useInsertionEffect:function(t,e){return Aa(4,2,t,e)},useMemo:function(t,e){var r=mt();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=mt();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Kg.bind(null,ie,t),[n.memoizedState,t]},useRef:function(t){var e=mt();return t={current:t},e.memoizedState=t},useState:Cd,useDebugValue:yc,useDeferredValue:function(t){return mt().memoizedState=t},useTransition:function(){var t=Cd(!1),e=t[0];return t=Qg.bind(null,t[1]),mt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=ie,s=mt();if(ae){if(r===void 0)throw Error(A(407));r=r()}else{if(r=e(),ye===null)throw Error(A(349));Mr&30||rf(n,e,r)}s.memoizedState=r;var o={value:r,getSnapshot:e};return s.queue=o,Pd(sf.bind(null,n,o,t),[t]),n.flags|=2048,Rs(9,nf.bind(null,n,o,r,e),void 0,null),r},useId:function(){var t=mt(),e=ye.identifierPrefix;if(ae){var r=Pt,n=Ct;r=(n&~(1<<32-lt(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=As++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Gg++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Xg={readContext:Ze,useCallback:ff,useContext:Ze,useEffect:vc,useImperativeHandle:hf,useInsertionEffect:cf,useLayoutEffect:df,useMemo:mf,useReducer:di,useRef:lf,useState:function(){return di(Is)},useDebugValue:yc,useDeferredValue:function(t){var e=et();return pf(e,ge.memoizedState,t)},useTransition:function(){var t=di(Is)[0],e=et().memoizedState;return[t,e]},useMutableSource:ef,useSyncExternalStore:tf,useId:gf,unstable_isNewReconciler:!1},Zg={readContext:Ze,useCallback:ff,useContext:Ze,useEffect:vc,useImperativeHandle:hf,useInsertionEffect:cf,useLayoutEffect:df,useMemo:mf,useReducer:ui,useRef:lf,useState:function(){return ui(Is)},useDebugValue:yc,useDeferredValue:function(t){var e=et();return ge===null?e.memoizedState=t:pf(e,ge.memoizedState,t)},useTransition:function(){var t=ui(Is)[0],e=et().memoizedState;return[t,e]},useMutableSource:ef,useSyncExternalStore:tf,useId:gf,unstable_isNewReconciler:!1};function st(t,e){if(t&&t.defaultProps){e=ce({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function ol(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:ce({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var ko={isMounted:function(t){return(t=t._reactInternals)?Dr(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Ce(),s=nr(t),o=Ot(n,s);o.payload=e,r!=null&&(o.callback=r),e=tr(t,o,s),e!==null&&(ct(e,t,s,n),Ta(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Ce(),s=nr(t),o=Ot(n,s);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=tr(t,o,s),e!==null&&(ct(e,t,s,n),Ta(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Ce(),n=nr(t),s=Ot(r,n);s.tag=2,e!=null&&(s.callback=e),e=tr(t,s,n),e!==null&&(ct(e,t,n,r),Ta(e,t,n))}};function Od(t,e,r,n,s,o,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,o,i):e.prototype&&e.prototype.isPureReactComponent?!Es(r,n)||!Es(s,o):!0}function bf(t,e,r){var n=!1,s=ir,o=e.contextType;return typeof o=="object"&&o!==null?o=Ze(o):(s=De(e)?Or:ke.current,n=e.contextTypes,o=(n=n!=null)?yn(t,s):ir),e=new e(r,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ko,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function Td(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&ko.enqueueReplaceState(e,e.state,null)}function il(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},uc(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=Ze(o):(o=De(e)?Or:ke.current,s.context=yn(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(ol(t,e,o,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ko.enqueueReplaceState(s,s.state,null),eo(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function _n(t,e){try{var r="",n=e;do r+=Ep(n),n=n.return;while(n);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function hi(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function ll(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var e0=typeof WeakMap=="function"?WeakMap:Map;function wf(t,e,r){r=Ot(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){ao||(ao=!0,vl=n),ll(t,e)},r}function jf(t,e,r){r=Ot(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){ll(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){ll(t,e),typeof n!="function"&&(rr===null?rr=new Set([this]):rr.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),r}function Md(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new e0;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=m0.bind(null,t,e,r),e.then(t,t))}function Ad(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Id(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Ot(-1,1),e.tag=2,tr(r,e,1))),r.lanes|=1),t)}var t0=Rt.ReactCurrentOwner,Ie=!1;function Ee(t,e,r,n){e.child=t===null?Jh(e,null,r,n):wn(e,t.child,r,n)}function Rd(t,e,r,n,s){r=r.render;var o=e.ref;return fn(e,s),n=gc(t,e,r,n,o,s),r=xc(),t!==null&&!Ie?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,It(t,e,s)):(ae&&r&&sc(e),e.flags|=1,Ee(t,e,n,s),e.child)}function $d(t,e,r,n,s){if(t===null){var o=r.type;return typeof o=="function"&&!Ec(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,_f(t,e,o,n,s)):(t=Da(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var i=o.memoizedProps;if(r=r.compare,r=r!==null?r:Es,r(i,n)&&t.ref===e.ref)return It(t,e,s)}return e.flags|=1,t=sr(o,n),t.ref=e.ref,t.return=e,e.child=t}function _f(t,e,r,n,s){if(t!==null){var o=t.memoizedProps;if(Es(o,n)&&t.ref===e.ref)if(Ie=!1,e.pendingProps=n=o,(t.lanes&s)!==0)t.flags&131072&&(Ie=!0);else return e.lanes=t.lanes,It(t,e,s)}return cl(t,e,r,n,s)}function Nf(t,e,r){var n=e.pendingProps,s=n.children,o=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ee(ln,ze),ze|=r;else{if(!(r&1073741824))return t=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ee(ln,ze),ze|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,ee(ln,ze),ze|=n}else o!==null?(n=o.baseLanes|r,e.memoizedState=null):n=r,ee(ln,ze),ze|=n;return Ee(t,e,s,r),e.child}function Sf(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function cl(t,e,r,n,s){var o=De(r)?Or:ke.current;return o=yn(e,o),fn(e,s),r=gc(t,e,r,n,o,s),n=xc(),t!==null&&!Ie?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,It(t,e,s)):(ae&&n&&sc(e),e.flags|=1,Ee(t,e,r,s),e.child)}function Dd(t,e,r,n,s){if(De(r)){var o=!0;Ka(e)}else o=!1;if(fn(e,s),e.stateNode===null)Ia(t,e),bf(e,r,n),il(e,r,n,s),n=!0;else if(t===null){var i=e.stateNode,l=e.memoizedProps;i.props=l;var c=i.context,d=r.contextType;typeof d=="object"&&d!==null?d=Ze(d):(d=De(r)?Or:ke.current,d=yn(e,d));var u=r.getDerivedStateFromProps,h=typeof u=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==n||c!==d)&&Td(e,i,n,d),Ft=!1;var p=e.memoizedState;i.state=p,eo(e,n,i,s),c=e.memoizedState,l!==n||p!==c||$e.current||Ft?(typeof u=="function"&&(ol(e,r,u,n),c=e.memoizedState),(l=Ft||Od(e,r,l,n,p,c,d))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),i.props=n,i.state=c,i.context=d,n=l):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{i=e.stateNode,Xh(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:st(e.type,l),i.props=d,h=e.pendingProps,p=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=Ze(c):(c=De(r)?Or:ke.current,c=yn(e,c));var x=r.getDerivedStateFromProps;(u=typeof x=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==h||p!==c)&&Td(e,i,n,c),Ft=!1,p=e.memoizedState,i.state=p,eo(e,n,i,s);var b=e.memoizedState;l!==h||p!==b||$e.current||Ft?(typeof x=="function"&&(ol(e,r,x,n),b=e.memoizedState),(d=Ft||Od(e,r,d,n,p,b,c)||!1)?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,b,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,b,c)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=b),i.props=n,i.state=b,i.context=c,n=d):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),n=!1)}return dl(t,e,r,n,o,s)}function dl(t,e,r,n,s,o){Sf(t,e);var i=(e.flags&128)!==0;if(!n&&!i)return s&&jd(e,r,!1),It(t,e,o);n=e.stateNode,t0.current=e;var l=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&i?(e.child=wn(e,t.child,null,o),e.child=wn(e,null,l,o)):Ee(t,e,l,o),e.memoizedState=n.state,s&&jd(e,r,!0),e.child}function kf(t){var e=t.stateNode;e.pendingContext?wd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&wd(t,e.context,!1),hc(t,e.containerInfo)}function Ld(t,e,r,n,s){return bn(),oc(s),e.flags|=256,Ee(t,e,r,n),e.child}var ul={dehydrated:null,treeContext:null,retryLane:0};function hl(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ef(t,e,r){var n=e.pendingProps,s=oe.current,o=!1,i=(e.flags&128)!==0,l;if((l=i)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ee(oe,s&1),t===null)return sl(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=n.children,t=n.fallback,o?(n=e.mode,o=e.child,i={mode:"hidden",children:i},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=Po(i,n,0,null),t=Cr(t,n,r,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=hl(r),e.memoizedState=ul,t):bc(e,i));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return r0(t,e,i,n,l,s,r);if(o){o=n.fallback,i=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=sr(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=sr(l,o):(o=Cr(o,i,r,null),o.flags|=2),o.return=e,n.return=e,n.sibling=o,e.child=n,n=o,o=e.child,i=t.child.memoizedState,i=i===null?hl(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=t.childLanes&~r,e.memoizedState=ul,n}return o=t.child,t=o.sibling,n=sr(o,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function bc(t,e){return e=Po({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function fa(t,e,r,n){return n!==null&&oc(n),wn(e,t.child,null,r),t=bc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function r0(t,e,r,n,s,o,i){if(r)return e.flags&256?(e.flags&=-257,n=hi(Error(A(422))),fa(t,e,i,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=n.fallback,s=e.mode,n=Po({mode:"visible",children:n.children},s,0,null),o=Cr(o,s,i,null),o.flags|=2,n.return=e,o.return=e,n.sibling=o,e.child=n,e.mode&1&&wn(e,t.child,null,i),e.child.memoizedState=hl(i),e.memoizedState=ul,o);if(!(e.mode&1))return fa(t,e,i,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,o=Error(A(419)),n=hi(o,n,void 0),fa(t,e,i,n)}if(l=(i&t.childLanes)!==0,Ie||l){if(n=ye,n!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|i)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,At(t,s),ct(n,t,s,-1))}return kc(),n=hi(Error(A(421))),fa(t,e,i,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=p0.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,Ue=er(s.nextSibling),Be=e,ae=!0,it=null,t!==null&&(Qe[Ke++]=Ct,Qe[Ke++]=Pt,Qe[Ke++]=Tr,Ct=t.id,Pt=t.overflow,Tr=e),e=bc(e,n.children),e.flags|=4096,e)}function qd(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),al(t.return,e,r)}function fi(t,e,r,n,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=s)}function Cf(t,e,r){var n=e.pendingProps,s=n.revealOrder,o=n.tail;if(Ee(t,e,n.children,r),n=oe.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qd(t,r,e);else if(t.tag===19)qd(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(ee(oe,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&to(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),fi(e,!1,s,r,o);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&to(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}fi(e,!0,r,null,o);break;case"together":fi(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ia(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function It(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Ar|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(A(153));if(e.child!==null){for(t=e.child,r=sr(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=sr(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function n0(t,e,r){switch(e.tag){case 3:kf(e),bn();break;case 5:Zh(e);break;case 1:De(e.type)&&Ka(e);break;case 4:hc(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;ee(Xa,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(ee(oe,oe.current&1),e.flags|=128,null):r&e.child.childLanes?Ef(t,e,r):(ee(oe,oe.current&1),t=It(t,e,r),t!==null?t.sibling:null);ee(oe,oe.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Cf(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ee(oe,oe.current),n)break;return null;case 22:case 23:return e.lanes=0,Nf(t,e,r)}return It(t,e,r)}var Pf,fl,Of,Tf;Pf=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};fl=function(){};Of=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,kr(wt.current);var o=null;switch(r){case"input":s=Ri(t,s),n=Ri(t,n),o=[];break;case"select":s=ce({},s,{value:void 0}),n=ce({},n,{value:void 0}),o=[];break;case"textarea":s=Li(t,s),n=Li(t,n),o=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Ga)}zi(r,n);var i;r=null;for(d in s)if(!n.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(bs.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in n){var c=n[d];if(l=s!=null?s[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(o||(o=[]),o.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(bs.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ne("scroll",t),o||l===c||(o=[])):(o=o||[]).push(d,c))}r&&(o=o||[]).push("style",r);var d=o;(e.updateQueue=d)&&(e.flags|=4)}};Tf=function(t,e,r,n){r!==n&&(e.flags|=4)};function Qn(t,e){if(!ae)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Ne(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function s0(t,e,r){var n=e.pendingProps;switch(ac(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ne(e),null;case 1:return De(e.type)&&Qa(),Ne(e),null;case 3:return n=e.stateNode,jn(),se($e),se(ke),mc(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(ua(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,it!==null&&(wl(it),it=null))),fl(t,e),Ne(e),null;case 5:fc(e);var s=kr(Ms.current);if(r=e.type,t!==null&&e.stateNode!=null)Of(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(A(166));return Ne(e),null}if(t=kr(wt.current),ua(e)){n=e.stateNode,r=e.type;var o=e.memoizedProps;switch(n[xt]=e,n[Os]=o,t=(e.mode&1)!==0,r){case"dialog":ne("cancel",n),ne("close",n);break;case"iframe":case"object":case"embed":ne("load",n);break;case"video":case"audio":for(s=0;s<as.length;s++)ne(as[s],n);break;case"source":ne("error",n);break;case"img":case"image":case"link":ne("error",n),ne("load",n);break;case"details":ne("toggle",n);break;case"input":Qc(n,o),ne("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},ne("invalid",n);break;case"textarea":Jc(n,o),ne("invalid",n)}zi(r,o),s=null;for(var i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="children"?typeof l=="string"?n.textContent!==l&&(o.suppressHydrationWarning!==!0&&da(n.textContent,l,t),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&da(n.textContent,l,t),s=["children",""+l]):bs.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&ne("scroll",n)}switch(r){case"input":ra(n),Kc(n,o,!0);break;case"textarea":ra(n),Yc(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=Ga)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=sh(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=i.createElement(r,{is:n.is}):(t=i.createElement(r),r==="select"&&(i=t,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):t=i.createElementNS(t,r),t[xt]=e,t[Os]=n,Pf(t,e,!1,!1),e.stateNode=t;e:{switch(i=Ui(r,n),r){case"dialog":ne("cancel",t),ne("close",t),s=n;break;case"iframe":case"object":case"embed":ne("load",t),s=n;break;case"video":case"audio":for(s=0;s<as.length;s++)ne(as[s],t);s=n;break;case"source":ne("error",t),s=n;break;case"img":case"image":case"link":ne("error",t),ne("load",t),s=n;break;case"details":ne("toggle",t),s=n;break;case"input":Qc(t,n),s=Ri(t,n),ne("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=ce({},n,{value:void 0}),ne("invalid",t);break;case"textarea":Jc(t,n),s=Li(t,n),ne("invalid",t);break;default:s=n}zi(r,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?ih(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ah(t,c)):o==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&ws(t,c):typeof c=="number"&&ws(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(bs.hasOwnProperty(o)?c!=null&&o==="onScroll"&&ne("scroll",t):c!=null&&Wl(t,o,c,i))}switch(r){case"input":ra(t),Kc(t,n,!1);break;case"textarea":ra(t),Yc(t);break;case"option":n.value!=null&&t.setAttribute("value",""+or(n.value));break;case"select":t.multiple=!!n.multiple,o=n.value,o!=null?cn(t,!!n.multiple,o,!1):n.defaultValue!=null&&cn(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ga)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ne(e),null;case 6:if(t&&e.stateNode!=null)Tf(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(A(166));if(r=kr(Ms.current),kr(wt.current),ua(e)){if(n=e.stateNode,r=e.memoizedProps,n[xt]=e,(o=n.nodeValue!==r)&&(t=Be,t!==null))switch(t.tag){case 3:da(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&da(n.nodeValue,r,(t.mode&1)!==0)}o&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[xt]=e,e.stateNode=n}return Ne(e),null;case 13:if(se(oe),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ae&&Ue!==null&&e.mode&1&&!(e.flags&128))Qh(),bn(),e.flags|=98560,o=!1;else if(o=ua(e),n!==null&&n.dehydrated!==null){if(t===null){if(!o)throw Error(A(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(A(317));o[xt]=e}else bn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ne(e),o=!1}else it!==null&&(wl(it),it=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||oe.current&1?xe===0&&(xe=3):kc())),e.updateQueue!==null&&(e.flags|=4),Ne(e),null);case 4:return jn(),fl(t,e),t===null&&Cs(e.stateNode.containerInfo),Ne(e),null;case 10:return cc(e.type._context),Ne(e),null;case 17:return De(e.type)&&Qa(),Ne(e),null;case 19:if(se(oe),o=e.memoizedState,o===null)return Ne(e),null;if(n=(e.flags&128)!==0,i=o.rendering,i===null)if(n)Qn(o,!1);else{if(xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=to(t),i!==null){for(e.flags|=128,Qn(o,!1),n=i.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)o=r,t=n,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,t=i.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ee(oe,oe.current&1|2),e.child}t=t.sibling}o.tail!==null&&he()>Nn&&(e.flags|=128,n=!0,Qn(o,!1),e.lanes=4194304)}else{if(!n)if(t=to(i),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Qn(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!ae)return Ne(e),null}else 2*he()-o.renderingStartTime>Nn&&r!==1073741824&&(e.flags|=128,n=!0,Qn(o,!1),e.lanes=4194304);o.isBackwards?(i.sibling=e.child,e.child=i):(r=o.last,r!==null?r.sibling=i:e.child=i,o.last=i)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=he(),e.sibling=null,r=oe.current,ee(oe,n?r&1|2:r&1),e):(Ne(e),null);case 22:case 23:return Sc(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?ze&1073741824&&(Ne(e),e.subtreeFlags&6&&(e.flags|=8192)):Ne(e),null;case 24:return null;case 25:return null}throw Error(A(156,e.tag))}function a0(t,e){switch(ac(e),e.tag){case 1:return De(e.type)&&Qa(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return jn(),se($e),se(ke),mc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return fc(e),null;case 13:if(se(oe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(A(340));bn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return se(oe),null;case 4:return jn(),null;case 10:return cc(e.type._context),null;case 22:case 23:return Sc(),null;case 24:return null;default:return null}}var ma=!1,Se=!1,o0=typeof WeakSet=="function"?WeakSet:Set,D=null;function on(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){de(t,e,n)}else r.current=null}function ml(t,e,r){try{r()}catch(n){de(t,e,n)}}var zd=!1;function i0(t,e){if(Yi=Wa,t=Rh(),nc(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var i=0,l=-1,c=-1,d=0,u=0,h=t,p=null;t:for(;;){for(var x;h!==r||s!==0&&h.nodeType!==3||(l=i+s),h!==o||n!==0&&h.nodeType!==3||(c=i+n),h.nodeType===3&&(i+=h.nodeValue.length),(x=h.firstChild)!==null;)p=h,h=x;for(;;){if(h===t)break t;if(p===r&&++d===s&&(l=i),p===o&&++u===n&&(c=i),(x=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=x}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Xi={focusedElem:t,selectionRange:r},Wa=!1,D=e;D!==null;)if(e=D,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,D=t;else for(;D!==null;){e=D;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var y=b.memoizedProps,w=b.memoizedState,g=e.stateNode,m=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:st(e.type,y),w);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var f=e.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(v){de(e,e.return,v)}if(t=e.sibling,t!==null){t.return=e.return,D=t;break}D=e.return}return b=zd,zd=!1,b}function ms(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&ml(e,r,o)}s=s.next}while(s!==n)}}function Eo(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function pl(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Mf(t){var e=t.alternate;e!==null&&(t.alternate=null,Mf(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xt],delete e[Os],delete e[tl],delete e[Fg],delete e[Wg])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Af(t){return t.tag===5||t.tag===3||t.tag===4}function Ud(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Af(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gl(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Ga));else if(n!==4&&(t=t.child,t!==null))for(gl(t,e,r),t=t.sibling;t!==null;)gl(t,e,r),t=t.sibling}function xl(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(xl(t,e,r),t=t.sibling;t!==null;)xl(t,e,r),t=t.sibling}var be=null,at=!1;function $t(t,e,r){for(r=r.child;r!==null;)If(t,e,r),r=r.sibling}function If(t,e,r){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(yo,r)}catch{}switch(r.tag){case 5:Se||on(r,e);case 6:var n=be,s=at;be=null,$t(t,e,r),be=n,at=s,be!==null&&(at?(t=be,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):be.removeChild(r.stateNode));break;case 18:be!==null&&(at?(t=be,r=r.stateNode,t.nodeType===8?oi(t.parentNode,r):t.nodeType===1&&oi(t,r),Ss(t)):oi(be,r.stateNode));break;case 4:n=be,s=at,be=r.stateNode.containerInfo,at=!0,$t(t,e,r),be=n,at=s;break;case 0:case 11:case 14:case 15:if(!Se&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var o=s,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&ml(r,e,i),s=s.next}while(s!==n)}$t(t,e,r);break;case 1:if(!Se&&(on(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){de(r,e,l)}$t(t,e,r);break;case 21:$t(t,e,r);break;case 22:r.mode&1?(Se=(n=Se)||r.memoizedState!==null,$t(t,e,r),Se=n):$t(t,e,r);break;default:$t(t,e,r)}}function Bd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new o0),e.forEach(function(n){var s=g0.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function nt(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var o=t,i=e,l=i;e:for(;l!==null;){switch(l.tag){case 5:be=l.stateNode,at=!1;break e;case 3:be=l.stateNode.containerInfo,at=!0;break e;case 4:be=l.stateNode.containerInfo,at=!0;break e}l=l.return}if(be===null)throw Error(A(160));If(o,i,s),be=null,at=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){de(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Rf(e,t),e=e.sibling}function Rf(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(nt(e,t),ht(t),n&4){try{ms(3,t,t.return),Eo(3,t)}catch(y){de(t,t.return,y)}try{ms(5,t,t.return)}catch(y){de(t,t.return,y)}}break;case 1:nt(e,t),ht(t),n&512&&r!==null&&on(r,r.return);break;case 5:if(nt(e,t),ht(t),n&512&&r!==null&&on(r,r.return),t.flags&32){var s=t.stateNode;try{ws(s,"")}catch(y){de(t,t.return,y)}}if(n&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,i=r!==null?r.memoizedProps:o,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&rh(s,o),Ui(l,i);var d=Ui(l,o);for(i=0;i<c.length;i+=2){var u=c[i],h=c[i+1];u==="style"?ih(s,h):u==="dangerouslySetInnerHTML"?ah(s,h):u==="children"?ws(s,h):Wl(s,u,h,d)}switch(l){case"input":$i(s,o);break;case"textarea":nh(s,o);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var x=o.value;x!=null?cn(s,!!o.multiple,x,!1):p!==!!o.multiple&&(o.defaultValue!=null?cn(s,!!o.multiple,o.defaultValue,!0):cn(s,!!o.multiple,o.multiple?[]:"",!1))}s[Os]=o}catch(y){de(t,t.return,y)}}break;case 6:if(nt(e,t),ht(t),n&4){if(t.stateNode===null)throw Error(A(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(y){de(t,t.return,y)}}break;case 3:if(nt(e,t),ht(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Ss(e.containerInfo)}catch(y){de(t,t.return,y)}break;case 4:nt(e,t),ht(t);break;case 13:nt(e,t),ht(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(_c=he())),n&4&&Bd(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(Se=(d=Se)||u,nt(e,t),Se=d):nt(e,t),ht(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(D=t,u=t.child;u!==null;){for(h=D=u;D!==null;){switch(p=D,x=p.child,p.tag){case 0:case 11:case 14:case 15:ms(4,p,p.return);break;case 1:on(p,p.return);var b=p.stateNode;if(typeof b.componentWillUnmount=="function"){n=p,r=p.return;try{e=n,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(y){de(n,r,y)}}break;case 5:on(p,p.return);break;case 22:if(p.memoizedState!==null){Wd(h);continue}}x!==null?(x.return=p,D=x):Wd(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{s=h.stateNode,d?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=h.stateNode,c=h.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=oh("display",i))}catch(y){de(t,t.return,y)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(y){de(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:nt(e,t),ht(t),n&4&&Bd(t);break;case 21:break;default:nt(e,t),ht(t)}}function ht(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Af(r)){var n=r;break e}r=r.return}throw Error(A(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(ws(s,""),n.flags&=-33);var o=Ud(t);xl(t,o,s);break;case 3:case 4:var i=n.stateNode.containerInfo,l=Ud(t);gl(t,l,i);break;default:throw Error(A(161))}}catch(c){de(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function l0(t,e,r){D=t,$f(t)}function $f(t,e,r){for(var n=(t.mode&1)!==0;D!==null;){var s=D,o=s.child;if(s.tag===22&&n){var i=s.memoizedState!==null||ma;if(!i){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Se;l=ma;var d=Se;if(ma=i,(Se=c)&&!d)for(D=s;D!==null;)i=D,c=i.child,i.tag===22&&i.memoizedState!==null?Hd(s):c!==null?(c.return=i,D=c):Hd(s);for(;o!==null;)D=o,$f(o),o=o.sibling;D=s,ma=l,Se=d}Fd(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,D=o):Fd(t)}}function Fd(t){for(;D!==null;){var e=D;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Se||Eo(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Se)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:st(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Ed(e,o,n);break;case 3:var i=e.updateQueue;if(i!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Ed(e,i,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Ss(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}Se||e.flags&512&&pl(e)}catch(p){de(e,e.return,p)}}if(e===t){D=null;break}if(r=e.sibling,r!==null){r.return=e.return,D=r;break}D=e.return}}function Wd(t){for(;D!==null;){var e=D;if(e===t){D=null;break}var r=e.sibling;if(r!==null){r.return=e.return,D=r;break}D=e.return}}function Hd(t){for(;D!==null;){var e=D;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Eo(4,e)}catch(c){de(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(c){de(e,s,c)}}var o=e.return;try{pl(e)}catch(c){de(e,o,c)}break;case 5:var i=e.return;try{pl(e)}catch(c){de(e,i,c)}}}catch(c){de(e,e.return,c)}if(e===t){D=null;break}var l=e.sibling;if(l!==null){l.return=e.return,D=l;break}D=e.return}}var c0=Math.ceil,so=Rt.ReactCurrentDispatcher,wc=Rt.ReactCurrentOwner,Ye=Rt.ReactCurrentBatchConfig,J=0,ye=null,me=null,we=0,ze=0,ln=ur(0),xe=0,$s=null,Ar=0,Co=0,jc=0,ps=null,Me=null,_c=0,Nn=1/0,St=null,ao=!1,vl=null,rr=null,pa=!1,Kt=null,oo=0,gs=0,yl=null,Ra=-1,$a=0;function Ce(){return J&6?he():Ra!==-1?Ra:Ra=he()}function nr(t){return t.mode&1?J&2&&we!==0?we&-we:Vg.transition!==null?($a===0&&($a=yh()),$a):(t=X,t!==0||(t=window.event,t=t===void 0?16:kh(t.type)),t):1}function ct(t,e,r,n){if(50<gs)throw gs=0,yl=null,Error(A(185));Ws(t,r,n),(!(J&2)||t!==ye)&&(t===ye&&(!(J&2)&&(Co|=r),xe===4&&Ht(t,we)),Le(t,n),r===1&&J===0&&!(e.mode&1)&&(Nn=he()+500,No&&hr()))}function Le(t,e){var r=t.callbackNode;Vp(t,e);var n=Fa(t,t===ye?we:0);if(n===0)r!==null&&ed(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&ed(r),e===1)t.tag===0?Hg(Vd.bind(null,t)):Hh(Vd.bind(null,t)),Ug(function(){!(J&6)&&hr()}),r=null;else{switch(bh(n)){case 1:r=Kl;break;case 4:r=xh;break;case 16:r=Ba;break;case 536870912:r=vh;break;default:r=Ba}r=Wf(r,Df.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Df(t,e){if(Ra=-1,$a=0,J&6)throw Error(A(327));var r=t.callbackNode;if(mn()&&t.callbackNode!==r)return null;var n=Fa(t,t===ye?we:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=io(t,n);else{e=n;var s=J;J|=2;var o=qf();(ye!==t||we!==e)&&(St=null,Nn=he()+500,Er(t,e));do try{h0();break}catch(l){Lf(t,l)}while(!0);lc(),so.current=o,J=s,me!==null?e=0:(ye=null,we=0,e=xe)}if(e!==0){if(e===2&&(s=Vi(t),s!==0&&(n=s,e=bl(t,s))),e===1)throw r=$s,Er(t,0),Ht(t,n),Le(t,he()),r;if(e===6)Ht(t,n);else{if(s=t.current.alternate,!(n&30)&&!d0(s)&&(e=io(t,n),e===2&&(o=Vi(t),o!==0&&(n=o,e=bl(t,o))),e===1))throw r=$s,Er(t,0),Ht(t,n),Le(t,he()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(A(345));case 2:br(t,Me,St);break;case 3:if(Ht(t,n),(n&130023424)===n&&(e=_c+500-he(),10<e)){if(Fa(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){Ce(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=el(br.bind(null,t,Me,St),e);break}br(t,Me,St);break;case 4:if(Ht(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var i=31-lt(n);o=1<<i,i=e[i],i>s&&(s=i),n&=~o}if(n=s,n=he()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*c0(n/1960))-n,10<n){t.timeoutHandle=el(br.bind(null,t,Me,St),n);break}br(t,Me,St);break;case 5:br(t,Me,St);break;default:throw Error(A(329))}}}return Le(t,he()),t.callbackNode===r?Df.bind(null,t):null}function bl(t,e){var r=ps;return t.current.memoizedState.isDehydrated&&(Er(t,e).flags|=256),t=io(t,e),t!==2&&(e=Me,Me=r,e!==null&&wl(e)),t}function wl(t){Me===null?Me=t:Me.push.apply(Me,t)}function d0(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],o=s.getSnapshot;s=s.value;try{if(!ut(o(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ht(t,e){for(e&=~jc,e&=~Co,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-lt(e),n=1<<r;t[r]=-1,e&=~n}}function Vd(t){if(J&6)throw Error(A(327));mn();var e=Fa(t,0);if(!(e&1))return Le(t,he()),null;var r=io(t,e);if(t.tag!==0&&r===2){var n=Vi(t);n!==0&&(e=n,r=bl(t,n))}if(r===1)throw r=$s,Er(t,0),Ht(t,e),Le(t,he()),r;if(r===6)throw Error(A(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,br(t,Me,St),Le(t,he()),null}function Nc(t,e){var r=J;J|=1;try{return t(e)}finally{J=r,J===0&&(Nn=he()+500,No&&hr())}}function Ir(t){Kt!==null&&Kt.tag===0&&!(J&6)&&mn();var e=J;J|=1;var r=Ye.transition,n=X;try{if(Ye.transition=null,X=1,t)return t()}finally{X=n,Ye.transition=r,J=e,!(J&6)&&hr()}}function Sc(){ze=ln.current,se(ln)}function Er(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,zg(r)),me!==null)for(r=me.return;r!==null;){var n=r;switch(ac(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Qa();break;case 3:jn(),se($e),se(ke),mc();break;case 5:fc(n);break;case 4:jn();break;case 13:se(oe);break;case 19:se(oe);break;case 10:cc(n.type._context);break;case 22:case 23:Sc()}r=r.return}if(ye=t,me=t=sr(t.current,null),we=ze=e,xe=0,$s=null,jc=Co=Ar=0,Me=ps=null,Sr!==null){for(e=0;e<Sr.length;e++)if(r=Sr[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,o=r.pending;if(o!==null){var i=o.next;o.next=s,n.next=i}r.pending=n}Sr=null}return t}function Lf(t,e){do{var r=me;try{if(lc(),Ma.current=no,ro){for(var n=ie.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}ro=!1}if(Mr=0,ve=ge=ie=null,fs=!1,As=0,wc.current=null,r===null||r.return===null){xe=1,$s=e,me=null;break}e:{var o=t,i=r.return,l=r,c=e;if(e=we,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var x=Ad(i);if(x!==null){x.flags&=-257,Id(x,i,l,o,e),x.mode&1&&Md(o,d,e),e=x,c=d;var b=e.updateQueue;if(b===null){var y=new Set;y.add(c),e.updateQueue=y}else b.add(c);break e}else{if(!(e&1)){Md(o,d,e),kc();break e}c=Error(A(426))}}else if(ae&&l.mode&1){var w=Ad(i);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Id(w,i,l,o,e),oc(_n(c,l));break e}}o=c=_n(c,l),xe!==4&&(xe=2),ps===null?ps=[o]:ps.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var g=wf(o,c,e);kd(o,g);break e;case 1:l=c;var m=o.type,f=o.stateNode;if(!(o.flags&128)&&(typeof m.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(rr===null||!rr.has(f)))){o.flags|=65536,e&=-e,o.lanes|=e;var v=jf(o,l,e);kd(o,v);break e}}o=o.return}while(o!==null)}Uf(r)}catch(_){e=_,me===r&&r!==null&&(me=r=r.return);continue}break}while(!0)}function qf(){var t=so.current;return so.current=no,t===null?no:t}function kc(){(xe===0||xe===3||xe===2)&&(xe=4),ye===null||!(Ar&268435455)&&!(Co&268435455)||Ht(ye,we)}function io(t,e){var r=J;J|=2;var n=qf();(ye!==t||we!==e)&&(St=null,Er(t,e));do try{u0();break}catch(s){Lf(t,s)}while(!0);if(lc(),J=r,so.current=n,me!==null)throw Error(A(261));return ye=null,we=0,xe}function u0(){for(;me!==null;)zf(me)}function h0(){for(;me!==null&&!Dp();)zf(me)}function zf(t){var e=Ff(t.alternate,t,ze);t.memoizedProps=t.pendingProps,e===null?Uf(t):me=e,wc.current=null}function Uf(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=a0(r,e),r!==null){r.flags&=32767,me=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xe=6,me=null;return}}else if(r=s0(r,e,ze),r!==null){me=r;return}if(e=e.sibling,e!==null){me=e;return}me=e=t}while(e!==null);xe===0&&(xe=5)}function br(t,e,r){var n=X,s=Ye.transition;try{Ye.transition=null,X=1,f0(t,e,r,n)}finally{Ye.transition=s,X=n}return null}function f0(t,e,r,n){do mn();while(Kt!==null);if(J&6)throw Error(A(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(A(177));t.callbackNode=null,t.callbackPriority=0;var o=r.lanes|r.childLanes;if(Gp(t,o),t===ye&&(me=ye=null,we=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||pa||(pa=!0,Wf(Ba,function(){return mn(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Ye.transition,Ye.transition=null;var i=X;X=1;var l=J;J|=4,wc.current=null,i0(t,r),Rf(r,t),Ag(Xi),Wa=!!Yi,Xi=Yi=null,t.current=r,l0(r),Lp(),J=l,X=i,Ye.transition=o}else t.current=r;if(pa&&(pa=!1,Kt=t,oo=s),o=t.pendingLanes,o===0&&(rr=null),Up(r.stateNode),Le(t,he()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(ao)throw ao=!1,t=vl,vl=null,t;return oo&1&&t.tag!==0&&mn(),o=t.pendingLanes,o&1?t===yl?gs++:(gs=0,yl=t):gs=0,hr(),null}function mn(){if(Kt!==null){var t=bh(oo),e=Ye.transition,r=X;try{if(Ye.transition=null,X=16>t?16:t,Kt===null)var n=!1;else{if(t=Kt,Kt=null,oo=0,J&6)throw Error(A(331));var s=J;for(J|=4,D=t.current;D!==null;){var o=D,i=o.child;if(D.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(D=d;D!==null;){var u=D;switch(u.tag){case 0:case 11:case 15:ms(8,u,o)}var h=u.child;if(h!==null)h.return=u,D=h;else for(;D!==null;){u=D;var p=u.sibling,x=u.return;if(Mf(u),u===d){D=null;break}if(p!==null){p.return=x,D=p;break}D=x}}}var b=o.alternate;if(b!==null){var y=b.child;if(y!==null){b.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}D=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,D=i;else e:for(;D!==null;){if(o=D,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ms(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,D=g;break e}D=o.return}}var m=t.current;for(D=m;D!==null;){i=D;var f=i.child;if(i.subtreeFlags&2064&&f!==null)f.return=i,D=f;else e:for(i=m;D!==null;){if(l=D,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Eo(9,l)}}catch(_){de(l,l.return,_)}if(l===i){D=null;break e}var v=l.sibling;if(v!==null){v.return=l.return,D=v;break e}D=l.return}}if(J=s,hr(),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(yo,t)}catch{}n=!0}return n}finally{X=r,Ye.transition=e}}return!1}function Gd(t,e,r){e=_n(r,e),e=wf(t,e,1),t=tr(t,e,1),e=Ce(),t!==null&&(Ws(t,1,e),Le(t,e))}function de(t,e,r){if(t.tag===3)Gd(t,t,r);else for(;e!==null;){if(e.tag===3){Gd(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(rr===null||!rr.has(n))){t=_n(r,t),t=jf(e,t,1),e=tr(e,t,1),t=Ce(),e!==null&&(Ws(e,1,t),Le(e,t));break}}e=e.return}}function m0(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Ce(),t.pingedLanes|=t.suspendedLanes&r,ye===t&&(we&r)===r&&(xe===4||xe===3&&(we&130023424)===we&&500>he()-_c?Er(t,0):jc|=r),Le(t,e)}function Bf(t,e){e===0&&(t.mode&1?(e=aa,aa<<=1,!(aa&130023424)&&(aa=4194304)):e=1);var r=Ce();t=At(t,e),t!==null&&(Ws(t,e,r),Le(t,r))}function p0(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Bf(t,r)}function g0(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(A(314))}n!==null&&n.delete(e),Bf(t,r)}var Ff;Ff=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||$e.current)Ie=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Ie=!1,n0(t,e,r);Ie=!!(t.flags&131072)}else Ie=!1,ae&&e.flags&1048576&&Vh(e,Ya,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Ia(t,e),t=e.pendingProps;var s=yn(e,ke.current);fn(e,r),s=gc(null,e,n,t,s,r);var o=xc();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,De(n)?(o=!0,Ka(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,uc(e),s.updater=ko,e.stateNode=s,s._reactInternals=e,il(e,n,t,r),e=dl(null,e,n,!0,o,r)):(e.tag=0,ae&&o&&sc(e),Ee(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Ia(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=v0(n),t=st(n,t),s){case 0:e=cl(null,e,n,t,r);break e;case 1:e=Dd(null,e,n,t,r);break e;case 11:e=Rd(null,e,n,t,r);break e;case 14:e=$d(null,e,n,st(n.type,t),r);break e}throw Error(A(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:st(n,s),cl(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:st(n,s),Dd(t,e,n,s,r);case 3:e:{if(kf(e),t===null)throw Error(A(387));n=e.pendingProps,o=e.memoizedState,s=o.element,Xh(t,e),eo(e,n,null,r);var i=e.memoizedState;if(n=i.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=_n(Error(A(423)),e),e=Ld(t,e,n,r,s);break e}else if(n!==s){s=_n(Error(A(424)),e),e=Ld(t,e,n,r,s);break e}else for(Ue=er(e.stateNode.containerInfo.firstChild),Be=e,ae=!0,it=null,r=Jh(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(bn(),n===s){e=It(t,e,r);break e}Ee(t,e,n,r)}e=e.child}return e;case 5:return Zh(e),t===null&&sl(e),n=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,i=s.children,Zi(n,s)?i=null:o!==null&&Zi(n,o)&&(e.flags|=32),Sf(t,e),Ee(t,e,i,r),e.child;case 6:return t===null&&sl(e),null;case 13:return Ef(t,e,r);case 4:return hc(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=wn(e,null,n,r):Ee(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:st(n,s),Rd(t,e,n,s,r);case 7:return Ee(t,e,e.pendingProps,r),e.child;case 8:return Ee(t,e,e.pendingProps.children,r),e.child;case 12:return Ee(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,o=e.memoizedProps,i=s.value,ee(Xa,n._currentValue),n._currentValue=i,o!==null)if(ut(o.value,i)){if(o.children===s.children&&!$e.current){e=It(t,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){i=o.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(o.tag===1){c=Ot(-1,r&-r),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),al(o.return,r,e),l.lanes|=r;break}c=c.next}}else if(o.tag===10)i=o.type===e.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(A(341));i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),al(i,r,e),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===e){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}Ee(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,fn(e,r),s=Ze(s),n=n(s),e.flags|=1,Ee(t,e,n,r),e.child;case 14:return n=e.type,s=st(n,e.pendingProps),s=st(n.type,s),$d(t,e,n,s,r);case 15:return _f(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:st(n,s),Ia(t,e),e.tag=1,De(n)?(t=!0,Ka(e)):t=!1,fn(e,r),bf(e,n,s),il(e,n,s,r),dl(null,e,n,!0,t,r);case 19:return Cf(t,e,r);case 22:return Nf(t,e,r)}throw Error(A(156,e.tag))};function Wf(t,e){return gh(t,e)}function x0(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Je(t,e,r,n){return new x0(t,e,r,n)}function Ec(t){return t=t.prototype,!(!t||!t.isReactComponent)}function v0(t){if(typeof t=="function")return Ec(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Vl)return 11;if(t===Gl)return 14}return 2}function sr(t,e){var r=t.alternate;return r===null?(r=Je(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Da(t,e,r,n,s,o){var i=2;if(n=t,typeof t=="function")Ec(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Yr:return Cr(r.children,s,o,e);case Hl:i=8,s|=8;break;case Ti:return t=Je(12,r,e,s|2),t.elementType=Ti,t.lanes=o,t;case Mi:return t=Je(13,r,e,s),t.elementType=Mi,t.lanes=o,t;case Ai:return t=Je(19,r,e,s),t.elementType=Ai,t.lanes=o,t;case Zu:return Po(r,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Yu:i=10;break e;case Xu:i=9;break e;case Vl:i=11;break e;case Gl:i=14;break e;case Bt:i=16,n=null;break e}throw Error(A(130,t==null?t:typeof t,""))}return e=Je(i,r,e,s),e.elementType=t,e.type=n,e.lanes=o,e}function Cr(t,e,r,n){return t=Je(7,t,n,e),t.lanes=r,t}function Po(t,e,r,n){return t=Je(22,t,n,e),t.elementType=Zu,t.lanes=r,t.stateNode={isHidden:!1},t}function mi(t,e,r){return t=Je(6,t,null,e),t.lanes=r,t}function pi(t,e,r){return e=Je(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function y0(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ko(0),this.expirationTimes=Ko(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ko(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Cc(t,e,r,n,s,o,i,l,c){return t=new y0(t,e,r,l,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Je(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},uc(o),t}function b0(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jr,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function Hf(t){if(!t)return ir;t=t._reactInternals;e:{if(Dr(t)!==t||t.tag!==1)throw Error(A(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(De(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(A(171))}if(t.tag===1){var r=t.type;if(De(r))return Wh(t,r,e)}return e}function Vf(t,e,r,n,s,o,i,l,c){return t=Cc(r,n,!0,t,s,o,i,l,c),t.context=Hf(null),r=t.current,n=Ce(),s=nr(r),o=Ot(n,s),o.callback=e??null,tr(r,o,s),t.current.lanes=s,Ws(t,s,n),Le(t,n),t}function Oo(t,e,r,n){var s=e.current,o=Ce(),i=nr(s);return r=Hf(r),e.context===null?e.context=r:e.pendingContext=r,e=Ot(o,i),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=tr(s,e,i),t!==null&&(ct(t,s,i,o),Ta(t,s,i)),i}function lo(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Qd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Pc(t,e){Qd(t,e),(t=t.alternate)&&Qd(t,e)}function w0(){return null}var Gf=typeof reportError=="function"?reportError:function(t){console.error(t)};function Oc(t){this._internalRoot=t}To.prototype.render=Oc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(A(409));Oo(t,e,null,null)};To.prototype.unmount=Oc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ir(function(){Oo(null,t,null,null)}),e[Mt]=null}};function To(t){this._internalRoot=t}To.prototype.unstable_scheduleHydration=function(t){if(t){var e=_h();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Wt.length&&e!==0&&e<Wt[r].priority;r++);Wt.splice(r,0,t),r===0&&Sh(t)}};function Tc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Mo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Kd(){}function j0(t,e,r,n,s){if(s){if(typeof n=="function"){var o=n;n=function(){var d=lo(i);o.call(d)}}var i=Vf(e,n,t,0,null,!1,!1,"",Kd);return t._reactRootContainer=i,t[Mt]=i.current,Cs(t.nodeType===8?t.parentNode:t),Ir(),i}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var d=lo(c);l.call(d)}}var c=Cc(t,0,!1,null,null,!1,!1,"",Kd);return t._reactRootContainer=c,t[Mt]=c.current,Cs(t.nodeType===8?t.parentNode:t),Ir(function(){Oo(e,c,r,n)}),c}function Ao(t,e,r,n,s){var o=r._reactRootContainer;if(o){var i=o;if(typeof s=="function"){var l=s;s=function(){var c=lo(i);l.call(c)}}Oo(e,i,t,s)}else i=j0(r,e,t,s,n);return lo(i)}wh=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=ss(e.pendingLanes);r!==0&&(Jl(e,r|1),Le(e,he()),!(J&6)&&(Nn=he()+500,hr()))}break;case 13:Ir(function(){var n=At(t,1);if(n!==null){var s=Ce();ct(n,t,1,s)}}),Pc(t,1)}};Yl=function(t){if(t.tag===13){var e=At(t,134217728);if(e!==null){var r=Ce();ct(e,t,134217728,r)}Pc(t,134217728)}};jh=function(t){if(t.tag===13){var e=nr(t),r=At(t,e);if(r!==null){var n=Ce();ct(r,t,e,n)}Pc(t,e)}};_h=function(){return X};Nh=function(t,e){var r=X;try{return X=t,e()}finally{X=r}};Fi=function(t,e,r){switch(e){case"input":if($i(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=_o(n);if(!s)throw Error(A(90));th(n),$i(n,s)}}}break;case"textarea":nh(t,r);break;case"select":e=r.value,e!=null&&cn(t,!!r.multiple,e,!1)}};dh=Nc;uh=Ir;var _0={usingClientEntryPoint:!1,Events:[Vs,tn,_o,lh,ch,Nc]},Kn={findFiberByHostInstance:Nr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},N0={bundleType:Kn.bundleType,version:Kn.version,rendererPackageName:Kn.rendererPackageName,rendererConfig:Kn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=mh(t),t===null?null:t.stateNode},findFiberByHostInstance:Kn.findFiberByHostInstance||w0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ga=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ga.isDisabled&&ga.supportsFiber)try{yo=ga.inject(N0),bt=ga}catch{}}We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_0;We.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tc(e))throw Error(A(200));return b0(t,e,null,r)};We.createRoot=function(t,e){if(!Tc(t))throw Error(A(299));var r=!1,n="",s=Gf;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Cc(t,1,!1,null,null,r,!1,n,s),t[Mt]=e.current,Cs(t.nodeType===8?t.parentNode:t),new Oc(e)};We.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(A(188)):(t=Object.keys(t).join(","),Error(A(268,t)));return t=mh(e),t=t===null?null:t.stateNode,t};We.flushSync=function(t){return Ir(t)};We.hydrate=function(t,e,r){if(!Mo(e))throw Error(A(200));return Ao(null,t,e,!0,r)};We.hydrateRoot=function(t,e,r){if(!Tc(t))throw Error(A(405));var n=r!=null&&r.hydratedSources||null,s=!1,o="",i=Gf;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),e=Vf(e,null,t,1,r??null,s,!1,o,i),t[Mt]=e.current,Cs(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new To(e)};We.render=function(t,e,r){if(!Mo(e))throw Error(A(200));return Ao(null,t,e,!1,r)};We.unmountComponentAtNode=function(t){if(!Mo(t))throw Error(A(40));return t._reactRootContainer?(Ir(function(){Ao(null,null,t,!1,function(){t._reactRootContainer=null,t[Mt]=null})}),!0):!1};We.unstable_batchedUpdates=Nc;We.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Mo(r))throw Error(A(200));if(t==null||t._reactInternals===void 0)throw Error(A(38));return Ao(t,e,r,!1,n)};We.version="18.3.1-next-f1338f8080-20240426";function Qf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Qf)}catch(t){console.error(t)}}Qf(),Gu.exports=We;var S0=Gu.exports,Jd=S0;Pi.createRoot=Jd.createRoot,Pi.hydrateRoot=Jd.hydrateRoot;/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Kf=(...t)=>t.filter((e,r,n)=>!!e&&n.indexOf(e)===r).join(" ");/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var E0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=k.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:o,iconNode:i,...l},c)=>k.createElement("svg",{ref:c,...E0,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:Kf("lucide",s),...l},[...i.map(([d,u])=>k.createElement(d,u)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=(t,e)=>{const r=k.forwardRef(({className:n,...s},o)=>k.createElement(C0,{ref:o,iconNode:e,className:Kf(`lucide-${k0(t)}`,n),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=L("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=L("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=L("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=L("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=L("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=L("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jf=L("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=L("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yf=L("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xf=L("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=L("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=L("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=L("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=L("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=L("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jl=L("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zf=L("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=L("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=L("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=L("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=L("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=L("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0=L("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=L("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=L("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const em=L("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0=L("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=L("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0=L("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=L("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=L("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tm=L("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=L("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=L("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=L("Package2",[["path",{d:"M3 9h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9Z",key:"1ront0"}],["path",{d:"m3 9 2.45-4.9A2 2 0 0 1 7.24 3h9.52a2 2 0 0 1 1.8 1.1L21 9",key:"19h2x1"}],["path",{d:"M12 3v6",key:"1holv5"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=L("PackagePlus",[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=L("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ac=L("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q0=L("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rm=L("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uo=L("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=L("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=L("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nm=L("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=L("Router",[["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",key:"w68u3i"}],["path",{d:"M6.01 18H6",key:"19vcac"}],["path",{d:"M10.01 18H10",key:"uamcmx"}],["path",{d:"M15 10v4",key:"qjz1xs"}],["path",{d:"M17.84 7.17a4 4 0 0 0-5.66 0",key:"1rif40"}],["path",{d:"M20.66 4.34a8 8 0 0 0-11.31 0",key:"6a5xfq"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=L("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=L("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=L("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=L("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=L("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=L("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=L("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=L("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _l=L("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=L("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=L("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sm=L("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=L("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=L("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=L("Weight",[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=L("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nl=L("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=L("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=L("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const am=L("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function om(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=om(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function ex(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=om(t))&&(n&&(n+=" "),n+=e);return n}const Rc="-",tx=t=>{const e=nx(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:i=>{const l=i.split(Rc);return l[0]===""&&l.length!==1&&l.shift(),im(l,e)||rx(i)},getConflictingClassGroupIds:(i,l)=>{const c=r[i]||[];return l&&n[i]?[...c,...n[i]]:c}}},im=(t,e)=>{var i;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),s=n?im(t.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const o=t.join(Rc);return(i=e.validators.find(({validator:l})=>l(o)))==null?void 0:i.classGroupId},Xd=/^\[(.+)\]$/,rx=t=>{if(Xd.test(t)){const e=Xd.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},nx=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return ax(Object.entries(t.classGroups),r).forEach(([o,i])=>{Sl(i,n,o,e)}),n},Sl=(t,e,r,n)=>{t.forEach(s=>{if(typeof s=="string"){const o=s===""?e:Zd(e,s);o.classGroupId=r;return}if(typeof s=="function"){if(sx(s)){Sl(s(n),e,r,n);return}e.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([o,i])=>{Sl(i,Zd(e,o),r,n)})})},Zd=(t,e)=>{let r=t;return e.split(Rc).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},sx=t=>t.isThemeGetter,ax=(t,e)=>e?t.map(([r,n])=>{const s=n.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,l])=>[e+i,l])):o);return[r,s]}):t,ox=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const s=(o,i)=>{r.set(o,i),e++,e>t&&(e=0,n=r,r=new Map)};return{get(o){let i=r.get(o);if(i!==void 0)return i;if((i=n.get(o))!==void 0)return s(o,i),i},set(o,i){r.has(o)?r.set(o,i):s(o,i)}}},lm="!",ix=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,s=e[0],o=e.length,i=l=>{const c=[];let d=0,u=0,h;for(let w=0;w<l.length;w++){let g=l[w];if(d===0){if(g===s&&(n||l.slice(w,w+o)===e)){c.push(l.slice(u,w)),u=w+o;continue}if(g==="/"){h=w;continue}}g==="["?d++:g==="]"&&d--}const p=c.length===0?l:l.substring(u),x=p.startsWith(lm),b=x?p.substring(1):p,y=h&&h>u?h-u:void 0;return{modifiers:c,hasImportantModifier:x,baseClassName:b,maybePostfixModifierPosition:y}};return r?l=>r({className:l,parseClassName:i}):i},lx=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},cx=t=>({cache:ox(t.cacheSize),parseClassName:ix(t),...tx(t)}),dx=/\s+/,ux=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=e,o=[],i=t.trim().split(dx);let l="";for(let c=i.length-1;c>=0;c-=1){const d=i[c],{modifiers:u,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:x}=r(d);let b=!!x,y=n(b?p.substring(0,x):p);if(!y){if(!b){l=d+(l.length>0?" "+l:l);continue}if(y=n(p),!y){l=d+(l.length>0?" "+l:l);continue}b=!1}const w=lx(u).join(":"),g=h?w+lm:w,m=g+y;if(o.includes(m))continue;o.push(m);const f=s(y,b);for(let v=0;v<f.length;++v){const _=f[v];o.push(g+_)}l=d+(l.length>0?" "+l:l)}return l};function hx(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=cm(e))&&(n&&(n+=" "),n+=r);return n}const cm=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=cm(t[n]))&&(r&&(r+=" "),r+=e);return r};function fx(t,...e){let r,n,s,o=i;function i(c){const d=e.reduce((u,h)=>h(u),t());return r=cx(d),n=r.cache.get,s=r.cache.set,o=l,l(c)}function l(c){const d=n(c);if(d)return d;const u=ux(c,r);return s(c,u),u}return function(){return o(hx.apply(null,arguments))}}const re=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},dm=/^\[(?:([a-z-]+):)?(.+)\]$/i,mx=/^\d+\/\d+$/,px=new Set(["px","full","screen"]),gx=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,xx=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,vx=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,yx=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,bx=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Nt=t=>pn(t)||px.has(t)||mx.test(t),Dt=t=>$n(t,"length",Cx),pn=t=>!!t&&!Number.isNaN(Number(t)),gi=t=>$n(t,"number",pn),Jn=t=>!!t&&Number.isInteger(Number(t)),wx=t=>t.endsWith("%")&&pn(t.slice(0,-1)),V=t=>dm.test(t),Lt=t=>gx.test(t),jx=new Set(["length","size","percentage"]),_x=t=>$n(t,jx,um),Nx=t=>$n(t,"position",um),Sx=new Set(["image","url"]),kx=t=>$n(t,Sx,Ox),Ex=t=>$n(t,"",Px),Yn=()=>!0,$n=(t,e,r)=>{const n=dm.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},Cx=t=>xx.test(t)&&!vx.test(t),um=()=>!1,Px=t=>yx.test(t),Ox=t=>bx.test(t),Tx=()=>{const t=re("colors"),e=re("spacing"),r=re("blur"),n=re("brightness"),s=re("borderColor"),o=re("borderRadius"),i=re("borderSpacing"),l=re("borderWidth"),c=re("contrast"),d=re("grayscale"),u=re("hueRotate"),h=re("invert"),p=re("gap"),x=re("gradientColorStops"),b=re("gradientColorStopPositions"),y=re("inset"),w=re("margin"),g=re("opacity"),m=re("padding"),f=re("saturate"),v=re("scale"),_=re("sepia"),E=re("skew"),N=re("space"),j=re("translate"),C=()=>["auto","contain","none"],M=()=>["auto","hidden","clip","visible","scroll"],$=()=>["auto",V,e],U=()=>[V,e],F=()=>["",Nt,Dt],S=()=>["auto",pn,V],q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],B=()=>["solid","dashed","dotted","double","none"],R=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],T=()=>["start","end","center","between","around","evenly","stretch"],z=()=>["","0",V],W=()=>["auto","avoid","all","avoid-page","page","left","right","column"],K=()=>[pn,V];return{cacheSize:500,separator:":",theme:{colors:[Yn],spacing:[Nt,Dt],blur:["none","",Lt,V],brightness:K(),borderColor:[t],borderRadius:["none","","full",Lt,V],borderSpacing:U(),borderWidth:F(),contrast:K(),grayscale:z(),hueRotate:K(),invert:z(),gap:U(),gradientColorStops:[t],gradientColorStopPositions:[wx,Dt],inset:$(),margin:$(),opacity:K(),padding:U(),saturate:K(),scale:K(),sepia:z(),skew:K(),space:U(),translate:U()},classGroups:{aspect:[{aspect:["auto","square","video",V]}],container:["container"],columns:[{columns:[Lt]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...q(),V]}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Jn,V]}],basis:[{basis:$()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",V]}],grow:[{grow:z()}],shrink:[{shrink:z()}],order:[{order:["first","last","none",Jn,V]}],"grid-cols":[{"grid-cols":[Yn]}],"col-start-end":[{col:["auto",{span:["full",Jn,V]},V]}],"col-start":[{"col-start":S()}],"col-end":[{"col-end":S()}],"grid-rows":[{"grid-rows":[Yn]}],"row-start-end":[{row:["auto",{span:[Jn,V]},V]}],"row-start":[{"row-start":S()}],"row-end":[{"row-end":S()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",V]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",V]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...T()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...T(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...T(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[m]}],px:[{px:[m]}],py:[{py:[m]}],ps:[{ps:[m]}],pe:[{pe:[m]}],pt:[{pt:[m]}],pr:[{pr:[m]}],pb:[{pb:[m]}],pl:[{pl:[m]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",V,e]}],"min-w":[{"min-w":[V,e,"min","max","fit"]}],"max-w":[{"max-w":[V,e,"none","full","min","max","fit","prose",{screen:[Lt]},Lt]}],h:[{h:[V,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[V,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[V,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[V,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Lt,Dt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",gi]}],"font-family":[{font:[Yn]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",V]}],"line-clamp":[{"line-clamp":["none",pn,gi]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Nt,V]}],"list-image":[{"list-image":["none",V]}],"list-style-type":[{list:["none","disc","decimal",V]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...B(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Nt,Dt]}],"underline-offset":[{"underline-offset":["auto",Nt,V]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:U()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",V]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",V]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...q(),Nx]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",_x]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},kx]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...B(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:B()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...B()]}],"outline-offset":[{"outline-offset":[Nt,V]}],"outline-w":[{outline:[Nt,Dt]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:F()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[Nt,Dt]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Lt,Ex]}],"shadow-color":[{shadow:[Yn]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...R(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":R()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Lt,V]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[f]}],sepia:[{sepia:[_]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[f]}],"backdrop-sepia":[{"backdrop-sepia":[_]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",V]}],duration:[{duration:K()}],ease:[{ease:["linear","in","out","in-out",V]}],delay:[{delay:K()}],animate:[{animate:["none","spin","ping","pulse","bounce",V]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[v]}],"scale-x":[{"scale-x":[v]}],"scale-y":[{"scale-y":[v]}],rotate:[{rotate:[Jn,V]}],"translate-x":[{"translate-x":[j]}],"translate-y":[{"translate-y":[j]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",V]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",V]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":U()}],"scroll-mx":[{"scroll-mx":U()}],"scroll-my":[{"scroll-my":U()}],"scroll-ms":[{"scroll-ms":U()}],"scroll-me":[{"scroll-me":U()}],"scroll-mt":[{"scroll-mt":U()}],"scroll-mr":[{"scroll-mr":U()}],"scroll-mb":[{"scroll-mb":U()}],"scroll-ml":[{"scroll-ml":U()}],"scroll-p":[{"scroll-p":U()}],"scroll-px":[{"scroll-px":U()}],"scroll-py":[{"scroll-py":U()}],"scroll-ps":[{"scroll-ps":U()}],"scroll-pe":[{"scroll-pe":U()}],"scroll-pt":[{"scroll-pt":U()}],"scroll-pr":[{"scroll-pr":U()}],"scroll-pb":[{"scroll-pb":U()}],"scroll-pl":[{"scroll-pl":U()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",V]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Nt,Dt,gi]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Mx=fx(Tx);function I(...t){return Mx(ex(t))}function os(t){return new Intl.NumberFormat("pt-BR").format(t)}function Re(t){const e=t/500;if(e>=1e6){const r=e/1e6;return r%1===0?`${r}M`:`${r.toFixed(1)}M`}if(e>=1e3){const r=e/1e3;return r%1===0?`${r}mil`:`${r.toFixed(1)}mil`}return e%1===0?e.toString():e.toFixed(1)}function Ax(t){if(t>=1e3){const e=t/1e3;return e%1===0?e.toString():e.toFixed(1)}return t.toString()}function Ix(t){const e=t/500;return e%1===0?e.toString():e.toFixed(1)}function Rx(t){const e=parseFloat(t);return isNaN(e)?0:e>0&&e<1e3?e*1e3:e}function $x(t){const e=parseFloat(t);return isNaN(e)?0:e*500}function Dx(t){return new Intl.DateTimeFormat("pt-BR",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"2-digit",year:"numeric"}).format(t).replace(","," -")}function Lx(t){const r=Math.floor((new Date().getTime()-t.getTime())/(1e3*60));if(r<1)return"agora";if(r<60)return`há ${r} min`;const n=Math.floor(r/60);if(n<24)return`há ${n}h`;const s=Math.floor(n/24);return`há ${s} dia${s>1?"s":""}`}const eu={variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},mo=dt.forwardRef(({className:t,variant:e="default",size:r="default",...n},s)=>a.jsx("button",{className:I("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",eu.variant[e],eu.size[r],t),ref:s,...n}));mo.displayName="Button";const Cn=dt.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:I("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Cn.displayName="Card";const Ls=dt.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:I("flex flex-col space-y-1.5 p-6",t),...e}));Ls.displayName="CardHeader";const qs=dt.forwardRef(({className:t,...e},r)=>a.jsx("h3",{ref:r,className:I("text-2xl font-semibold leading-none tracking-tight",t),...e}));qs.displayName="CardTitle";const qx=dt.forwardRef(({className:t,...e},r)=>a.jsx("p",{ref:r,className:I("text-sm text-muted-foreground",t),...e}));qx.displayName="CardDescription";const zs=dt.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:I("p-6 pt-0",t),...e}));zs.displayName="CardContent";const zx=dt.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:I("flex items-center p-6 pt-0",t),...e}));zx.displayName="CardFooter";const Ux={},tu=t=>{let e;const r=new Set,n=(u,h)=>{const p=typeof u=="function"?u(e):u;if(!Object.is(p,e)){const x=e;e=h??(typeof p!="object"||p===null)?p:Object.assign({},e,p),r.forEach(b=>b(e,x))}},s=()=>e,c={setState:n,getState:s,getInitialState:()=>d,subscribe:u=>(r.add(u),()=>r.delete(u)),destroy:()=>{(Ux?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},d=e=t(n,s,c);return c},Bx=t=>t?tu(t):tu;var hm={exports:{}},fm={},mm={exports:{}},pm={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pn=k;function Fx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wx=typeof Object.is=="function"?Object.is:Fx,Hx=Pn.useState,Vx=Pn.useEffect,Gx=Pn.useLayoutEffect,Qx=Pn.useDebugValue;function Kx(t,e){var r=e(),n=Hx({inst:{value:r,getSnapshot:e}}),s=n[0].inst,o=n[1];return Gx(function(){s.value=r,s.getSnapshot=e,xi(s)&&o({inst:s})},[t,r,e]),Vx(function(){return xi(s)&&o({inst:s}),t(function(){xi(s)&&o({inst:s})})},[t]),Qx(r),r}function xi(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Wx(t,r)}catch{return!0}}function Jx(t,e){return e()}var Yx=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Jx:Kx;pm.useSyncExternalStore=Pn.useSyncExternalStore!==void 0?Pn.useSyncExternalStore:Yx;mm.exports=pm;var Xx=mm.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Do=k,Zx=Xx;function ev(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var tv=typeof Object.is=="function"?Object.is:ev,rv=Zx.useSyncExternalStore,nv=Do.useRef,sv=Do.useEffect,av=Do.useMemo,ov=Do.useDebugValue;fm.useSyncExternalStoreWithSelector=function(t,e,r,n,s){var o=nv(null);if(o.current===null){var i={hasValue:!1,value:null};o.current=i}else i=o.current;o=av(function(){function c(x){if(!d){if(d=!0,u=x,x=n(x),s!==void 0&&i.hasValue){var b=i.value;if(s(b,x))return h=b}return h=x}if(b=h,tv(u,x))return b;var y=n(x);return s!==void 0&&s(b,y)?(u=x,b):(u=x,h=y)}var d=!1,u,h,p=r===void 0?null:r;return[function(){return c(e())},p===null?void 0:function(){return c(p())}]},[e,r,n,s]);var l=rv(t,o[0],o[1]);return sv(function(){i.hasValue=!0,i.value=l},[l]),ov(l),l};hm.exports=fm;var iv=hm.exports;const lv=Ru(iv),gm={},{useDebugValue:cv}=dt,{useSyncExternalStoreWithSelector:dv}=lv;let ru=!1;const uv=t=>t;function hv(t,e=uv,r){(gm?"production":void 0)!=="production"&&r&&!ru&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),ru=!0);const n=dv(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,r);return cv(n),n}const nu=t=>{(gm?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?Bx(t):t,r=(n,s)=>hv(e,n,s);return Object.assign(r,e),r},Qs=t=>t?nu(t):nu,La={BASE_URL:"/projeto-soropel/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_ENVIRONMENT:"production",VITE_APP_NAME:"Sistema Soropel",VITE_APP_VERSION:"1.0.0",VITE_DEBUG_MODE:"false",VITE_ENABLE_ANALYTICS:"false",VITE_ENABLE_NOTIFICATIONS:"true",VITE_ENABLE_OCR:"true",VITE_ENABLE_SUPABASE:"true",VITE_LOG_LEVEL:"error",VITE_OPENAI_API_KEY:"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",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNoaHRsbHNwcmxxdmplaXZzcHhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4NTQ0OTcsImV4cCI6MjA3NDQzMDQ5N30.qvoJ7Y53yihGkzzMxHcY8hBqiLb68kZxvR1mBpwWnAY",VITE_SUPABASE_URL:"https://chhtllsprlqvjeivspxq.supabase.co"},kl=new Map,xa=t=>{const e=kl.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([r,n])=>[r,n.getState()])):{}},fv=(t,e,r)=>{if(t===void 0)return{type:"untracked",connection:e.connect(r)};const n=kl.get(r.name);if(n)return{type:"tracked",store:t,...n};const s={connection:e.connect(r),stores:{}};return kl.set(r.name,s),{type:"tracked",store:t,...s}},mv=(t,e={})=>(r,n,s)=>{const{enabled:o,anonymousActionType:i,store:l,...c}=e;let d;try{d=(o??(La?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!d)return(La?"production":void 0)!=="production"&&o&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),t(r,n,s);const{connection:u,...h}=fv(l,d,c);let p=!0;s.setState=(y,w,g)=>{const m=r(y,w);if(!p)return m;const f=g===void 0?{type:i||"anonymous"}:typeof g=="string"?{type:g}:g;return l===void 0?(u==null||u.send(f,n()),m):(u==null||u.send({...f,type:`${l}/${f.type}`},{...xa(c.name),[l]:s.getState()}),m)};const x=(...y)=>{const w=p;p=!1,r(...y),p=w},b=t(s.setState,n,s);if(h.type==="untracked"?u==null||u.init(b):(h.stores[h.store]=s,u==null||u.init(Object.fromEntries(Object.entries(h.stores).map(([y,w])=>[y,y===h.store?b:w.getState()])))),s.dispatchFromDevtools&&typeof s.dispatch=="function"){let y=!1;const w=s.dispatch;s.dispatch=(...g)=>{(La?"production":void 0)!=="production"&&g[0].type==="__setState"&&!y&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),y=!0),w(...g)}}return u.subscribe(y=>{var w;switch(y.type){case"ACTION":if(typeof y.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return vi(y.payload,g=>{if(g.type==="__setState"){if(l===void 0){x(g.state);return}Object.keys(g.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const m=g.state[l];if(m==null)return;JSON.stringify(s.getState())!==JSON.stringify(m)&&x(m);return}s.dispatchFromDevtools&&typeof s.dispatch=="function"&&s.dispatch(g)});case"DISPATCH":switch(y.payload.type){case"RESET":return x(b),l===void 0?u==null?void 0:u.init(s.getState()):u==null?void 0:u.init(xa(c.name));case"COMMIT":if(l===void 0){u==null||u.init(s.getState());return}return u==null?void 0:u.init(xa(c.name));case"ROLLBACK":return vi(y.state,g=>{if(l===void 0){x(g),u==null||u.init(s.getState());return}x(g[l]),u==null||u.init(xa(c.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return vi(y.state,g=>{if(l===void 0){x(g);return}JSON.stringify(s.getState())!==JSON.stringify(g[l])&&x(g[l])});case"IMPORT_STATE":{const{nextLiftedState:g}=y.payload,m=(w=g.computedStates.slice(-1)[0])==null?void 0:w.state;if(!m)return;x(l===void 0?m:m[l]),u==null||u.send(null,g);return}case"PAUSE_RECORDING":return p=!p}return}}),b},Lo=mv,vi=(t,e)=>{let r;try{r=JSON.parse(t)}catch(n){console.error("[zustand devtools middleware] Could not parse the received json",n)}r!==void 0&&e(r)};function pv(t,e){let r;try{r=t()}catch{return}return{getItem:s=>{var o;const i=c=>c===null?null:JSON.parse(c,void 0),l=(o=r.getItem(s))!=null?o:null;return l instanceof Promise?l.then(i):i(l)},setItem:(s,o)=>r.setItem(s,JSON.stringify(o,void 0)),removeItem:s=>r.removeItem(s)}}const Us=t=>e=>{try{const r=t(e);return r instanceof Promise?r:{then(n){return Us(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return Us(n)(r)}}}},gv=(t,e)=>(r,n,s)=>{let o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:w=>w,version:0,merge:(w,g)=>({...g,...w}),...e},i=!1;const l=new Set,c=new Set;let d;try{d=o.getStorage()}catch{}if(!d)return t((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),r(...w)},n,s);const u=Us(o.serialize),h=()=>{const w=o.partialize({...n()});let g;const m=u({state:w,version:o.version}).then(f=>d.setItem(o.name,f)).catch(f=>{g=f});if(g)throw g;return m},p=s.setState;s.setState=(w,g)=>{p(w,g),h()};const x=t((...w)=>{r(...w),h()},n,s);let b;const y=()=>{var w;if(!d)return;i=!1,l.forEach(m=>m(n()));const g=((w=o.onRehydrateStorage)==null?void 0:w.call(o,n()))||void 0;return Us(d.getItem.bind(d))(o.name).then(m=>{if(m)return o.deserialize(m)}).then(m=>{if(m)if(typeof m.version=="number"&&m.version!==o.version){if(o.migrate)return o.migrate(m.state,m.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return m.state}).then(m=>{var f;return b=o.merge(m,(f=n())!=null?f:x),r(b,!0),h()}).then(()=>{g==null||g(b,void 0),i=!0,c.forEach(m=>m(b))}).catch(m=>{g==null||g(void 0,m)})};return s.persist={setOptions:w=>{o={...o,...w},w.getStorage&&(d=w.getStorage())},clearStorage:()=>{d==null||d.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>y(),hasHydrated:()=>i,onHydrate:w=>(l.add(w),()=>{l.delete(w)}),onFinishHydration:w=>(c.add(w),()=>{c.delete(w)})},y(),b||x},xv=(t,e)=>(r,n,s)=>{let o={storage:pv(()=>localStorage),partialize:y=>y,version:0,merge:(y,w)=>({...w,...y}),...e},i=!1;const l=new Set,c=new Set;let d=o.storage;if(!d)return t((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),r(...y)},n,s);const u=()=>{const y=o.partialize({...n()});return d.setItem(o.name,{state:y,version:o.version})},h=s.setState;s.setState=(y,w)=>{h(y,w),u()};const p=t((...y)=>{r(...y),u()},n,s);s.getInitialState=()=>p;let x;const b=()=>{var y,w;if(!d)return;i=!1,l.forEach(m=>{var f;return m((f=n())!=null?f:p)});const g=((w=o.onRehydrateStorage)==null?void 0:w.call(o,(y=n())!=null?y:p))||void 0;return Us(d.getItem.bind(d))(o.name).then(m=>{if(m)if(typeof m.version=="number"&&m.version!==o.version){if(o.migrate)return[!0,o.migrate(m.state,m.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,m.state];return[!1,void 0]}).then(m=>{var f;const[v,_]=m;if(x=o.merge(_,(f=n())!=null?f:p),r(x,!0),v)return u()}).then(()=>{g==null||g(x,void 0),x=n(),i=!0,c.forEach(m=>m(x))}).catch(m=>{g==null||g(void 0,m)})};return s.persist={setOptions:y=>{o={...o,...y},y.storage&&(d=y.storage)},clearStorage:()=>{d==null||d.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>b(),hasHydrated:()=>i,onHydrate:y=>(l.add(y),()=>{l.delete(y)}),onFinishHydration:y=>(c.add(y),()=>{c.delete(y)})},o.skipHydration||b(),x||p},vv=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((La?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),gv(t,e)):xv(t,e),yv=vv,bv="modulepreload",wv=function(t){return"/projeto-soropel/"+t},su={},Ks=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=wv(c),c in su)return;su[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":bv,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((p,x)=>{h.addEventListener("load",p),h.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return s.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return e().catch(o)})},jv=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Ks(async()=>{const{default:n}=await Promise.resolve().then(()=>Dn);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class $c extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class au extends $c{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ou extends $c{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class iu extends $c{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var El;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(El||(El={}));var _v=function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(n.next(u))}catch(h){i(h)}}function c(u){try{d(n.throw(u))}catch(h){i(h)}}function d(u){u.done?o(u.value):s(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class Nv{constructor(e,{headers:r={},customFetch:n,region:s=El.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=jv(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return _v(this,void 0,void 0,function*(){try{const{headers:s,method:o,body:i,signal:l}=r;let c={},{region:d}=r;d||(d=this.region);const u=new URL(`${this.url}/${e}`);d&&d!=="any"&&(c["x-region"]=d,u.searchParams.set("forceFunctionRegion",d));let h;i&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=i):typeof i=="string"?(c["Content-Type"]="text/plain",h=i):typeof FormData<"u"&&i instanceof FormData?h=i:(c["Content-Type"]="application/json",h=JSON.stringify(i)));const p=yield this.fetch(u.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),s),body:h,signal:l}).catch(w=>{throw w.name==="AbortError"?w:new au(w)}),x=p.headers.get("x-relay-error");if(x&&x==="true")throw new ou(p);if(!p.ok)throw new iu(p);let b=((n=p.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),y;return b==="application/json"?y=yield p.json():b==="application/octet-stream"?y=yield p.blob():b==="text/event-stream"?y=p:b==="multipart/form-data"?y=yield p.formData():y=yield p.text(),{data:y,error:null,response:p}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new au(s)}:{data:null,error:s,response:s instanceof iu||s instanceof ou?s.context:void 0}}})}}var Ae={},Dc={},qo={},Js={},zo={},Uo={},Sv=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},On=Sv();const kv=On.fetch,xm=On.fetch.bind(On),vm=On.Headers,Ev=On.Request,Cv=On.Response,Dn=Object.freeze(Object.defineProperty({__proto__:null,Headers:vm,Request:Ev,Response:Cv,default:xm,fetch:kv},Symbol.toStringTag,{value:"Module"})),Pv=Zm(Dn);var Bo={};Object.defineProperty(Bo,"__esModule",{value:!0});let Ov=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Bo.default=Ov;var ym=Xe&&Xe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Uo,"__esModule",{value:!0});const Tv=ym(Pv),Mv=ym(Bo);let Av=class{constructor(e){var r,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(r=e.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Tv.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=new Headers(this.headers),this.headers.set(e,r),this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var i,l,c,d;let u=null,h=null,p=null,x=o.status,b=o.statusText;if(o.ok){if(this.method!=="HEAD"){const m=await o.text();m===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((i=this.headers.get("Accept"))===null||i===void 0)&&i.includes("application/vnd.pgrst.plan+text"))?h=m:h=JSON.parse(m))}const w=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),g=(c=o.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");w&&g&&g.length>1&&(p=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(u={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,p=null,x=406,b="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const w=await o.text();try{u=JSON.parse(w),Array.isArray(u)&&o.status===404&&(h=[],u=null,x=200,b="OK")}catch{o.status===404&&w===""?(x=204,b="No Content"):u={message:w}}if(u&&this.isMaybeSingle&&(!((d=u==null?void 0:u.details)===null||d===void 0)&&d.includes("0 rows"))&&(u=null,x=200,b="OK"),u&&this.shouldThrowOnError)throw new Mv.default(u)}return{error:u,data:h,count:p,status:x,statusText:b}});return this.shouldThrowOnError||(s=s.catch(o=>{var i,l,c;return{error:{message:`${(i=o==null?void 0:o.name)!==null&&i!==void 0?i:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(l=o==null?void 0:o.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=o==null?void 0:o.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,r)}returns(){return this}overrideTypes(){return this}};Uo.default=Av;var Iv=Xe&&Xe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(zo,"__esModule",{value:!0});const Rv=Iv(Uo);let $v=class extends Rv.default{select(e){let r=!1;const n=(e??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:o=s}={}){const i=o?`${o}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:s=n}={}){const o=typeof s>"u"?"offset":`${s}.offset`,i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(i,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:o=!1,format:i="text"}={}){var l;const c=[e?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,o?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${d}"; options=${c};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};zo.default=$v;var Dv=Xe&&Xe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Js,"__esModule",{value:!0});const Lv=Dv(zo);let qv=class extends Lv.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:s}={}){let o="";s==="plain"?o="pl":s==="phrase"?o="ph":s==="websearch"&&(o="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${o}fts${i}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}};Js.default=qv;var zv=Xe&&Xe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qo,"__esModule",{value:!0});const Xn=zv(Js);let Uv=class{constructor(e,{headers:r={},schema:n,fetch:s}){this.url=e,this.headers=new Headers(r),this.schema=n,this.fetch=s}select(e,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let o=!1;const i=(e??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",i),n&&this.headers.append("Prefer",`count=${n}`),new Xn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:r,defaultToNull:n=!0}={}){var s;const o="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const i=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(i.length>0){const l=[...new Set(i)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Xn.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:o=!0}={}){var i;const l="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),s&&this.headers.append("Prefer",`count=${s}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Xn.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:r}={}){var n;const s="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new Xn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var r;const n="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Xn.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};qo.default=Uv;var bm=Xe&&Xe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Dc,"__esModule",{value:!0});const Bv=bm(qo),Fv=bm(Js);let Wv=class wm{constructor(e,{headers:r={},schema:n,fetch:s}={}){this.url=e,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(e){const r=new URL(`${this.url}/${e}`);return new Bv.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new wm(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:s=!1,count:o}={}){var i;let l;const c=new URL(`${this.url}/rpc/${e}`);let d;n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([h,p])=>p!==void 0).map(([h,p])=>[h,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([h,p])=>{c.searchParams.append(h,p)})):(l="POST",d=r);const u=new Headers(this.headers);return o&&u.set("Prefer",`count=${o}`),new Fv.default({method:l,url:c,headers:u,schema:this.schemaName,body:d,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};Dc.default=Wv;var Ln=Xe&&Xe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.PostgrestError=Ae.PostgrestBuilder=Ae.PostgrestTransformBuilder=Ae.PostgrestFilterBuilder=Ae.PostgrestQueryBuilder=Ae.PostgrestClient=void 0;const jm=Ln(Dc);Ae.PostgrestClient=jm.default;const _m=Ln(qo);Ae.PostgrestQueryBuilder=_m.default;const Nm=Ln(Js);Ae.PostgrestFilterBuilder=Nm.default;const Sm=Ln(zo);Ae.PostgrestTransformBuilder=Sm.default;const km=Ln(Uo);Ae.PostgrestBuilder=km.default;const Em=Ln(Bo);Ae.PostgrestError=Em.default;var Hv=Ae.default={PostgrestClient:jm.default,PostgrestQueryBuilder:_m.default,PostgrestFilterBuilder:Nm.default,PostgrestTransformBuilder:Sm.default,PostgrestBuilder:km.default,PostgrestError:Em.default};const{PostgrestClient:Vv,PostgrestQueryBuilder:E2,PostgrestFilterBuilder:C2,PostgrestTransformBuilder:P2,PostgrestBuilder:O2,PostgrestError:T2}=Hv;class Gv{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Qv="2.15.5",Kv=`realtime-js/${Qv}`,Jv="1.0.0",Cl=1e4,Yv=1e3,Xv=100;var xs;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(xs||(xs={}));var pe;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(pe||(pe={}));var ot;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ot||(ot={}));var Pl;(function(t){t.websocket="websocket"})(Pl||(Pl={}));var _r;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(_r||(_r={}));class Zv{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const s=r.getUint8(1),o=r.getUint8(2);let i=this.HEADER_LENGTH+2;const l=n.decode(e.slice(i,i+s));i=i+s;const c=n.decode(e.slice(i,i+o));i=i+o;const d=JSON.parse(n.decode(e.slice(i,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class Cm{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Z;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Z||(Z={}));const lu=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((o,i)=>(o[i]=ey(i,t,e,s),o),{})},ey=(t,e,r,n)=>{const s=e.find(l=>l.name===t),o=s==null?void 0:s.type,i=r[t];return o&&!n.includes(o)?Pm(o,i):Ol(i)},Pm=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return sy(e,r)}switch(t){case Z.bool:return ty(e);case Z.float4:case Z.float8:case Z.int2:case Z.int4:case Z.int8:case Z.numeric:case Z.oid:return ry(e);case Z.json:case Z.jsonb:return ny(e);case Z.timestamp:return ay(e);case Z.abstime:case Z.date:case Z.daterange:case Z.int4range:case Z.int8range:case Z.money:case Z.reltime:case Z.text:case Z.time:case Z.timestamptz:case Z.timetz:case Z.tsrange:case Z.tstzrange:return Ol(e);default:return Ol(e)}},Ol=t=>t,ty=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},ry=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},ny=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},sy=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let o;const i=t.slice(1,r);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(l=>Pm(e,l))}return t},ay=t=>typeof t=="string"?t.replace(" ","T"):t,Om=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class yi{constructor(e,r,n={},s=Cl){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var cu;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(cu||(cu={}));class vs{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=vs.syncState(this.state,s,o,i),this.pendingDiffs.forEach(c=>{this.state=vs.syncDiff(this.state,c,o,i)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=vs.syncDiff(this.state,s,o,i),l())}),this.onJoin((s,o,i)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:i})}),this.onLeave((s,o,i)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const o=this.cloneDeep(e),i=this.transformState(r),l={},c={};return this.map(o,(d,u)=>{i[d]||(c[d]=u)}),this.map(i,(d,u)=>{const h=o[d];if(h){const p=u.map(w=>w.presence_ref),x=h.map(w=>w.presence_ref),b=u.filter(w=>x.indexOf(w.presence_ref)<0),y=h.filter(w=>p.indexOf(w.presence_ref)<0);b.length>0&&(l[d]=b),y.length>0&&(c[d]=y)}else l[d]=u}),this.syncDiff(o,{joins:l,leaves:c},n,s)}static syncDiff(e,r,n,s){const{joins:o,leaves:i}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(o,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const h=e[l].map(x=>x.presence_ref),p=u.filter(x=>h.indexOf(x.presence_ref)<0);e[l].unshift(...p)}n(l,u,c)}),this.map(i,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),e[l]=d,s(l,d,c),d.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var du;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(du||(du={}));var ys;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(ys||(ys={}));var kt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(kt||(kt={}));class Lc{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=pe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new yi(this,ot.join,this.params,this.timeout),this.rejoinTimer=new Cm(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=pe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=pe.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=pe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=pe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=pe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ot.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new vs(this),this.broadcastEndpointURL=Om(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,s,o;if(this.socket.isConnected()||this.socket.connect(),this.state==pe.closed){const{config:{broadcast:i,presence:l,private:c}}=this.params,d=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(x=>x.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[ys.PRESENCE]&&this.bindings[ys.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,h={},p={broadcast:i,presence:Object.assign(Object.assign({},l),{enabled:u}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(x=>e==null?void 0:e(kt.CHANNEL_ERROR,x)),this._onClose(()=>e==null?void 0:e(kt.CLOSED)),this.updateJoinPayload(Object.assign({config:p},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:x})=>{var b;if(this.socket.setAuth(),x===void 0){e==null||e(kt.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,w=(b=y==null?void 0:y.length)!==null&&b!==void 0?b:0,g=[];for(let m=0;m<w;m++){const f=y[m],{filter:{event:v,schema:_,table:E,filter:N}}=f,j=x&&x[m];if(j&&j.event===v&&j.schema===_&&j.table===E&&j.filter===N)g.push(Object.assign(Object.assign({},f),{id:j.id}));else{this.unsubscribe(),this.state=pe.errored,e==null||e(kt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(kt.SUBSCRIBED);return}}).receive("error",x=>{this.state=pe.errored,e==null||e(kt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(kt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===pe.joined&&e===ys.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:i}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=d.body)===null||s===void 0?void 0:s.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,l,c;const d=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=pe.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ot.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new yi(this,ot.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=pe.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,o=setTimeout(()=>s.abort(),n),i=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(o),i}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new yi(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Xv){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,o;const i=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=ot;if(n&&[l,c,d,u].indexOf(i)>=0&&n!==this._joinRef())return;let p=this._onMessage(i,r,n);if(r&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(x=>{var b,y,w;return((b=x.filter)===null||b===void 0?void 0:b.event)==="*"||((w=(y=x.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===i}).map(x=>x.callback(p,n)):(o=this.bindings[i])===null||o===void 0||o.filter(x=>{var b,y,w,g,m,f;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in x){const v=x.id,_=(b=x.filter)===null||b===void 0?void 0:b.event;return v&&((y=r.ids)===null||y===void 0?void 0:y.includes(v))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const v=(m=(g=x==null?void 0:x.filter)===null||g===void 0?void 0:g.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return v==="*"||v===((f=r==null?void 0:r.event)===null||f===void 0?void 0:f.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===i}).map(x=>{if(typeof p=="object"&&"ids"in p){const b=p.data,{schema:y,table:w,commit_timestamp:g,type:m,errors:f}=b;p=Object.assign(Object.assign({},{schema:y,table:w,commit_timestamp:g,eventType:m,new:{},old:{},errors:f}),this._getPayloadRecords(b))}x.callback(p,n)})}_isClosed(){return this.state===pe.closed}_isJoined(){return this.state===pe.joined}_isJoining(){return this.state===pe.joining}_isLeaving(){return this.state===pe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),o={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&Lc.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ot.close,{},e)}_onError(e){this._on(ot.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=pe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=lu(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=lu(e.columns,e.old_record)),r}}const bi=()=>{},va={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},oy=[1e3,2e3,5e3,1e4],iy=1e4,ly=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class cy{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Cl,this.transport=null,this.heartbeatIntervalMs=va.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=bi,this.ref=0,this.reconnectTimer=null,this.logger=bi,this.conn=null,this.sendBuffer=[],this.serializer=new Zv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...i)=>Ks(async()=>{const{default:l}=await Promise.resolve().then(()=>Dn);return{default:l}},void 0).then(({default:l})=>l(...i)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...i)=>o(...i)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Pl.websocket}`,this.httpEndpoint=Om(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Gv.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Jv}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case xs.connecting:return _r.Connecting;case xs.open:return _r.Open;case xs.closing:return _r.Closing;default:return _r.Closed}}isConnected(){return this.connectionState()===_r.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(o=>o.topic===n);if(s)return s;{const o=new Lc(`realtime:${e}`,r,this);return this.channels.push(o),o}}push(e){const{topic:r,event:n,payload:s,ref:o}=e,i=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${o})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Yv,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},va.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:o,ref:i}=r,l=i?`(${i})`:"",c=o.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),o),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(s,o,i)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ot.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([ly],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:Kv};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(ot.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Cm(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},va.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,o,i,l,c,d,u;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Cl,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:va.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(i=e==null?void 0:e.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:bi,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:h=>oy[h-1]||iy,this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(h,p)=>p(JSON.stringify(h)),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class qc extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function fe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class dy extends qc{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Tl extends qc{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var uy=function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(n.next(u))}catch(h){i(h)}}function c(u){try{d(n.throw(u))}catch(h){i(h)}}function d(u){u.done?o(u.value):s(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const Tm=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Ks(async()=>{const{default:n}=await Promise.resolve().then(()=>Dn);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},hy=()=>uy(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ks(()=>Promise.resolve().then(()=>Dn),void 0)).Response:Response}),Ml=t=>{if(Array.isArray(t))return t.map(r=>Ml(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[s]=Ml(n)}),e},fy=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var qr=function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(n.next(u))}catch(h){i(h)}}function c(u){try{d(n.throw(u))}catch(h){i(h)}}function d(u){u.done?o(u.value):s(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const wi=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),my=(t,e,r)=>qr(void 0,void 0,void 0,function*(){const n=yield hy();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(s=>{const o=t.status||500,i=(s==null?void 0:s.statusCode)||o+"";e(new dy(wi(s),o,i))}).catch(s=>{e(new Tl(wi(s),s))}):e(new Tl(wi(t),t))}),py=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?s:(fy(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),r))};function Ys(t,e,r,n,s,o){return qr(this,void 0,void 0,function*(){return new Promise((i,l)=>{t(r,py(e,n,s,o)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>my(c,l,n))})})}function po(t,e,r,n){return qr(this,void 0,void 0,function*(){return Ys(t,"GET",e,r,n)})}function pt(t,e,r,n,s){return qr(this,void 0,void 0,function*(){return Ys(t,"POST",e,n,s,r)})}function Al(t,e,r,n,s){return qr(this,void 0,void 0,function*(){return Ys(t,"PUT",e,n,s,r)})}function gy(t,e,r,n){return qr(this,void 0,void 0,function*(){return Ys(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Mm(t,e,r,n,s){return qr(this,void 0,void 0,function*(){return Ys(t,"DELETE",e,n,s,r)})}var xy=function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(n.next(u))}catch(h){i(h)}}function c(u){try{d(n.throw(u))}catch(h){i(h)}}function d(u){u.done?o(u.value):s(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class vy{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return xy(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(fe(e))return{data:null,error:e};throw e}})}}var yy=function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(n.next(u))}catch(h){i(h)}}function c(u){try{d(n.throw(u))}catch(h){i(h)}}function d(u){u.done?o(u.value):s(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class by{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}asStream(){return new vy(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.execute().then(e,r)}execute(){return yy(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(fe(e))return{data:null,error:e};throw e}})}}var Te=function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(n.next(u))}catch(h){i(h)}}function c(u){try{d(n.throw(u))}catch(h){i(h)}}function d(u){u.done?o(u.value):s(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const wy={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},uu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class jy{constructor(e,r={},n,s){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=Tm(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,s){return Te(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},uu),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=n,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const d=this._removeEmptyFolders(r),u=this._getFinalPath(d),h=yield(e=="PUT"?Al:pt)(this.fetch,`${this.url}/object/${u}`,o,Object.assign({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:d,id:h.Id,fullPath:h.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(fe(o))return{data:null,error:o};throw o}})}upload(e,r,n){return Te(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return Te(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),i=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:uu.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield Al(this.fetch,l.toString(),c,{headers:u});return{data:{path:o,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(fe(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return Te(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const o=yield pt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),i=new URL(this.url+o.url),l=i.searchParams.get("token");if(!l)throw new qc("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fe(n))return{data:null,error:n};throw n}})}update(e,r,n){return Te(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return Te(this,void 0,void 0,function*(){try{return{data:yield pt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(fe(s))return{data:null,error:s};throw s}})}copy(e,r,n){return Te(this,void 0,void 0,function*(){try{return{data:{path:(yield pt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(fe(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return Te(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),o=yield pt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(fe(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return Te(this,void 0,void 0,function*(){try{const s=yield pt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(fe(s))return{data:null,error:s};throw s}})}download(e,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),i=o?`?${o}`:"",l=this._getFinalPath(e),c=()=>po(this.fetch,`${this.url}/${s}/${l}${i}`,{headers:this.headers,noResolveJson:!0});return new by(c,this.shouldThrowOnError)}info(e){return Te(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield po(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Ml(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fe(n))return{data:null,error:n};throw n}})}exists(e){return Te(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield gy(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fe(n)&&n instanceof Tl){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],o=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";o!==""&&s.push(o);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let d=s.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(e){return Te(this,void 0,void 0,function*(){try{return{data:yield Mm(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(fe(r))return{data:null,error:r};throw r}})}list(e,r,n){return Te(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},wy),r),{prefix:e||""});return{data:yield pt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(fe(s))return{data:null,error:s};throw s}})}listV2(e,r){return Te(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield pt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fe(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const _y="2.12.2",Ny={"X-Client-Info":`storage-js/${_y}`};var Br=function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(n.next(u))}catch(h){i(h)}}function c(u){try{d(n.throw(u))}catch(h){i(h)}}function d(u){u.done?o(u.value):s(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class Sy{constructor(e,r={},n,s){this.shouldThrowOnError=!1;const o=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href,this.headers=Object.assign(Object.assign({},Ny),r),this.fetch=Tm(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Br(this,void 0,void 0,function*(){try{return{data:yield po(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(fe(e))return{data:null,error:e};throw e}})}getBucket(e){return Br(this,void 0,void 0,function*(){try{return{data:yield po(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(fe(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return Br(this,void 0,void 0,function*(){try{return{data:yield pt(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fe(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return Br(this,void 0,void 0,function*(){try{return{data:yield Al(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fe(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Br(this,void 0,void 0,function*(){try{return{data:yield pt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(fe(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Br(this,void 0,void 0,function*(){try{return{data:yield Mm(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(fe(r))return{data:null,error:r};throw r}})}}class ky extends Sy{constructor(e,r={},n,s){super(e,r,n,s)}from(e){return new jy(this.url,this.headers,e,this.fetch)}}const Ey="2.58.0";let is="";typeof Deno<"u"?is="deno":typeof document<"u"?is="web":typeof navigator<"u"&&navigator.product==="ReactNative"?is="react-native":is="node";const Cy={"X-Client-Info":`supabase-js-${is}/${Ey}`},Py={headers:Cy},Oy={schema:"public"},Ty={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},My={};var Ay=function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(n.next(u))}catch(h){i(h)}}function c(u){try{d(n.throw(u))}catch(h){i(h)}}function d(u){u.done?o(u.value):s(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const Iy=t=>{let e;return t?e=t:typeof fetch>"u"?e=xm:e=fetch,(...r)=>e(...r)},Ry=()=>typeof Headers>"u"?vm:Headers,$y=(t,e,r)=>{const n=Iy(r),s=Ry();return(o,i)=>Ay(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let d=new s(i==null?void 0:i.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(o,Object.assign(Object.assign({},i),{headers:d}))})};var Dy=function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(n.next(u))}catch(h){i(h)}}function c(u){try{d(n.throw(u))}catch(h){i(h)}}function d(u){u.done?o(u.value):s(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};function Ly(t){return t.endsWith("/")?t:t+"/"}function qy(t,e){var r,n;const{db:s,auth:o,realtime:i,global:l}=t,{db:c,auth:d,realtime:u,global:h}=e,p={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},d),o),realtime:Object.assign(Object.assign({},u),i),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Dy(this,void 0,void 0,function*(){return""})};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}function zy(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Ly(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Am="2.72.0",Qr=30*1e3,Il=3,ji=Il*Qr,Uy="http://localhost:9999",By="supabase.auth.token",Fy={"X-Client-Info":`gotrue-js/${Am}`},Rl="X-Supabase-Api-Version",Im={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Wy=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Hy=10*60*1e3;class zc extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function H(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Vy extends zc{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Gy(t){return H(t)&&t.name==="AuthApiError"}class Rm extends zc{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class fr extends zc{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class Ut extends fr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Qy(t){return H(t)&&t.name==="AuthSessionMissingError"}class Zn extends fr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ya extends fr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ba extends fr{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Ky(t){return H(t)&&t.name==="AuthImplicitGrantRedirectError"}class hu extends fr{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class $l extends fr{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function _i(t){return H(t)&&t.name==="AuthRetryableFetchError"}class fu extends fr{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Dl extends fr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const go="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),mu=` 	
\r=`.split(""),Jy=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<mu.length;e+=1)t[mu[e].charCodeAt(0)]=-2;for(let e=0;e<go.length;e+=1)t[go[e].charCodeAt(0)]=e;return t})();function pu(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(go[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(go[n]),e.queuedBits-=6}}function $m(t,e,r){const n=Jy[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function gu(t){const e=[],r=i=>{e.push(String.fromCodePoint(i))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=i=>{Zy(i,n,r)};for(let i=0;i<t.length;i+=1)$m(t.charCodeAt(i),s,o);return e.join("")}function Yy(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Xy(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}Yy(n,e)}}function Zy(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function eb(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)$m(t.charCodeAt(s),r,n);return new Uint8Array(e)}function tb(t){const e=[];return Xy(t,r=>e.push(r)),new Uint8Array(e)}function rb(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>pu(s,r,n)),pu(null,r,n),e.join("")}function nb(t){return Math.round(Date.now()/1e3)+t}function sb(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Ge=()=>typeof window<"u"&&typeof document<"u",gr={tested:!1,writable:!1},Dm=()=>{if(!Ge())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(gr.tested)return gr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),gr.tested=!0,gr.writable=!0}catch{gr.tested=!0,gr.writable=!1}return gr.writable};function ab(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,o)=>{e[o]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const Lm=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Ks(async()=>{const{default:n}=await Promise.resolve().then(()=>Dn);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},ob=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Kr=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},xr=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},qt=async(t,e)=>{await t.removeItem(e)};class Fo{constructor(){this.promise=new Fo.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Fo.promiseConstructor=Promise;function Ni(t){const e=t.split(".");if(e.length!==3)throw new Dl("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Wy.test(e[n]))throw new Dl("JWT not in base64url format");return{header:JSON.parse(gu(e[0])),payload:JSON.parse(gu(e[1])),signature:eb(e[2]),raw:{header:e[0],payload:e[1]}}}async function ib(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function lb(t,e){return new Promise((n,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await t(o);if(!e(o,null,i)){n(i);return}}catch(i){if(!e(o,i)){s(i);return}}})()})}function cb(t){return("0"+t.toString(16)).substr(-2)}function db(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let o=0;o<56;o++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,cb).join("")}async function ub(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function hb(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await ub(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Fr(t,e,r=!1){const n=db();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Kr(t,`${e}-code-verifier`,s);const o=await hb(n);return[o,n===o?"plain":"s256"]}const fb=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function mb(t){const e=t.headers.get(Rl);if(!e||!e.match(fb))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function pb(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function gb(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const xb=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Wr(t){if(!xb.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Si(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function xu(t){return JSON.parse(JSON.stringify(t))}var vb=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};const wr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),yb=[502,503,504];async function vu(t){var e;if(!ob(t))throw new $l(wr(t),0);if(yb.includes(t.status))throw new $l(wr(t),t.status);let r;try{r=await t.json()}catch(o){throw new Rm(wr(o),o)}let n;const s=mb(t);if(s&&s.getTime()>=Im["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new fu(wr(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Ut}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new fu(wr(r),t.status,r.weak_password.reasons);throw new Vy(wr(r),t.status||500,n)}const bb=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function G(t,e,r,n){var s;const o=Object.assign({},n==null?void 0:n.headers);o[Rl]||(o[Rl]=Im["2024-01-01"].name),n!=null&&n.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const i=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(i.redirect_to=n.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await wb(t,e,r+l,{headers:o,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function wb(t,e,r,n,s,o){const i=bb(e,n,s,o);let l;try{l=await t(r,Object.assign({},i))}catch(c){throw console.error(c),new $l(wr(c),0)}if(l.ok||await vu(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await vu(c)}}function ft(t){var e;let r=null;Sb(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=nb(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function yu(t){const e=ft(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Gt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function jb(t){return{data:t,error:null}}function _b(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o}=t,i=vb(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function Nb(t){return t}function Sb(t){return t.access_token&&t.refresh_token&&t.expires_in}const ki=["global","local","others"];var kb=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};class Eb{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=Lm(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=ki[0]){if(ki.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ki.join(", ")}`);try{return await G(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(H(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await G(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Gt})}catch(n){if(H(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=kb(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await G(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:_b,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(H(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await G(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Gt})}catch(r){if(H(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,o,i,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await G(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:Nb});if(u.error)throw u.error;const h=await u.json(),p=(i=u.headers.get("x-total-count"))!==null&&i!==void 0?i:0,x=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return x.length>0&&(x.forEach(b=>{const y=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(b.split(";")[1].split("=")[1]);d[`${w}Page`]=y}),d.total=parseInt(p)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(H(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Wr(e);try{return await G(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Gt})}catch(r){if(H(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Wr(e);try{return await G(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Gt})}catch(n){if(H(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Wr(e);try{return await G(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Gt})}catch(n){if(H(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Wr(e.userId);try{const{data:r,error:n}=await G(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(H(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Wr(e.userId),Wr(e.id);try{return{data:await G(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(H(r))return{data:null,error:r};throw r}}}function bu(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function Cb(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Hr={debug:!!(globalThis&&Dm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class qm extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Pb extends qm{}async function Ob(t,e,r){Hr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Hr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Hr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{Hr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Hr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Pb(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Hr.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function zm(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Tb(t){return parseInt(t,16)}function Mb(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function Ab(t){var e;const{chainId:r,domain:n,expirationTime:s,issuedAt:o=new Date,nonce:i,notBefore:l,requestId:c,resources:d,scheme:u,uri:h,version:p}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${i}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const x=zm(t.address),b=u?`${u}://${n}`:n,y=t.statement?`${t.statement}
`:"",w=`${b} wants you to sign in with your Ethereum account:
${x}

${y}`;let g=`URI: ${h}
Version: ${p}
Chain ID: ${r}${i?`
Nonce: ${i}`:""}
Issued At: ${o.toISOString()}`;if(s&&(g+=`
Expiration Time: ${s.toISOString()}`),l&&(g+=`
Not Before: ${l.toISOString()}`),c&&(g+=`
Request ID: ${c}`),d){let m=`
Resources:`;for(const f of d){if(!f||typeof f!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${f}`);m+=`
- ${f}`}g+=m}return`${w}
${g}`}Cb();const Ib={url:Uy,storageKey:By,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Fy,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function wu(t,e,r){return await r()}const Vr={};class Bs{constructor(e){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Bs.nextInstanceID,Bs.nextInstanceID+=1,this.instanceID>0&&Ge()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Ib),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Eb({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Lm(s.fetch),this.lock=s.lock||wu,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Ge()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Ob:this.lock=wu,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Dm()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=bu(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=bu(this.memoryStorage)),Ge()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var e,r;return(r=(e=Vr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Vr[this.storageKey]=Object.assign(Object.assign({},Vr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Vr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Vr[this.storageKey]=Object.assign(Object.assign({},Vr[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Am}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=ab(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Ge()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:o}=await this._getSessionFromURL(r,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Ky(o)){const c=(e=o.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return H(r)?{error:r}:{error:new Rm("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const o=await G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:ft}),{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(H(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var r,n,s;try{let o;if("email"in e){const{email:u,password:h,options:p}=e;let x=null,b=null;this.flowType==="pkce"&&([x,b]=await Fr(this.storage,this.storageKey)),o=await G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:u,password:h,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:x,code_challenge_method:b},xform:ft})}else if("phone"in e){const{phone:u,password:h,options:p}=e;o=await G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},channel:(s=p==null?void 0:p.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:ft})}else throw new ya("You must provide either an email or phone number and a password");const{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(H(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let r;if("email"in e){const{email:o,password:i,options:l}=e;r=await G(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:yu})}else if("phone"in e){const{phone:o,password:i,options:l}=e;r=await G(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:yu})}else throw new ya("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Zn}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(H(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,s,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,s,o,i,l,c,d,u,h,p;let x,b;if("message"in e)x=e.message,b=e.signature;else{const{chain:y,wallet:w,statement:g,options:m}=e;let f;if(Ge())if(typeof w=="object")f=w;else{const C=window;if("ethereum"in C&&typeof C.ethereum=="object"&&"request"in C.ethereum&&typeof C.ethereum.request=="function")f=C.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");f=w}const v=new URL((r=m==null?void 0:m.url)!==null&&r!==void 0?r:window.location.href),_=await f.request({method:"eth_requestAccounts"}).then(C=>C).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!_||_.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=zm(_[0]);let N=(n=m==null?void 0:m.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!N){const C=await f.request({method:"eth_chainId"});N=Tb(C)}const j={domain:v.host,address:E,statement:g,uri:v.href,version:"1",chainId:N,nonce:(s=m==null?void 0:m.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(i=(o=m==null?void 0:m.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&i!==void 0?i:new Date,expirationTime:(l=m==null?void 0:m.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=m==null?void 0:m.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(d=m==null?void 0:m.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(u=m==null?void 0:m.signInWithEthereum)===null||u===void 0?void 0:u.resources};x=Ab(j),b=await f.request({method:"personal_sign",params:[Mb(x),E]})}try{const{data:y,error:w}=await G(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:b},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:ft});if(w)throw w;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new Zn}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:w})}catch(y){if(H(y))return{data:{user:null,session:null},error:y};throw y}}async signInWithSolana(e){var r,n,s,o,i,l,c,d,u,h,p,x;let b,y;if("message"in e)b=e.message,y=e.signature;else{const{chain:w,wallet:g,statement:m,options:f}=e;let v;if(Ge())if(typeof g=="object")v=g;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))v=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(f!=null&&f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=g}const _=new URL((r=f==null?void 0:f.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in v&&v.signIn){const E=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},f==null?void 0:f.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),m?{statement:m}:null));let N;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")N=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)N=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)b=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),y=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in v)||typeof v.signMessage!="function"||!("publicKey"in v)||typeof v!="object"||!v.publicKey||!("toBase58"in v.publicKey)||typeof v.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${_.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(s=(n=f==null?void 0:f.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=f==null?void 0:f.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${f.signInWithSolana.notBefore}`]:[],...!((i=f==null?void 0:f.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${f.signInWithSolana.expirationTime}`]:[],...!((l=f==null?void 0:f.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${f.signInWithSolana.chainId}`]:[],...!((c=f==null?void 0:f.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${f.signInWithSolana.nonce}`]:[],...!((d=f==null?void 0:f.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${f.signInWithSolana.requestId}`]:[],...!((h=(u=f==null?void 0:f.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...f.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const E=await v.signMessage(new TextEncoder().encode(b),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=E}}try{const{data:w,error:g}=await G(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:rb(y)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:ft});if(g)throw g;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new Zn}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:g})}catch(w){if(H(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(e){const r=await xr(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:o,error:i}=await G(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:ft});if(await qt(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Zn}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:i})}catch(o){if(H(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:o,nonce:i}=e,l=await G(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:ft}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Zn}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(r){if(H(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,s,o,i;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Fr(this.storage,this.storageKey));const{error:h}=await G(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await G(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new ya("You must provide either an email or phone number.")}catch(l){if(H(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,n;try{let s,o;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,o=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:i,error:l}=await G(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:ft});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,d=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(s){if(H(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var r,n,s;try{let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await Fr(this.storage,this.storageKey)),await G(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:jb})}catch(o){if(H(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Ut;const{error:s}=await G(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(H(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:o}=e,{error:i}=await G(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:n,type:s,options:o}=e,{data:i,error:l}=await G(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new ya("You must provide either an email or phone number and a type")}catch(r){if(H(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await xr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<ji:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const i=await xr(this.userStorage,this.storageKey+"-user");i!=null&&i.user?e.user=i.user:e.user=Si()}if(this.storage.isServer&&e.user){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!i&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}const{session:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await G(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Gt}):await this._useSession(async r=>{var n,s,o;const{data:i,error:l}=r;if(l)throw l;return!(!((n=i.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ut}:await G(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:Gt})})}catch(r){if(H(r))return Qy(r)&&(await this._removeSession(),await qt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:o}=n;if(o)throw o;if(!s.session)throw new Ut;const i=s.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Fr(this.storage,this.storageKey));const{data:d,error:u}=await G(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:Gt});if(u)throw u;return i.user=d.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(n){if(H(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ut;const r=Date.now()/1e3;let n=r,s=!0,o=null;const{payload:i}=Ni(e.access_token);if(i.exp&&(n=i.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;o={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(r){if(H(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:i,error:l}=r;if(l)throw l;e=(n=i.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Ut;const{session:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(H(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!Ge())throw new ba("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ba(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new hu("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ba("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new hu("No code detected.");const{data:m,error:f}=await this._exchangeCodeForSession(e.code);if(f)throw f;const v=new URL(window.location.href);return v.searchParams.delete("code"),window.history.replaceState(window.history.state,"",v.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:o,refresh_token:i,expires_in:l,expires_at:c,token_type:d}=e;if(!o||!l||!i||!d)throw new ba("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let p=u+h;c&&(p=parseInt(c));const x=p-u;x*1e3<=Qr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${h}s`);const b=p-h;u-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,p,u):u-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,p,u);const{data:y,error:w}=await this._getUser(o);if(w)throw w;const g={provider_token:n,provider_refresh_token:s,access_token:o,expires_in:h,expires_at:p,refresh_token:i,token_type:d,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(n){if(H(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await xr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return{error:o};const i=(n=s.session)===null||n===void 0?void 0:n.access_token;if(i){const{error:l}=await this.admin.signOut(i,e);if(l&&!(Gy(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await qt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=sb(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:o},error:i}=r;if(i)throw i;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Fr(this.storage,this.storageKey,!0));try{return await G(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(H(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(H(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:s}=await this._useSession(async o=>{var i,l,c,d,u;const{data:h,error:p}=o;if(p)throw p;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await G(this.fetch,"GET",x,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return Ge()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(H(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:o,error:i}=r;if(i)throw i;return await G(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(H(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await lb(async s=>(s>0&&await ib(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await G(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ft})),(s,o)=>{const i=200*Math.pow(2,s);return o&&_i(o)&&Date.now()+i-n<Qr})}catch(n){if(this._debug(r,"error",n),H(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Ge()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await xr(this.storage,this.storageKey);if(s&&this.userStorage){let i=await xr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:s.user},await Kr(this.userStorage,this.storageKey+"-user",i)),s.user=(e=i==null?void 0:i.user)!==null&&e!==void 0?e:Si()}else if(s&&!s.user&&!s.user){const i=await xr(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(s.user=i.user,await qt(this.storage,this.storageKey+"-user"),await Kr(this.storage,this.storageKey,s)):s.user=Si()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const o=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<ji;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${ji}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),_i(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(s.access_token);!l&&(i!=null&&i.user)?(s.user=i.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(n,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Ut;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Fo;const{data:o,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!o.session)throw new Ut;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={session:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(s,"error",o),H(o)){const i={session:null,error:o};return _i(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(i),i}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){o.push(c)}});if(await Promise.all(i),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Kr(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const o=xu(s);await Kr(this.storage,this.storageKey,o)}else{const s=xu(r);await Kr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await qt(this.storage,this.storageKey),await qt(this.storage,this.storageKey+"-code-verifier"),await qt(this.storage,this.storageKey+"-user"),this.userStorage&&await qt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ge()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Qr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/Qr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Qr}ms, refresh threshold is ${Il} ticks`),s<=Il&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof qm)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ge()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,i]=await Fr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const o=new URLSearchParams(n.queryParams);s.push(o.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;return o?{data:null,error:o}:await G(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(H(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:o,error:i}=r;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await G(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(H(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return{data:null,error:o};const{data:i,error:l}=await G(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:l})})}catch(r){if(H(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;return o?{data:null,error:o}:await G(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(H(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],s=n.filter(i=>i.factor_type==="totp"&&i.status==="verified"),o=n.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:n,totp:s,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:s},error:o}=e;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Ni(s.access_token);let l=null;i.aal&&(l=i.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=i.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(l=>l.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+Hy>s)return n;const{data:o,error:i}=await G(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,n=o.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:x,error:b}=await this.getSession();if(b||!x.session)return{data:null,error:b};n=x.session.access_token}const{header:s,payload:o,signature:i,raw:{header:l,payload:c}}=Ni(n);r!=null&&r.allowExpired||pb(o.exp);const d=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!d){const{error:x}=await this.getUser(n);if(x)throw x;return{data:{claims:o,header:s,signature:i},error:null}}const u=gb(s.alg),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,i,tb(`${l}.${c}`)))throw new Dl("Invalid JWT signature");return{data:{claims:o,header:s,signature:i},error:null}}catch(n){if(H(n))return{data:null,error:n};throw n}}}Bs.nextInstanceID=0;const Rb=Bs;class $b extends Rb{constructor(e){super(e)}}var Db=function(t,e,r,n){function s(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function l(u){try{d(n.next(u))}catch(h){i(h)}}function c(u){try{d(n.throw(u))}catch(h){i(h)}}function d(u){u.done?o(u.value):s(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class Lb{constructor(e,r,n){var s,o,i;this.supabaseUrl=e,this.supabaseKey=r;const l=zy(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:Oy,realtime:My,auth:Object.assign(Object.assign({},Ty),{storageKey:c}),global:Py},u=qy(n??{},d);this.storageKey=(s=u.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=u.global.headers)!==null&&o!==void 0?o:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=u.auth)!==null&&i!==void 0?i:{},this.headers,u.global.fetch),this.fetch=$y(r,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new Vv(new URL("rest/v1",l).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new ky(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new Nv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return Db(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:o,storageKey:i,flowType:l,lock:c,debug:d},u,h){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new $b({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),u),storageKey:i,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:o,flowType:l,lock:c,debug:d,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new cy(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const qb=(t,e,r)=>new Lb(t,e,r);function zb(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}zb()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ub="https://chhtllsprlqvjeivspxq.supabase.co",Bb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNoaHRsbHNwcmxxdmplaXZzcHhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4NTQ0OTcsImV4cCI6MjA3NDQzMDQ5N30.qvoJ7Y53yihGkzzMxHcY8hBqiLb68kZxvR1mBpwWnAY",Fb=!0,O=qb(Ub,Bb,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},db:{schema:"public"},global:{headers:{"X-Client-Info":"sistema-soropel@1.0.0"}}}),lr=()=>!!(O&&Fb),qn=()=>({success:!1,error:"Supabase não está disponível. Verifique as variáveis de ambiente.",data:null}),Wb=t=>{let e="offline";switch(t.status){case"ativa":e="online";break;case"manutencao":e="maintenance";break;case"parada":e="offline";break;default:e="idle"}return{id:t.id,nome:`Máquina ${t.machine_number} - ${t.name}`,status:e,produto:t.current_product||"Aguardando produção",progresso:t.progress_percentage||0,tempoRestante:t.time_remaining||void 0,observacao:t.observations||`Eficiência: ${t.efficiency_rate||100}%`}},Hb=t=>({id:t.id,type:t.type,title:t.title,message:t.message,timestamp:new Date(t.created_at)}),Vb=t=>({id:t.id,type:t.type,title:t.title,description:t.description,timestamp:new Date(t.created_at),icon:t.icon||"info"}),Gb=async()=>{var t,e;if(!lr())return qn();try{const[r,n,s]=await Promise.all([O.from("orders").select("id, status").in("status",["aguardando_producao","em_producao"]),O.from("bobinas").select("id, status").eq("status","em_maquina"),O.from("machines").select("id, status, efficiency_rate")]);if(r.error||n.error||s.error)return console.error("❌ Erro ao buscar métricas:",{orders:r.error,bobinas:n.error,machines:s.error}),{error:"Erro ao buscar métricas"};const o=((t=r.data)==null?void 0:t.length)||0,i=((e=n.data)==null?void 0:e.length)||0,l=s.data||[],c=l.filter(x=>x.status==="ativa").length,d=l.length>0?Math.round(l.reduce((x,b)=>x+(b.efficiency_rate||100),0)/l.length):100,u=new Date().toISOString().split("T")[0],{data:h}=await O.from("bobinas").select("id").eq("status","sobra").gte("updated_at",`${u}T00:00:00`);return{data:{pedidosAndamento:o,bobinaemUso:i,maquinasAtivas:{ativas:c,total:l.length,eficienciaMedia:d},sobrasHoje:(h==null?void 0:h.length)||0}}}catch(r){return console.error("❌ Erro inesperado ao buscar métricas:",r),{error:"Erro de conexão"}}},Qb=async()=>{if(!lr()||!O)return qn();try{const{data:t,error:e}=await O.from("production_tracking").select("*").order("created_at",{ascending:!1}).limit(1).single();return e&&e.code!=="PGRST116"?(console.error("❌ Erro ao buscar produção:",e),{error:"Erro ao buscar dados de produção"}):{data:{metaDiaria:(t==null?void 0:t.daily_goal)||15e3,realizado:(t==null?void 0:t.current_production)||8450,porcentagem:Math.round(((t==null?void 0:t.percentage)||56.3)*100)/100,projecao:(t==null?void 0:t.projection)||15100,topProdutos:(t==null?void 0:t.top_products)||[{nome:"KRAFT 1/2 MIX",quantidade:2890},{nome:"KRAFT 1/4 MIX",quantidade:2156},{nome:"PAPEL SEMI KRAFT",quantidade:1740}]}}}catch(t){return console.error("❌ Erro inesperado ao buscar produção:",t),{error:"Erro de conexão"}}},Kb=async()=>{if(!lr()||!O)return qn();try{const{data:t,error:e}=await O.from("machines").select(`
        id,
        machine_number,
        name,
        status,
        current_product,
        progress_percentage,
        efficiency_rate,
        estimated_completion,
        time_remaining,
        observations
      `).order("machine_number",{ascending:!0});return e?(console.error("❌ Erro ao buscar máquinas:",e),{error:"Erro ao buscar status das máquinas"}):{data:(t||[]).map(Wb)}}catch(t){return console.error("❌ Erro inesperado ao buscar máquinas:",t),{error:"Erro de conexão"}}},Jb=async()=>{if(!lr()||!O)return qn();try{const{data:t,error:e}=await O.from("alerts").select("*").eq("is_resolved",!1).order("priority",{ascending:!1}).order("created_at",{ascending:!1}).limit(10);return e?(console.error("❌ Erro ao buscar alertas:",e),{error:"Erro ao buscar alertas"}):{data:(t||[]).map(Hb)}}catch(t){return console.error("❌ Erro inesperado ao buscar alertas:",t),{error:"Erro de conexão"}}},Yb=async(t=20)=>{if(!lr()||!O)return qn();try{const{data:e,error:r}=await O.from("activities").select("*").order("created_at",{ascending:!1}).limit(t);return r?(console.error("❌ Erro ao buscar atividades:",r),{error:"Erro ao buscar atividades"}):{data:(e||[]).map(Vb)}}catch(e){return console.error("❌ Erro inesperado ao buscar atividades:",e),{error:"Erro de conexão"}}},Xb=async()=>{try{const[t,e,r,n,s]=await Promise.all([Gb(),Qb(),Kb(),Jb(),Yb()]);return{metrics:t.data,production:e.data,machines:r.data,alerts:n.data,activities:s.data,errors:{metrics:t.error,production:e.error,machines:r.error,alerts:n.error,activities:s.error}}}catch(t){throw console.error("❌ Erro ao atualizar dashboard:",t),t}},Zb=async()=>{if(!lr()||!O)return console.warn("⚠️ Supabase não disponível - variáveis de ambiente não carregadas"),{success:!1,error:"Supabase client não inicializado - verifique variáveis de ambiente"};try{const{data:t}=await O.from("production_tracking").select("count").limit(1);return{success:!0,count:t}}catch(t){return console.error("❌ Erro na conexão dashboard:",t),{success:!1,error:t}}},ew={pedidosAndamento:12,bobinaemUso:8,maquinasAtivas:{ativas:6,total:9,eficienciaMedia:87},sobrasHoje:3},tw={metaDiaria:15e3,realizado:8450,porcentagem:56,projecao:15100,topProdutos:[{nome:"KRAFT 1/2 MIX",quantidade:2890},{nome:"KRAFT 1/4 MIX",quantidade:2156},{nome:"PAPEL SEMI KRAFT",quantidade:1740}]},Um=Qs()(Lo(yv((t,e)=>({metrics:ew,production:tw,machines:[],alerts:[],activities:[],isLoading:!1,lastUpdate:null,connectionStatus:"connecting",updateMetrics:r=>t(n=>({metrics:{...n.metrics,...r},lastUpdate:new Date})),updateProduction:r=>t(n=>({production:{...n.production,...r},lastUpdate:new Date})),updateMachines:r=>t({machines:r,lastUpdate:new Date}),addAlert:r=>t(n=>({alerts:[r,...n.alerts].slice(0,10)})),removeAlert:r=>t(n=>({alerts:n.alerts.filter(s=>s.id!==r)})),addActivity:r=>t(n=>({activities:[r,...n.activities].slice(0,20)})),setLoading:r=>t({isLoading:r}),refreshData:async()=>{t({isLoading:!0});try{const r=await Xb();t({metrics:r.metrics||e().metrics,production:r.production||e().production,machines:r.machines||[],alerts:r.alerts||[],activities:r.activities||[],lastUpdate:new Date,connectionStatus:"connected",isLoading:!1})}catch(r){console.error("❌ Erro ao atualizar dashboard:",r),t({isLoading:!1,connectionStatus:"error"})}},testConnection:async()=>{try{const r=await Zb();return t({connectionStatus:r.success?"connected":"error"}),r.success}catch(r){return console.error("❌ Erro ao testar conexão:",r),t({connectionStatus:"error"}),!1}}}),{name:"dashboard-storage",partialize:t=>({metrics:t.metrics,production:t.production})}),{name:"dashboard-store"})),_t=Qs()(Lo((t,e)=>({sidebarCollapsed:!1,mobileMenuOpen:!1,notifications:[],modals:{novaBobina:!1,novoPedido:!1,configuracoes:!1},toggleSidebar:()=>t(r=>({sidebarCollapsed:!r.sidebarCollapsed})),toggleMobileMenu:()=>t(r=>({mobileMenuOpen:!r.mobileMenuOpen})),showNotification:r=>{const n=Math.random().toString(36).substr(2,9),s={id:n,...r};t(i=>({notifications:[...i.notifications,s]}));const o=r.duration||4e3;setTimeout(()=>{e().removeNotification(n)},o)},removeNotification:r=>t(n=>({notifications:n.notifications.filter(s=>s.id!==r)})),openModal:r=>t(n=>({modals:{...n.modals,[r]:!0}})),closeModal:r=>t(n=>({modals:{...n.modals,[r]:!1}})),closeAllModals:()=>t({modals:{novaBobina:!1,novoPedido:!1,configuracoes:!1}})}),{name:"ui-store"})),wa=[{id:"mock-uuid-1621",numero:"OP-1621",cliente:"EMBALSUL LTDA",status:"aguardando",prioridade:"alta",dataEntrega:"2025-01-28",quantidadeTotal:20,progresso:0,tipo:"timbrado",produtos:[{nome:"Saco Mix 1kg",pedido:12,separado:0,estoque:15,progresso:0,unidade:"MIL"},{nome:"Saco Mix 3kg",pedido:8,separado:0,estoque:10,progresso:0,unidade:"MIL"}],maquinaSugerida:"Máquina 3",bobinaDisponivel:"Bobina A2 - 500kg",observacoes:"Cliente preferencial - priorizar entrega"},{id:"mock-uuid-1609",numero:"OP-1609",cliente:"PONTO DE BALA",status:"urgente",prioridade:"urgente",dataEntrega:"2025-01-26",quantidadeTotal:17,progresso:68,tipo:"neutro",produtos:[{nome:"Saco Mix 2kg",pedido:2,separado:1.7,estoque:5,progresso:85,unidade:"MIL"},{nome:"Saco Mix 4kg",pedido:8,separado:5.2,estoque:12,progresso:65,unidade:"MIL"},{nome:"Saco Mix 5kg",pedido:2,separado:1,estoque:3,progresso:50,unidade:"MIL"},{nome:"Hamburgão - Mono 30gr",pedido:5,separado:1.5,estoque:8,progresso:30,unidade:"MIL"}],maquinaSugerida:"Máquina 9",bobinaDisponivel:"Bobina B1 - 300kg",observacoes:"URGENTE - Cliente ligou cobrando entrega"},{id:"mock-uuid-1540",numero:"OP-1540",cliente:"DIL DOCES",status:"producao",prioridade:"alta",dataEntrega:"2025-01-29",quantidadeTotal:15,progresso:85,tipo:"timbrado",produtos:[{nome:"Viagem 2 - Mono 30gr",pedido:5,separado:4.25,estoque:6,progresso:85,unidade:"MIL"},{nome:"Saco Mix 4kg",pedido:10,separado:8.5,estoque:12,progresso:85,unidade:"MIL"}],maquinaSugerida:"Máquina 9",bobinaDisponivel:"Bobina C3 - 400kg",observacoes:"Máquina 9 necessária para setup especial"},{id:"mock-uuid-1622",numero:"OP-1622",cliente:"DOCE MANIA",status:"producao",prioridade:"media",dataEntrega:"2025-01-30",quantidadeTotal:7.5,progresso:40,tipo:"neutro",produtos:[{nome:"Hamburgão - Mono 30gr",pedido:7.5,separado:3,estoque:8,progresso:40,unidade:"MIL"}],maquinaSugerida:"Máquina 5",bobinaDisponivel:"Bobina A1 - 200kg",observacoes:"Produção normal"},{id:"mock-uuid-1623",numero:"OP-1623",cliente:"PADARIA CENTRAL",status:"atrasado",prioridade:"alta",dataEntrega:"2025-01-25",quantidadeTotal:21,progresso:10,tipo:"timbrado",produtos:[{nome:"Saco Mix 2kg",pedido:15,separado:1.5,estoque:5,progresso:10,unidade:"MIL"},{nome:"Viagem 2 - Mono 30gr",pedido:6,separado:600,estoque:6,progresso:10,unidade:"MIL"}],maquinaSugerida:"Máquina 7",bobinaDisponivel:"Bobina D2 - 600kg",observacoes:"ATRASADO - Acelerar produção"}],vr=t=>({totalPedidos:t.length,emProducao:t.filter(e=>e.status==="producao").length,aguardando:t.filter(e=>e.status==="aguardando").length,atrasados:t.filter(e=>e.status==="atrasado").length,urgentes:t.filter(e=>e.prioridade==="urgente"||e.status==="urgente").length}),Bm=t=>({urgente:"URGENTE",alta:"Alta",media:"Média",baixa:"Baixa"})[t]||"Normal",rw=t=>({aguardando:"Aguardando",producao:"Em Produção",atrasado:"Atrasado",urgente:"Urgente",separado:"Separado",finalizado:"Finalizado"})[t]||t,Fm=t=>new Date(t).toLocaleDateString("pt-BR"),nw=t=>new Date(t)<new Date&&new Date().getHours()>0,zn=()=>(console.log("🔍 DEBUG - isSupabaseAvailable check:",{supabaseExists:!!O,supabaseNull:O===null,supabaseUndefined:O===void 0}),!!O),Un=()=>new Error("Supabase não está disponível. Verifique as variáveis de ambiente."),sw=t=>{switch(t){case"urgente":return"urgente";case"alta":return"especial";case"media":return"normal";case"baixa":return"normal";default:return"normal"}},ju=(t,e)=>{const r=t.length>e.length?t:e,n=t.length>e.length?e:t;if(r.length===0)return 1;const s=(o,i)=>{const l=Array(i.length+1).fill(null).map(()=>Array(o.length+1).fill(null));for(let c=0;c<=o.length;c++)l[0][c]=c;for(let c=0;c<=i.length;c++)l[c][0]=c;for(let c=1;c<=i.length;c++)for(let d=1;d<=o.length;d++){const u=o[d-1]===i[c-1]?0:1;l[c][d]=Math.min(l[c][d-1]+1,l[c-1][d]+1,l[c-1][d-1]+u)}return l[i.length][o.length]};return(r.length-s(r,n))/r.length},aw=async t=>{try{if(!zn())throw Un();let e=null;if(t.cnpj){const{data:s}=await O.from("clients").select("id").eq("cnpj",t.cnpj).single();e=s}if(!e&&t.razaoSocial){const{data:s}=await O.from("clients").select("id").ilike("company_name",t.razaoSocial.trim()).single();e=s}if(e)return{data:e,error:null};const{data:r,error:n}=await O.from("clients").insert({company_name:t.razaoSocial,fantasy_name:t.nomeFantasia||null,cnpj:t.cnpj||null,address:t.endereco||null,cep:t.cep||null,phone:t.telefone||null,email:t.email||null}).select("id").single();return n?(console.error("❌ Erro ao criar cliente:",n),{data:null,error:`Erro ao criar cliente: ${n.message}`}):{data:r,error:null}}catch(e){return{data:null,error:e instanceof Error?e.message:"Erro desconhecido"}}},ow=async t=>{var e,r;try{if(!zn())throw Un();let n=t.client_id;if(t.cliente&&t.cliente.razaoSocial){const i=await aw(t.cliente);i.error?(console.warn("⚠️ Erro ao processar cliente, salvando pedido sem cliente:",i.error),n=null):n=((e=i.data)==null?void 0:e.id)||null}const{data:s,error:o}=await O.from("orders").insert({order_number:t.order_number,client_id:n,priority:sw(t.priority||"normal"),delivery_date:t.delivery_date,notes:t.observations||t.notes,status:"aguardando_producao"}).select().single();if(o)return console.error("❌ Erro ao criar pedido:",o),{data:null,error:`Erro ao criar pedido: ${o.message}`};if(t.produtos&&t.produtos.length>0){const i=[];for(const l of t.produtos){let c=null,d=null;if(l.soropel_code){const h=await O.from("products").select("id, soropel_code, name").eq("active",!0).eq("soropel_code",l.soropel_code).limit(1);h.data&&h.data.length>0&&(c=h.data[0],d=null)}if(!c&&l.nome){const h=await O.from("products").select("id, soropel_code, name").eq("active",!0).ilike("name",l.nome.trim()).limit(1);h.data&&h.data.length>0&&(c=h.data[0],d=null)}if(!c&&l.nome){const h=l.nome.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter(p=>p.length>2).filter(p=>!["saco","de","da","do","com","para"].includes(p));if(console.log(`🔍 Tentando buscar produto com keywords: ${h.join(", ")} (original: ${l.nome})`),h.length>0){const p=await O.from("products").select("id, soropel_code, name").eq("active",!0).ilike("name",`%${h[0]}%`).limit(5);if(p.data&&p.data.length>0){let x=p.data[0];if(p.data.length>1)for(const b of p.data)ju(l.nome.toLowerCase(),b.name.toLowerCase())>ju(l.nome.toLowerCase(),x.name.toLowerCase())&&(x=b);c=x,d=null,console.log(`✅ Produto encontrado por keyword: ${x.name} (código: ${x.soropel_code})`)}}}if(!c){console.warn(`⚠️ Produto não encontrado após busca inteligente: ${l.nome}`);continue}let u=null;if(l.maquinaSugerida){const h=(r=l.maquinaSugerida.match(/\d+/))==null?void 0:r[0];if(h){const{data:p,error:x}=await O.from("machines").select("id").eq("machine_number",parseInt(h)).single();p&&!x?u=p.id:console.warn(`⚠️ Máquina ${h} não encontrada`)}}console.log(`🔍 DEBUG - Adicionando order_item: produto=${c.name} (${c.id}), quantidade=${l.quantidade}, máquina=${u}`),i.push({order_id:s.id,product_id:c.id,quantity:l.quantidade,machine_id:u,status:"pendente"})}if(i.length>0){console.log(`🔍 DEBUG - Criando ${i.length} order_items:`,i);const{error:l}=await O.from("order_items").insert(i);if(l)return console.error("❌ Erro ao criar itens do pedido:",l),await O.from("orders").delete().eq("id",s.id),{data:null,error:`Erro ao criar itens do pedido: ${l.message}`};console.log(`✅ DEBUG - ${i.length} order_items criados com sucesso`)}else console.warn("⚠️ DEBUG - Nenhum order_item para criar!")}return{data:s,error:null}}catch(n){return console.error("❌ Erro inesperado ao criar pedido:",n),{data:null,error:n instanceof Error?n.message:"Erro desconhecido"}}},_u=async t=>{console.log("🔍 DEBUG - getOrderByNumber chamada para:",t);try{if(!zn())throw Un();const{data:e,error:r}=await O.from("orders").select(`
        *,
        order_items:order_items (
          *,
          product:products (
            name,
            soropel_code
          ),
          machine:machines (
            name
          )
        )
      `).eq("order_number",t).single();return r?(console.log("🚨 DEBUG - Erro no getOrderByNumber:",r),{data:null,error:`Erro ao buscar pedido: ${r.message}`}):(console.log("✅ DEBUG - Pedido encontrado por order_number:",e.order_number),{data:e,error:null})}catch(e){return console.log("🚨 DEBUG - Erro capturado no getOrderByNumber:",e),{data:null,error:e instanceof Error?e.message:"Erro desconhecido"}}},iw=async(t=20,e=0,r)=>{var n;console.log("🔍 DEBUG - getOrders chamada iniciada");try{if(!zn())throw console.log("🚨 DEBUG - Supabase não disponível, retornando erro"),Un();console.log("🔍 DEBUG - Executando query Supabase...");let s=O.from("orders").select(`
        *,
        clients (
          id,
          company_name,
          fantasy_name,
          cnpj
        ),
        order_items (
          id,
          quantity,
          separated_quantity,
          status,
          product:products (
            id,
            name,
            soropel_code
          ),
          machine:machines (
            id,
            name,
            machine_number
          )
        )
      `).order("created_at",{ascending:!1});r!=null&&r.status,r!=null&&r.priority,r!=null&&r.customer_name;const{data:o,error:i}=await s.range(e,e+t-1);return console.log("🔍 DEBUG - Resultado query:",{data:o,error:i,dataLength:o==null?void 0:o.length}),o&&o.length>0&&console.log("🔍 DEBUG - Primeiro pedido com order_items:",{orderId:o[0].id,orderItemsCount:((n=o[0].order_items)==null?void 0:n.length)||0,orderItems:o[0].order_items}),i?(console.log("🚨 DEBUG - Erro na query:",i),{data:null,error:`Erro ao buscar pedidos: ${i.message}`}):(console.log("✅ DEBUG - Retornando dados:",(o==null?void 0:o.length)||0,"pedidos"),{data:o||[],error:null})}catch(s){return console.log("🚨 DEBUG - Erro capturado na getOrders:",s),{data:null,error:s instanceof Error?s.message:"Erro desconhecido"}}},lw=async(t,e)=>{try{if(!zn())throw Un();const r={updated_at:new Date().toISOString()};e.priority&&(r.priority=e.priority),e.delivery_date&&(r.delivery_date=e.delivery_date),e.status&&(r.status=e.status),e.observations!==void 0&&(r.notes=e.observations);const{data:n,error:s}=await O.from("orders").update(r).eq("id",t).select().single();return s?{data:null,error:`Erro ao atualizar pedido: ${s.message}`}:{data:n,error:null}}catch(r){return{data:null,error:r instanceof Error?r.message:"Erro desconhecido"}}},Nu=async(t,e)=>{try{if(!zn())throw Un();const{data:r,error:n}=await O.from("order_items").update({separated_quantity:e,updated_at:new Date().toISOString()}).eq("id",t).select().single();return n?(console.error("❌ Erro ao atualizar quantidade separada:",n),{data:null,error:`Erro ao atualizar separação: ${n.message}`}):{data:r,error:null}}catch(r){return{data:null,error:r instanceof Error?r.message:"Erro desconhecido"}}},cw=t=>{switch(t){case"pendente":return"aguardando";case"producao":return"producao";case"finalizado":return"finalizado";case"entregue":return"finalizado";default:return"aguardando"}},dw=t=>{switch(t){case"urgente":return"urgente";case"especial":return"alta";case"normal":return"media";default:return"media"}},uw=Qs((t,e)=>({pedidos:[],metricas:{totalPedidos:0,emProducao:0,aguardando:0,atrasados:0,urgentes:0},filtros:{busca:"",status:"",prioridade:""},separacaoModal:{isOpen:!1,pedidoId:null,produtoIndex:null},retiradaModal:{isOpen:!1,pedidoId:null,produtoIndex:null},detalhesModal:{isOpen:!1,pedido:null},editarModal:{isOpen:!1,pedido:null},isLoading:!1,loadPedidos:async()=>{t({isLoading:!0});try{const r=await iw();if(!r.error&&r.data){console.log("🔍 STORE DEBUG - Convertendo pedidos do Supabase:",r.data.length);const n=r.data.map(s=>{var i,l;const o=(s.order_items||[]).map(c=>{var d,u,h,p,x;return{id:((d=c.product)==null?void 0:d.id)||"",nome:((u=c.product)==null?void 0:u.name)||"Produto não encontrado",soropelCode:((h=c.product)==null?void 0:h.soropel_code)||0,unidade:"Pacotes",pedido:c.quantity||0,separado:c.separated_quantity||0,estoque:c.quantity||0,progresso:c.separated_quantity&&c.quantity?Math.round(c.separated_quantity/c.quantity*100):0,maquina:((p=c.machine)==null?void 0:p.name)||`Máquina ${((x=c.machine)==null?void 0:x.machine_number)||"N/A"}`,observacoes:c.status==="pendente"?"Aguardando separação":c.status}});return console.log(`🔍 STORE DEBUG - Pedido ${s.order_number}: ${o.length} produtos convertidos`),{id:s.id,numero:s.order_number||`ID-${s.id.slice(0,8)}`,cliente:((i=s.clients)==null?void 0:i.company_name)||((l=s.clients)==null?void 0:l.fantasy_name)||"Cliente não informado",status:cw(s.status),prioridade:dw(s.priority),dataEntrega:s.delivery_date||new Date().toISOString().split("T")[0],quantidadeTotal:s.total_units||0,progresso:s.progress_percentage||0,tipo:s.tipo||"neutro",produtos:o,maquinaSugerida:"A definir",bobinaDisponivel:"Verificar estoque",observacoes:s.observations||""}});t({pedidos:n,metricas:vr(n),isLoading:!1})}else console.warn("Falha ao carregar pedidos, usando dados simulados:",r.error),t({pedidos:wa,metricas:vr(wa),isLoading:!1})}catch(r){console.error("Erro ao carregar pedidos:",r),t({pedidos:wa,metricas:vr(wa),isLoading:!1})}},updateFiltros:r=>{t(n=>({filtros:{...n.filtros,...r}}))},filtrarPedidos:()=>{const{pedidos:r,filtros:n}=e();return r.filter(s=>{const o=!n.busca||s.id.toLowerCase().includes(n.busca.toLowerCase())||s.cliente.toLowerCase().includes(n.busca.toLowerCase()),i=!n.status||s.status===n.status,l=!n.prioridade||s.prioridade===n.prioridade;return o&&i&&l})},filterByStatus:r=>{t(n=>({filtros:{...n.filtros,status:r==="todos"?"":r}}))},openSeparacaoModal:(r,n)=>{t({separacaoModal:{isOpen:!0,pedidoId:r,produtoIndex:n}})},closeSeparacaoModal:()=>{t({separacaoModal:{isOpen:!1,pedidoId:null,produtoIndex:null}})},openDetalhesModal:r=>{t({detalhesModal:{isOpen:!0,pedido:r}})},closeDetalhesModal:()=>{t({detalhesModal:{isOpen:!1,pedido:null}})},openEditarModal:r=>{t({editarModal:{isOpen:!0,pedido:r}})},closeEditarModal:()=>{t({editarModal:{isOpen:!1,pedido:null}})},separarProduto:async(r,n,s)=>{var l;const i=e().pedidos.find(c=>c.id===r);if(!i||!i.produtos[n]){console.error("❌ Pedido ou produto não encontrado");return}i.produtos[n];try{const c=await _u(i.numero);if(c.error||!c.data){console.error("❌ Erro ao buscar pedido do banco:",c.error);return}const d=(l=c.data.order_items)==null?void 0:l[n];if(!d){console.error("❌ Order item não encontrado para índice:",n);return}const u=(d.separated_quantity||0)+s,h=await Nu(d.id,u);if(h.error){console.error("❌ Erro ao salvar separação no banco:",h.error);return}console.log("✅ Separação salva no banco com sucesso"),t(p=>{const x=p.pedidos.map(b=>{if(b.id===r){const y=[...b.produtos],w=y[n];w.separado+=s,w.estoque-=s,w.progresso=Math.round(w.separado/w.pedido*100);const g=y.reduce((f,v)=>f+v.separado,0),m=Math.round(g/b.quantidadeTotal*100);return{...b,produtos:y,progresso:m}}return b});return{pedidos:x,metricas:vr(x)}})}catch(c){console.error("❌ Erro na separação do produto:",c)}},retirarProduto:async(r,n,s)=>{var c;const i=e().pedidos.find(d=>d.id===r);if(!i||!i.produtos[n]){console.error("❌ Pedido ou produto não encontrado");return}const l=i.produtos[n];if(s>l.separado){console.error("❌ Quantidade a retirar maior que a separada");return}try{const d=await _u(i.numero);if(d.error||!d.data){console.error("❌ Erro ao buscar pedido do banco:",d.error);return}const u=(c=d.data.order_items)==null?void 0:c[n];if(!u){console.error("❌ Order item não encontrado para índice:",n);return}const h=l.separado-s,p=await Nu(u.id,h);if(p.error){console.error("❌ Erro ao atualizar retirada no banco:",p.error);return}console.log("✅ Retirada realizada no banco:",{orderItemId:u.id,quantidadeRetirada:s,novaSeparada:h}),t(x=>{const b=x.pedidos.map(y=>{if(y.id===r){const w=y.produtos.map((m,f)=>{if(f===n){const v=m.separado-s,_=m.pedido-v,E=m.pedido>0?Math.round(v/m.pedido*100):0;return{...m,separado:v,progresso:E}}return m}),g=w.length>0?Math.round(w.reduce((m,f)=>m+f.progresso,0)/w.length):0;return{...y,produtos:w,progresso:g}}return y});return{pedidos:b,metricas:vr(b)}})}catch(d){console.error("❌ Erro na retirada do produto:",d)}},separarTodosProdutos:r=>{t(n=>{const s=n.pedidos.map(o=>{if(o.id===r){const i=o.produtos.map(l=>{const c=l.pedido-l.separado,d=Math.min(c,l.estoque);return{...l,separado:l.separado+d,estoque:l.estoque-d,progresso:100}});return{...o,produtos:i,progresso:100}}return o});return{pedidos:s,metricas:vr(s)}})},finalizarPedido:r=>{t(n=>{const s=n.pedidos.map(o=>o.id===r?{...o,status:"finalizado"}:o);return{pedidos:s,metricas:vr(s)}})}})),hw=({onRefresh:t,isLoading:e=!1})=>{const{toggleMobileMenu:r,showNotification:n}=_t(),[s,o]=dt.useState(new Date);dt.useEffect(()=>{const l=setInterval(()=>{o(new Date)},1e3);return()=>clearInterval(l)},[]);const i=()=>{t&&(t(),n({message:"🔄 Atualizando dashboard...",type:"info"}))};return a.jsx("header",{className:"bg-blue-800 text-white p-4 shadow-lg",children:a.jsxs("div",{className:"flex items-center justify-between max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(mo,{variant:"ghost",size:"icon",onClick:r,className:"md:hidden bg-gray-700 hover:bg-gray-600 text-white",children:a.jsx(H0,{className:"w-5 h-5"})}),a.jsx("div",{className:"w-10 h-10 bg-white rounded-lg flex items-center justify-center p-1",children:a.jsx("img",{className:"h-8 w-auto",src:"/projeto-soropel/logo_soropel.png",alt:"Soropel"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Sistema Soropel"}),a.jsx("p",{className:"text-blue-200 text-sm",children:"Dashboard - Visão Geral"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[a.jsxs(mo,{variant:"ghost",size:"sm",onClick:i,disabled:e,className:"bg-blue-700 hover:bg-blue-600 text-white",children:[a.jsx(Pr,{className:I("w-4 h-4 mr-2",e&&"animate-spin")}),a.jsx("span",{className:"hidden sm:inline",children:e?"Atualizando...":"Atualizar"})]}),a.jsxs("div",{className:"hidden sm:flex items-center space-x-2",children:[a.jsx(En,{className:"w-5 h-5"}),a.jsx("span",{className:"hidden md:inline",children:"Operador"})]}),a.jsx("div",{className:"text-sm text-blue-200",children:Dx(s)})]})]})})},Ei=[{id:"dashboard",label:"Dashboard",icon:"Home",path:"/",active:!0},{id:"nova-bobina",label:"Nova Bobina",icon:"Camera",path:"/nova-bobina",active:!1},{id:"novo-pedido",label:"Novo Pedido",icon:"PlusCircle",path:"/novo-pedido",active:!1},{id:"pedidos",label:"Pedidos",icon:"ClipboardList",path:"/pedidos",active:!1},{id:"maquinas",label:"Máquinas",icon:"Cog",path:"/maquinas",active:!1},{id:"estoque",label:"Controle de Estoque",icon:"Package2",path:"/estoque",active:!1},{id:"relatorios",label:"Relatórios",icon:"BarChart",path:"/relatorios",active:!1},{id:"entregas",label:"Entregas",icon:"Truck",path:"/entregas",active:!1},{id:"configuracoes",label:"Configurações",icon:"Settings",path:"/configuracoes",active:!1}],Su={Home:U0,Camera:Jt,PlusCircle:I0,ClipboardList:Zf,Cog:R0,Package2:co,BarChart:Jf,Truck:Ic,Settings:tt},fw=({currentPage:t="dashboard",onPageChange:e})=>{const{sidebarCollapsed:r,toggleSidebar:n,showNotification:s}=_t(),o=i=>{e&&(i.id==="dashboard"||i.id==="nova-bobina"||i.id==="novo-pedido"||i.id==="pedidos"||i.id==="maquinas")&&e(i.id)};return a.jsx("nav",{className:I("sidebar bg-gray-900 text-white transition-all duration-400 ease-in-out relative z-10 flex-shrink-0 h-full",r?"w-[70px] collapsed":"w-64"),children:a.jsxs("div",{className:I("sidebar-content h-full relative transition-all duration-400 flex flex-col",r?"w-[70px] p-1":"w-64 p-4"),children:[a.jsxs("div",{className:I("flex items-center mb-6 pt-2",r?"justify-center px-1":"justify-start px-0"),children:[a.jsx("div",{className:I("bg-white rounded-lg flex items-center justify-center transition-all duration-300",r?"w-10 h-10 p-1":"w-12 h-12 p-2"),children:a.jsx("img",{src:"/projeto-soropel/logo_soropel.png",alt:"Soropel",className:"w-full h-full object-contain"})}),!r&&a.jsxs("div",{className:"ml-3",children:[a.jsx("h2",{className:"text-white font-bold text-lg",children:"Soropel"}),a.jsx("p",{className:"text-gray-300 text-xs",children:"Sistema de Gestão"})]})]}),a.jsx("button",{onClick:n,className:"absolute top-4 -right-3 bg-gray-800 hover:bg-gray-700 text-gray-300 hover:text-white w-6 h-6 rounded-full flex items-center justify-center transition-all duration-300 z-50",title:r?"Expandir sidebar":"Minimizar sidebar",children:r?a.jsx(Xf,{className:"w-3 h-3"}):a.jsx(Yf,{className:"w-3 h-3"})}),a.jsx("div",{className:"flex-1 pt-8",children:a.jsx("ul",{className:"space-y-0",children:Ei.slice(0,-1).map(i=>{const l=Su[i.icon],c=i.id===t;return a.jsx("li",{children:a.jsxs("button",{onClick:()=>o(i),className:I("sidebar-menu-item w-full flex transition-all duration-300 border-0 bg-transparent cursor-pointer group",r?"justify-center items-center p-0 w-[48px] h-[48px] rounded-lg mx-auto min-w-[48px] max-w-[48px]":"justify-start space-x-3 px-3 py-2 hover:translate-x-1 rounded-lg items-center",c?"active bg-gradient-to-r from-blue-500 to-blue-600 shadow-lg shadow-blue-500/30 text-white":"text-gray-300 hover:bg-white/10 hover:text-white",!r&&c&&"hover:translate-x-0.5"),style:r?{display:"flex",alignItems:"center",justifyContent:"center",width:"48px",height:"48px",padding:"0",margin:"0 auto",position:"relative"}:void 0,title:r?i.label:void 0,children:[a.jsx(l,{className:I("flex-shrink-0 transition-colors duration-300","w-5 h-5",c?"text-white":"text-gray-300 group-hover:text-white"),style:r?{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",margin:"0",padding:"0"}:void 0}),a.jsx("span",{className:I("sidebar-text transition-opacity duration-200 whitespace-nowrap overflow-hidden",r?"opacity-0 pointer-events-none":"opacity-100"),children:i.label})]})},i.id)})})}),a.jsx("div",{className:"pb-4",children:(()=>{const i=Ei[Ei.length-1],l=Su[i.icon];return a.jsxs("button",{onClick:()=>o(i),className:I("sidebar-menu-item w-full flex transition-all duration-300 border-0 bg-transparent cursor-pointer group",r?"justify-center items-center p-0 w-[48px] h-[48px] rounded-lg mx-auto min-w-[48px] max-w-[48px]":"justify-start space-x-3 px-3 py-2 hover:translate-x-1 rounded-lg items-center",i.active?"active bg-gradient-to-r from-blue-500 to-blue-600 shadow-lg shadow-blue-500/30 text-white":"text-gray-300 hover:bg-white/10 hover:text-white",!r&&i.active&&"hover:translate-x-0.5"),style:r?{display:"flex",alignItems:"center",justifyContent:"center",width:"48px",height:"48px",padding:"0",margin:"0 auto",position:"relative"}:void 0,title:r?i.label:void 0,children:[a.jsx(l,{className:I("flex-shrink-0 transition-colors duration-300","w-5 h-5",i.active?"text-white":"text-gray-300 group-hover:text-white"),style:r?{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",margin:"0",padding:"0"}:void 0}),a.jsx("span",{className:I("sidebar-text transition-opacity duration-200 whitespace-nowrap overflow-hidden",r?"opacity-0 pointer-events-none":"opacity-100"),children:i.label})]})})()})]})})},mw={success:Rr,warning:jt,info:F0,error:jl},pw={success:"bg-green-500 text-white",warning:"bg-yellow-500 text-white",info:"bg-blue-500 text-white",error:"bg-red-500 text-white"},gw=()=>{const{notifications:t,removeNotification:e}=_t();return t.length===0?null:a.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:t.map(r=>{const n=mw[r.type],s=pw[r.type];return a.jsxs("div",{className:I("flex items-center p-4 rounded-lg shadow-lg max-w-sm","transform transition-all duration-300 ease-in-out","animate-in slide-in-from-right",s),children:[a.jsx(n,{className:"w-5 h-5 mr-3 flex-shrink-0"}),a.jsx("p",{className:"flex-1 text-sm font-medium",children:r.message}),a.jsx("button",{onClick:()=>e(r.id),className:"ml-3 flex-shrink-0 hover:bg-white/20 p-1 rounded",children:a.jsx(rt,{className:"w-4 h-4"})})]},r.id)})})},xw=({children:t,currentPage:e="dashboard",onPageChange:r})=>{const{mobileMenuOpen:n,sidebarCollapsed:s}=_t(),{refreshData:o,isLoading:i}=Um();return a.jsxs("div",{className:"h-screen bg-gray-100 flex flex-col overflow-hidden",children:[a.jsx(hw,{onRefresh:o,isLoading:i}),a.jsxs("div",{className:"flex flex-1 h-full overflow-hidden",children:[a.jsx("div",{className:I("transition-all duration-300 ease-in-out flex-shrink-0","fixed md:relative top-0 left-0 h-screen z-50","md:translate-x-0 md:z-auto",n?"translate-x-0":"-translate-x-full md:translate-x-0"),children:a.jsx(fw,{currentPage:e,onPageChange:r})}),n&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>_t.getState().toggleMobileMenu()}),a.jsx("main",{className:"flex-1 overflow-y-auto",children:a.jsx("div",{className:"p-6",children:t})})]}),a.jsx(gw,{})]})},vw={blue:{value:"text-blue-600",background:"bg-blue-100",icon:"text-blue-600"},green:{value:"text-green-600",background:"bg-green-100",icon:"text-green-600"},purple:{value:"text-purple-600",background:"bg-purple-100",icon:"text-purple-600"},orange:{value:"text-orange-600",background:"bg-orange-100",icon:"text-orange-600"}},ja=({title:t,value:e,icon:r,colorScheme:n,subtitle:s,progress:o,className:i})=>{const l=vw[n],c=d=>typeof d=="number"?os(d):d;return a.jsx(Cn,{className:I("metric-card bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1",i),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:t}),a.jsx("p",{className:I("text-3xl font-bold",l.value),children:c(e)}),s&&a.jsx("div",{className:"text-sm text-gray-500 mt-1",children:s}),o&&a.jsxs("div",{className:"mt-2",children:[a.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full overflow-hidden",children:a.jsx("div",{className:I("h-full rounded-full transition-all duration-500",l.background.replace("bg-","bg-").replace("-100","-500")),style:{width:`${Math.min(o.current/o.total*100,100)}%`}})}),o.label&&a.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:o.label})]})]}),a.jsx("div",{className:I("w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0",l.background),children:a.jsx(r,{className:I("w-6 h-6",l.icon)})})]})})},yw={warning:{background:"bg-yellow-50 border-yellow-400",icon:"bg-yellow-500",text:"text-yellow-800",description:"text-yellow-600",timestamp:"text-yellow-500"},info:{background:"bg-blue-50 border-blue-400",icon:"bg-blue-500",text:"text-blue-800",description:"text-blue-600",timestamp:"text-blue-500"},error:{background:"bg-red-50 border-red-400",icon:"bg-red-500",text:"text-red-800",description:"text-red-600",timestamp:"text-red-500"},success:{background:"bg-green-50 border-green-400",icon:"bg-green-500",text:"text-green-800",description:"text-green-600",timestamp:"text-green-500"}},bw={warning:jt,info:Sn,error:Rn,success:Rr},ww=({alerts:t,onDismiss:e})=>a.jsxs(Cn,{children:[a.jsx(Ls,{children:a.jsx(qs,{children:"Alertas e Notificações"})}),a.jsx(zs,{children:a.jsx("div",{className:"space-y-3",children:t.map(r=>{const n=yw[r.type],s=bw[r.type];return a.jsx("div",{className:I("alert-card border-l-4 p-4 rounded-lg transition-all duration-300 hover:shadow-md",n.background),children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:I("w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",n.icon),children:a.jsx(s,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:I("font-medium",n.text),children:r.title}),a.jsx("p",{className:I("text-sm",n.description),children:r.message})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:I("text-xs",n.timestamp),children:Lx(r.timestamp)}),e&&a.jsx("button",{onClick:()=>e(r.id),className:I("p-1 rounded hover:bg-black/10 transition-colors",n.text),children:a.jsx(rt,{className:"w-4 h-4"})})]})]})},r.id)})})})]}),jw={online:{background:"border-green-200 bg-green-50",badge:"status-online"},offline:{background:"border-red-200 bg-red-50",badge:"status-offline"},maintenance:{background:"border-yellow-200 bg-yellow-50",badge:"status-maintenance"},idle:{background:"border-blue-200 bg-blue-50",badge:"status-idle"}},_w={online:"ATIVA",offline:"PARADA",maintenance:"AGUARDANDO",idle:"LIVRE"},Nw=({machines:t})=>a.jsxs(Cn,{children:[a.jsx(Ls,{children:a.jsx(qs,{children:"Status das Máquinas"})}),a.jsx(zs,{children:a.jsx("div",{className:"machine-grid",children:t.map(e=>{const r=jw[e.status],n=_w[e.status];return a.jsxs("div",{className:I("border rounded-lg p-3 transition-all duration-200 hover:shadow-md",r.background),children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"font-medium",children:e.nome}),a.jsx("span",{className:I("px-2 py-1 rounded-full text-xs font-medium",r.badge),children:n})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[e.produto&&a.jsxs("div",{className:"mb-1",children:[e.produto,e.progresso&&a.jsxs("span",{children:[" • ",e.progresso,"% concluído"]})]}),a.jsxs("div",{children:[e.observacao,e.tempoRestante&&a.jsxs("span",{children:[" • ",e.tempoRestante," restantes"]})]})]})]},e.id)})})})]}),Sw=()=>{const{metrics:t,production:e,machines:r,alerts:n,activities:s,isLoading:o,connectionStatus:i,refreshData:l,testConnection:c}=Um(),{showNotification:d}=_t();k.useEffect(()=>{(async()=>{await c()?await l():d({message:"⚠️ Problema na conexão com banco de dados",type:"warning"})})()},[l,c,d]);const u=[{id:"nova-bobina",label:"Registrar",description:"Nova Bobina",icon:Jt,color:"bg-blue-600 hover:bg-blue-700",action:()=>d({message:" Abrindo Nova Bobina...",type:"info"})},{id:"novo-pedido",label:"Novo Pedido",description:"via Imagem",icon:B0,color:"bg-green-600 hover:bg-green-700",action:()=>d({message:"📋 Abrindo Novo Pedido...",type:"info"})},{id:"relatorio",label:"Relatório",description:"Diário",icon:Jf,color:"bg-purple-600 hover:bg-purple-700",action:()=>{}},{id:"manutencao",label:"Manutenção",description:"Máquinas",icon:$o,color:"bg-orange-600 hover:bg-orange-700",action:()=>d({message:"🔧 Abrindo manutenção...",type:"info"})},{id:"estoque",label:"Controle",description:"Estoque",icon:co,color:"bg-teal-600 hover:bg-teal-700",action:()=>d({message:"📦 Abrindo estoque...",type:"info"})},{id:"entregas",label:"Entregas",description:"Hoje",icon:Ic,color:"bg-indigo-600 hover:bg-indigo-700",action:()=>d({message:"🚚 Verificando entregas...",type:"info"})}];return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-4xl font-bold text-gray-800 mb-3",children:"📊 Dashboard Soropel"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Visão geral da produção em tempo real"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center space-x-4",children:a.jsxs("div",{className:"text-sm text-gray-500",children:[a.jsx("span",{className:`${i==="connected"?"text-green-600":i==="error"?"text-red-600":"text-yellow-600"}`,children:"●"}),i==="connected"?"Online":i==="error"?"Offline":"Conectando...",i==="connected"&&" • Última atualização: há 2 seg"]})}),a.jsx("button",{onClick:l,disabled:o,className:"text-sm text-blue-600 hover:text-blue-800 disabled:opacity-50",children:o?"🔄 Atualizando...":"🔄 Atualizar dados"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(ja,{title:"Pedidos em Andamento",value:t.pedidosAndamento,icon:Zf,colorScheme:"blue",progress:{current:75,total:100,label:"75% concluído"}}),a.jsx(ja,{title:"Bobinas em Uso",value:t.bobinaemUso,icon:le,colorScheme:"green",subtitle:"de 55 disponíveis"}),a.jsx(ja,{title:"Máquinas Ativas",value:`${t.maquinasAtivas.ativas}/${t.maquinasAtivas.total}`,icon:tt,colorScheme:"purple",subtitle:`${t.maquinasAtivas.eficienciaMedia}% eficiência média`}),a.jsx(ja,{title:"Sobras Hoje",value:t.sobrasHoje,icon:P0,colorScheme:"orange",subtitle:"3 bobinas aproveitáveis"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[a.jsxs(Cn,{children:[a.jsx(Ls,{children:a.jsx(qs,{children:"Produção Hoje"})}),a.jsxs(zs,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Meta Diária"}),a.jsxs("span",{className:"font-bold text-gray-800",children:[os(e.metaDiaria)," mil"]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Realizado"}),a.jsxs("span",{className:"font-bold text-blue-600",children:[os(e.realizado)," mil"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4",children:a.jsx("div",{className:"bg-blue-600 h-4 rounded-full transition-all duration-500",style:{width:`${e.porcentagem}%`}})}),a.jsxs("div",{className:"text-sm text-gray-500",children:[e.porcentagem,"% da meta • Projeção: ",os(e.projecao)," mil às 22:00"]}),a.jsxs("div",{className:"pt-4 border-t",children:[a.jsx("h4",{className:"font-medium mb-2",children:"Top 3 Produtos"}),a.jsx("div",{className:"space-y-2 text-sm",children:e.topProdutos.map((h,p)=>a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:h.nome}),a.jsxs("span",{className:"font-medium",children:[os(h.quantidade)," mil"]})]},p))})]})]})]}),a.jsxs(Cn,{children:[a.jsx(Ls,{children:a.jsx(qs,{children:"Ações Rápidas"})}),a.jsx(zs,{children:a.jsx("div",{className:"grid grid-cols-2 gap-3",children:u.map(h=>{const p=h.icon;return a.jsxs(mo,{onClick:h.action,className:`${h.color} text-white p-6 h-auto flex-col space-y-2 hover:scale-105 transition-all duration-300 shadow-md`,children:[a.jsx(p,{className:"w-8 h-8"}),a.jsx("div",{className:"text-sm font-medium",children:h.label}),a.jsx("div",{className:"text-xs opacity-90",children:h.description})]},h.id)})})})]})]}),a.jsx(ww,{alerts:n,onDismiss:h=>d({message:"✅ Alerta removido",type:"success"})}),a.jsx(Nw,{machines:r}),o&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-20 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 flex items-center space-x-3",children:[a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),a.jsx("span",{children:"Carregando dados..."})]})})]})},kw=async t=>{try{const{data:e,error:r}=await O.from("bobinas").select("id, reel_number, status").eq("reel_number",t.codigo).single();if(r&&r.code!=="PGRST116")return console.error("❌ Erro ao buscar bobina existente:",r),{error:`Erro ao verificar bobina: ${r.message}`};if(e){const n={status:t.status||"estoque",current_weight:t.peso_atual||t.peso_inicial};t.status==="sobra"&&(n.observacoes=`Atualizado para sobra em ${new Date().toLocaleDateString("pt-BR")} ${new Date().toLocaleTimeString("pt-BR")}`);const{data:s,error:o}=await O.from("bobinas").update(n).eq("id",e.id).select().single();return o?(console.error("❌ Erro ao atualizar bobina:",o),{error:o.message}):{data:s}}return console.log("➕ Bobina não existe, criando nova..."),await Ew(t)}catch(e){return console.error("❌ Erro inesperado no upsert bobina:",e),{error:"Erro de conexão"}}},Ew=async t=>{try{let e;const{data:r,error:n}=await O.from("suppliers").select("id").eq("name",t.supplier_name).single();if(n&&n.code!=="PGRST116")return console.error("❌ Erro ao buscar fornecedor:",n),{error:`Erro ao buscar fornecedor: ${n.message}`};if(r)e=r.id;else{console.log("➕ Criando novo fornecedor:",t.supplier_name);const{data:u,error:h}=await O.from("suppliers").insert([{name:t.supplier_name,contact_person:`Fornecedor criado automaticamente via IA em ${new Date().toLocaleDateString("pt-BR")}`,active:!0,created_at:new Date().toISOString()}]).select("id").single();if(h)if(console.error("❌ Erro detalhado ao criar fornecedor:",{error:h,message:h.message,code:h.code,details:h.details,hint:h.hint}),h.code==="23505"){const{data:p}=await O.from("suppliers").select("id").ilike("name",t.supplier_name).single();if(p)e=p.id;else return{error:`Erro ao processar fornecedor: ${h.message}`}}else return{error:`Erro ao processar fornecedor: ${h.message}`};else if(u)e=u.id;else return console.error("❌ Fornecedor criado mas sem dados retornados"),{error:"Erro ao processar fornecedor - dados não retornados"}}let s;const{data:o,error:i}=await O.from("paper_types").select("id").or(`name.eq.${t.paper_type_name},code.eq.${t.paper_type_name}`),l=(o==null?void 0:o[0])||null;if(i&&i.code!=="PGRST116")return console.error("❌ Erro ao buscar tipo de papel:",i),{error:`Erro ao buscar tipo de papel: ${i.message}`};if(l)s=l.id;else{console.log("➕ Criando novo tipo de papel:",t.paper_type_name);const u=t.paper_type_name.toUpperCase().replace(/[^A-Z0-9]/g,"").substring(0,10),{data:h,error:p}=await O.from("paper_types").insert([{code:u,name:t.paper_type_name,description:`Tipo de papel criado automaticamente via IA em ${new Date().toLocaleDateString("pt-BR")}`,active:!0,created_at:new Date().toISOString()}]).select("id").single();if(p)if(console.error("❌ Erro detalhado ao criar tipo de papel:",{error:p,message:p.message,code:p.code,details:p.details,hint:p.hint}),p.code==="23505"){const{data:x}=await O.from("paper_types").select("id").or(`name.ilike.%${t.paper_type_name}%,code.ilike.%${t.paper_type_name}%`),b=(x==null?void 0:x[0])||null;if(b)s=b.id;else return{error:`Erro ao processar tipo de papel: ${p.message}`}}else return{error:`Erro ao processar tipo de papel: ${p.message}`};else if(h)s=h.id;else return console.error("❌ Tipo de papel criado mas sem dados retornados"),{error:"Erro ao processar tipo de papel - dados não retornados"}}const{data:c,error:d}=await O.from("bobinas").insert([{reel_number:t.codigo,supplier:t.supplier_name,paper_type:t.paper_type_name,gramatura:t.gramatura,initial_weight:t.peso_inicial,current_weight:t.peso_atual||t.peso_inicial,weight_kg:t.peso_inicial,width:t.largura,diameter:t.diametro,condutor:t.condutor,status:t.status||"estoque",received_date:t.data_entrada||new Date().toISOString().split("T")[0]}]).select().single();return d?(console.error("❌ Erro ao criar bobina:",d),{error:d.message}):{data:c}}catch(e){return console.error("❌ Erro inesperado ao criar bobina:",e),{error:"Erro de conexão"}}},Cw=async()=>{try{const{data:t}=await O.from("bobinas").select("count").limit(1);return!0}catch(t){return console.error("❌ Erro na conexão Bobinas Service:",t),!1}},Pw=async(t,e)=>{if(!t||!e.id)return console.warn("Dados insuficientes para notificar máquina"),!1;try{console.log(`🔔 Notificando Máquina ${t} sobre bobina ${e.codigo}`);const{data:r,error:n}=await O.from("machines").select("id").eq("machine_number",parseInt(t)).single();if(n||!r)throw new Error(`Máquina ${t} não encontrada`);const{error:s}=await O.from("bobinas").update({machine_id:r.id,status:"em_maquina",product_in_production:e.produto||null,updated_at:new Date().toISOString()}).eq("id",e.id);if(s)throw new Error(`Erro ao atualizar bobina: ${s.message}`);const{error:o}=await O.from("machines").update({current_bobina_id:e.id,current_product:e.produto||null,updated_at:new Date().toISOString()}).eq("id",r.id);if(o)throw new Error(`Erro ao atualizar máquina: ${o.message}`);return await O.from("activities").insert({type:"changed",title:`Máquina ${t} - Nova Bobina`,description:`Bobina ${e.codigo} atribuída à máquina`,machine_id:r.id,bobina_id:e.id,user_name:"Sistema Nova Bobina",metadata:{bobina_codigo:e.codigo,produto:e.produto}}),console.log(`✅ Máquina ${t} notificada com sucesso`),!0}catch(r){return console.error("❌ Erro ao notificar máquina:",r),!1}},Ow=async t=>{try{const{data:e,error:r}=await O.from("machines").select("id").eq("machine_number",parseInt(t)).single();if(r||!e)return[];const{data:n,error:s}=await O.from("activities").select(`
        *,
        bobinas:bobina_id(reel_number)
      `).eq("machine_id",e.id).eq("type","changed").gte("created_at",new Date(Date.now()-24*60*60*1e3).toISOString()).order("created_at",{ascending:!1}).limit(10);return s?[]:n.map(o=>{var i,l;return{machineId:e.id,bobinaId:o.bobina_id||"",bobinaNumero:((i=o.bobinas)==null?void 0:i.reel_number)||"N/A",produto:(l=o.metadata)==null?void 0:l.produto,timestamp:o.created_at}})}catch(e){return console.error("Erro ao buscar notificações:",e),[]}},Tw=()=>{const{showNotification:t}=_t(),[e,r]=k.useState({codigoBobina:"",dataEntrada:new Date().toISOString().split("T")[0],tipoPapel:"",gramatura:"",largura:"",fornecedor:"",pesoInicial:0,pesoAtual:0,status:"estoque",produtoProducaoId:"",produtoProducao:"",observacoes:""}),[n,s]=k.useState({isActive:!1,isReady:!0,hasImage:!1}),[o,i]=k.useState({isProcessing:!1,hasExtractedData:!1,currentStep:1}),[l,c]=k.useState(null),d=k.useRef(null),u=k.useRef(null),h=k.useCallback(N=>{r(j=>{const C={...j,...N};return(N.status==="estoque"||j.status==="estoque"&&N.pesoInicial!==void 0)&&(C.pesoAtual=C.pesoInicial),C})},[]),p=k.useCallback(N=>{h({status:N})},[h]),x=k.useCallback(async()=>{try{s(F=>({...F,isActive:!0}));const j=(await navigator.mediaDevices.enumerateDevices()).filter(F=>F.kind==="videoinput");if(j.length===0)throw new Error("NoCameraDevices");const $={video:{deviceId:{exact:(j.find(F=>/back|rear|environment/i.test(F.label))??j[0]).deviceId}}};let U;try{U=await navigator.mediaDevices.getUserMedia($)}catch{try{U=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}}})}catch{U=await navigator.mediaDevices.getUserMedia({video:!0})}}d.current&&(d.current.srcObject=U,await d.current.play()),s(F=>({...F,isReady:!0}))}catch(N){console.error("Erro ao ativar câmera:",N),s(C=>({...C,isActive:!1,isReady:!1}));let j="❌ Erro ao ativar câmera. Verifique as permissões.";(N==null?void 0:N.name)==="NotAllowedError"?j="❌ Permissão negada para acessar a câmera. Conceda acesso e tente novamente.":((N==null?void 0:N.name)==="NotFoundError"||(N==null?void 0:N.message)==="NoCameraDevices")&&(j="❌ Nenhum dispositivo de câmera foi encontrado. Conecte uma câmera ou verifique as configurações do sistema."),t({message:j,type:"error"})}},[t]),b=k.useCallback(async()=>{if(!d.current||!u.current)return;const N=u.current,j=d.current,C=N.getContext("2d");C&&(N.width=j.videoWidth,N.height=j.videoHeight,C.drawImage(j,0,0),s(M=>({...M,hasImage:!0,isActive:!1})),j.srcObject&&(j.srcObject.getTracks().forEach($=>$.stop()),j.srcObject=null),N.toBlob(async M=>{M&&(f(2),await g(M))},"image/jpeg",.8))},[]),y=k.useCallback(async N=>{try{console.log("📤 Enviando imagem para webhook N8N..."),console.log("🔍 Blob details:",{size:N.size,type:N.type});const j=await new Promise($=>{const U=new FileReader;U.onloadend=()=>{const S=U.result.split(",")[1];$(S)},U.readAsDataURL(N)});console.log("🔍 Base64 length:",j.length),console.log("🔍 Base64 preview:",j.substring(0,100)+"...");const C={data:{base64:j}};console.log("🔍 Payload structure:",{hasData:!!C.data,hasBase64:!!C.data.base64,base64Length:C.data.base64.length}),console.log("🔍 Request details:",{url:"https://n8n.botneural.online/webhook/fotosbobinas",method:"POST",bodyType:"JSON",contentType:"application/json"});const M=await fetch("https://n8n.botneural.online/webhook/fotosbobinas",{method:"POST",body:JSON.stringify(C),headers:{"Content-Type":"application/json"}});if(M.ok){const $=await M.json();return console.log("✅ Imagem enviada com sucesso para webhook:",$),t({message:"✅ Imagem enviada para webhook com sucesso!",type:"success"}),$}else throw new Error(`Webhook retornou status ${M.status}`)}catch(j){return console.error("❌ Erro ao enviar imagem para webhook:",j),t({message:"⚠️ Erro ao enviar para webhook, mas continuando processamento...",type:"warning"}),null}},[t]),w=k.useCallback(N=>{try{if(console.log("🔄 Processando resposta do webhook:",N),!N)return console.warn("⚠️ Webhook retornou dados vazios"),!1;const j={codigo:N.codigo||"",largura:N.largura||0,tipoPapel:N.tipoPapel||"",gramatura:N.gramatura||"",fornecedor:N.fornecedor||"",pesoInicial:N.pesoInicial||0,diametro:N.diametro||0,condutor:N.condutor||"",confianca:N.confianca||0,observacoes:N.observacoes||""};return console.log("📋 Dados extraídos do webhook:",j),r(C=>({...C,codigoBobina:j.codigo,largura:j.largura.toString(),tipoPapel:j.tipoPapel,gramatura:j.gramatura,fornecedor:j.fornecedor,pesoInicial:j.pesoInicial.toString(),pesoAtual:j.pesoInicial.toString(),observacoes:j.observacoes})),console.log("✅ Formulário atualizado com dados do webhook"),t({message:`✅ Dados extraídos! Confiança: ${Math.round(j.confianca*100)}%`,type:"success"}),!0}catch(j){return console.error("❌ Erro ao processar resposta do webhook:",j),t({message:"⚠️ Erro ao processar dados do webhook",type:"warning"}),!1}},[r,t]),g=k.useCallback(async N=>{i(j=>({...j,isProcessing:!0}));try{console.log("📤 Enviando imagem para webhook...");const j=await y(N);if(j){console.log("✅ Webhook retornou dados:",j);const C=w(j);i(M=>({...M,isProcessing:!1,hasExtractedData:C,currentStep:3})),C&&t({message:"✅ Formulário preenchido automaticamente!",type:"success"})}else{console.log("⚠️ Webhook não retornou dados, usando dados simulados...");const C={codigo:`SIM${Date.now().toString().slice(-6)}`,largura:520,tipoPapel:"MIX038",gramatura:"38",fornecedor:"Paraná",pesoInicial:151,diametro:800,condutor:"Operador",confianca:.85,observacoes:"Dados simulados - webhook indisponível"},M=w(C);i($=>({...$,isProcessing:!1,hasExtractedData:M,currentStep:3}))}}catch(j){console.error("❌ Erro no processamento:",j),i(C=>({...C,isProcessing:!1,hasExtractedData:!1})),t({message:"❌ Erro no processamento da imagem. Tente novamente.",type:"error"})}},[t,y,w]),m=k.useCallback(()=>{const N=document.createElement("input");N.type="file",N.accept="image/*",N.onchange=async j=>{var M;const C=(M=j.target.files)==null?void 0:M[0];C&&(s($=>({...$,hasImage:!0})),f(2),await g(C))},N.click()},[g]),f=k.useCallback(N=>{i(j=>({...j,currentStep:N}))},[]),v=k.useCallback(async()=>{var N;if(!e.codigoBobina)return t({message:"❌ Capture uma imagem primeiro!",type:"error"}),!1;try{if(console.log("💾 Salvando bobina no Supabase...",e),!await Cw())throw new Error("Erro de conexão com Supabase");const C={codigo:e.codigoBobina,supplier_name:e.fornecedor||"FORNECEDOR DETECTADO",paper_type_name:e.tipoPapel||"MIX",gramatura:parseInt(e.gramatura)||38,peso_inicial:e.pesoInicial||151,peso_atual:e.pesoAtual||e.pesoInicial||151,largura:520,diametro:800,status:(e.status||"estoque").replace("em-maquina","em_maquina"),observacoes:e.observacoes||"Dados extraídos via IA - OCR Real",data_entrada:e.dataEntrada||new Date().toISOString().split("T")[0]},M=await kw(C);if(M.error)throw new Error(M.error);if(e.status==="em-maquina"&&e.maquinaAtual&&((N=M.data)!=null&&N.id)){const $=await Pw(e.maquinaAtual,{id:M.data.id,codigo:e.codigoBobina,produto:e.produtoProducao});t($?{message:`✅ Bobina salva e Máquina ${e.maquinaAtual} notificada!`,type:"success"}:{message:"✅ Bobina salva, mas falha na notificação da máquina",type:"warning"})}else t({message:"✅ Bobina salva com sucesso!",type:"success"});return!0}catch(j){return console.error("❌ Erro ao salvar bobina:",j),t({message:`❌ Erro ao salvar bobina: ${j instanceof Error?j.message:"Erro desconhecido"}`,type:"error"}),!1}},[e,t]),_=k.useCallback(()=>{var N;r({codigoBobina:"",dataEntrada:new Date().toISOString().split("T")[0],tipoPapel:"",gramatura:"",fornecedor:"",pesoInicial:0,pesoAtual:0,status:"estoque",produtoProducaoId:"",produtoProducao:"",observacoes:""}),s({isActive:!1,isReady:!0,hasImage:!1}),i({isProcessing:!1,hasExtractedData:!1,currentStep:1}),c(null),(N=d.current)!=null&&N.srcObject&&(d.current.srcObject.getTracks().forEach(C=>C.stop()),d.current.srcObject=null)},[t]),E=k.useCallback(N=>{if(!N||!e.codigoBobina){t({message:"❌ Dados insuficientes para retorno ao estoque",type:"error"});return}h({status:"estoque",pesoInicial:N,pesoAtual:N,observacoes:`Bobina retornada ao estoque como sobra aproveitável. Peso original: ${N}kg. Data de retorno: ${new Date().toLocaleDateString("pt-BR")}.`})},[e.codigoBobina,h,t]);return{formData:e,cameraState:n,formState:o,processedData:l,videoRef:d,canvasRef:u,updateFormData:h,updateStatus:p,activateCamera:x,captureImage:b,uploadImage:m,updateStep:f,saveBobina:v,clearForm:_,returnToStock:E}},Mw=({cameraState:t,isProcessing:e=!1,videoRef:r,canvasRef:n,onActivateCamera:s,onCaptureImage:o,onUploadImage:i})=>{const{isActive:l,isReady:c,hasImage:d}=t;return a.jsxs("div",{className:"bg-white p-3 sm:p-4 lg:p-6 rounded-xl lg:rounded-2xl shadow-lg lg:shadow-xl border border-gray-100",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 lg:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h3",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900 flex items-center",children:[a.jsx(Jt,{className:"w-5 h-5 lg:w-6 lg:h-6 mr-2 lg:mr-3 text-blue-600"}),"Captura de Imagem"]}),a.jsxs("div",{className:"flex items-center space-x-2 lg:space-x-3 bg-gray-50 px-3 lg:px-4 py-1.5 lg:py-2 rounded-full",children:[a.jsx("div",{className:I("w-3 h-3 lg:w-4 lg:h-4 rounded-full transition-colors",l?"bg-blue-500 animate-pulse":c?"bg-green-500":"bg-yellow-500")}),a.jsx("span",{className:I("text-xs lg:text-sm font-medium",l?"text-blue-700":c?"text-green-700":"text-yellow-700"),children:l?"Câmera Ativa":c?"Câmera Pronta":"Processando"})]})]}),a.jsx("div",{className:"mb-4 lg:mb-6 text-center",children:a.jsx("p",{className:"text-gray-600 text-sm lg:text-base font-medium",children:"Capture ou faça upload da imagem do rótulo"})}),a.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[a.jsx("div",{className:"relative h-48 sm:h-56 lg:h-64 xl:h-72 rounded-lg lg:rounded-xl overflow-hidden bg-gradient-to-br from-gray-100 to-gray-200 border-2 border-dashed border-gray-300",children:l?a.jsxs(a.Fragment,{children:[a.jsx("video",{ref:r,className:"w-full h-full object-cover",autoPlay:!0,playsInline:!0,muted:!0}),a.jsx("div",{className:"absolute inset-0 pointer-events-none",children:a.jsx("div",{className:"absolute inset-4 border-2 border-white border-dashed rounded-lg opacity-70",children:a.jsxs("div",{className:"absolute -top-6 left-1/2 transform -translate-x-1/2 bg-white px-3 py-1 rounded-full text-xs font-medium text-gray-700 shadow-sm flex items-center",children:[a.jsx(Mc,{className:"w-3 h-3 mr-1"}),"Posicione o rótulo aqui"]})})})]}):d?a.jsxs("div",{className:"relative h-full",children:[a.jsx("canvas",{ref:n,className:"w-full h-full object-cover rounded-lg",style:{display:"block"}}),e&&a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center text-white space-y-3",children:[a.jsx(ar,{className:"w-12 h-12 animate-spin mx-auto"}),a.jsx("p",{className:"text-lg font-semibold",children:"Analisando com IA..."}),a.jsx("p",{className:"text-sm opacity-75",children:"Extraindo dados do rótulo"})]})}),!e&&a.jsx("div",{className:"absolute top-4 right-4 bg-green-500 text-white p-2 rounded-full shadow-lg",children:a.jsx(gt,{className:"w-5 h-5"})})]}):e?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx(ar,{className:"w-12 h-12 text-blue-500 animate-spin mx-auto"}),a.jsx("p",{className:"text-lg font-semibold text-blue-700",children:"Analisando..."}),a.jsx("p",{className:"text-sm text-gray-600",children:"IA extraindo dados do rótulo"})]})}):a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx(Jt,{className:"w-16 h-16 text-gray-400 mx-auto"}),a.jsx("p",{className:"text-lg font-semibold text-gray-700",children:"Câmera Pronta"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Ative a câmera ou faça upload"})]})})}),a.jsx("canvas",{ref:n,className:"hidden"}),a.jsxs("div",{className:"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3",children:[a.jsxs("button",{onClick:s,disabled:l,className:I("flex-1 py-3 lg:py-4 px-4 lg:px-6 rounded-lg lg:rounded-xl transition flex items-center justify-center space-x-2",l?"bg-green-600 text-white cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:[a.jsx(Jt,{className:"w-4 h-4 lg:w-5 lg:h-5"}),a.jsx("span",{className:"text-sm lg:text-base font-medium",children:l?"Câmera Ativa":"Ativar Câmera"})]}),a.jsxs("button",{onClick:i,className:"flex-1 bg-purple-600 text-white py-3 lg:py-4 px-4 lg:px-6 rounded-lg lg:rounded-xl hover:bg-purple-700 transition flex items-center justify-center space-x-2",children:[a.jsx(sm,{className:"w-4 h-4 lg:w-5 lg:h-5"}),a.jsx("span",{className:"text-sm lg:text-base font-medium",children:"Upload Imagem"})]})]}),l&&a.jsxs("button",{onClick:o,className:"w-full bg-green-600 text-white py-4 lg:py-5 px-4 lg:px-6 rounded-lg lg:rounded-xl hover:bg-green-700 transition flex items-center justify-center space-x-2 lg:space-x-3",children:[a.jsx(Jt,{className:"w-5 h-5 lg:w-6 lg:h-6"}),a.jsx("span",{className:"text-base lg:text-lg font-semibold",children:"CAPTURAR IMAGEM"})]})]})]})},Aw=["MIX32","MIX39","MIX45","MIX52","MIX58","MIX65","IRANI32","IRANI39","IRANI45","IRANI52","IRANI58","IRANI65","BRANCO32","BRANCO45","BRANCO52","BRANCO58","BRANCO65","PILAR32","PILAR39","PILAR45","PILAR52","PILAR58","PILAR65","MONO17","MONO25","MONO28","MONO32","MONO38"],Iw=["BN","PARANA","CAPRIMA","IRANI","DOPEL","SUZANO","KLABIN","FIBRIA"],Rw=["17","25","28","32","35","39","42","45","48","52","55","58","62","65","70","75","80"],$w=["1","2","3","4","5","6","7","8","9"],Dw=({formData:t,formState:e,onUpdateFormData:r})=>{const{hasExtractedData:n}=e;return a.jsxs("div",{className:"bg-white p-3 sm:p-4 lg:p-6 xl:p-8 rounded-xl lg:rounded-2xl shadow-lg lg:shadow-xl border border-gray-100",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 lg:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h3",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900 flex items-center",children:[a.jsx(Mc,{className:"w-5 h-5 lg:w-6 lg:h-6 mr-2 lg:mr-3 text-purple-600"}),"Dados da Bobina"]}),a.jsxs("div",{className:"flex items-center space-x-2 lg:space-x-3 bg-gray-50 px-3 lg:px-4 py-1.5 lg:py-2 rounded-full",children:[a.jsx("div",{className:I("w-3 h-3 lg:w-4 lg:h-4 rounded-full transition-colors",n?"bg-green-500":"bg-yellow-500")}),a.jsx("span",{className:I("text-xs lg:text-sm font-medium",n?"text-green-700":"text-yellow-700"),children:n?"Dados Extraídos":"Aguardando Imagem"})]})]}),a.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 lg:gap-6",children:[a.jsxs("div",{className:"md:col-span-2 xl:col-span-3",children:[a.jsxs("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:[a.jsx(em,{className:"w-5 h-5 inline mr-2 text-blue-600"}),"Código da Bobina *",n&&a.jsx("span",{className:"ml-2 text-xs font-normal text-green-600 bg-green-100 px-2 py-1 rounded-full",children:"IA Extraído"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:t.codigoBobina,onChange:s=>r({codigoBobina:s.target.value}),placeholder:"Ex: 01019640013",className:I("w-full p-4 text-lg border-2 rounded-xl transition-all outline-none",n?"border-green-300 bg-green-50 focus:bg-white focus:border-green-500 focus:ring-2 focus:ring-green-200 font-semibold":"border-gray-300 bg-gray-50 focus:bg-white focus:border-blue-500 focus:ring-2 focus:ring-blue-200")}),n&&a.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:a.jsx(gt,{className:"w-5 h-5 text-green-500"})})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:[a.jsx(Sn,{className:"w-5 h-5 inline mr-2 text-green-600"}),"Data de Entrada *",a.jsx("span",{className:"ml-2 text-xs font-normal text-blue-600 bg-blue-100 px-2 py-1 rounded-full",children:"Automático"})]}),a.jsx("input",{type:"date",value:t.dataEntrada,onChange:s=>r({dataEntrada:s.target.value}),className:"w-full p-4 text-lg border-2 border-blue-300 rounded-xl bg-blue-50 focus:bg-white focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all outline-none font-semibold text-blue-900 cursor-pointer hover:border-blue-400"}),a.jsxs("p",{className:"text-xs text-blue-600 mt-2 flex items-center",children:[a.jsx(Sn,{className:"w-3 h-3 mr-1"}),"Data preenchida automaticamente com data atual"]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:[a.jsx(J0,{className:"w-5 h-5 inline mr-2 text-purple-600"}),"Largura (cm) *",n&&a.jsx("span",{className:"ml-2 text-xs font-normal text-green-600 bg-green-100 px-2 py-1 rounded-full",children:"IA Extraído"})]}),n?a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"number",value:t.largura,onChange:s=>r({largura:s.target.value}),className:"w-full p-4 text-lg border-2 border-green-300 rounded-xl bg-green-50 focus:bg-white focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all outline-none font-semibold",placeholder:"Largura extraída pela IA",step:"0.1",min:"0"}),a.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:a.jsx(gt,{className:"w-5 h-5 text-green-500"})})]}):a.jsx("input",{type:"number",value:t.largura,onChange:s=>r({largura:s.target.value}),className:"w-full p-4 text-lg border-2 border-gray-300 rounded-xl bg-gray-50 focus:bg-white focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-all outline-none",placeholder:"Ex: 65.0",step:"0.1",min:"0"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:[a.jsx(W0,{className:"w-5 h-5 inline mr-2 text-purple-600"}),"Tipo de Papel *",n&&a.jsx("span",{className:"ml-2 text-xs font-normal text-green-600 bg-green-100 px-2 py-1 rounded-full",children:"IA Extraído"})]}),n?a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:t.tipoPapel,onChange:s=>r({tipoPapel:s.target.value}),className:"w-full p-4 text-lg border-2 border-green-300 rounded-xl bg-green-50 focus:bg-white focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all outline-none font-semibold",placeholder:"Tipo extraído pela IA"}),a.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:a.jsx(gt,{className:"w-5 h-5 text-green-500"})})]}):a.jsxs("select",{value:t.tipoPapel,onChange:s=>r({tipoPapel:s.target.value}),className:"w-full p-4 text-lg border-2 border-gray-300 rounded-xl bg-gray-50 focus:bg-white focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-all outline-none",children:[a.jsx("option",{value:"",children:"Selecione o tipo"}),Aw.map(s=>a.jsx("option",{value:s,children:s},s))]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:[a.jsx(Yd,{className:"w-5 h-5 inline mr-2 text-orange-600"}),"Gramatura (g/m²) *",n&&a.jsx("span",{className:"ml-2 text-xs font-normal text-green-600 bg-green-100 px-2 py-1 rounded-full",children:"IA Extraído"})]}),n?a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:t.gramatura,onChange:s=>r({gramatura:s.target.value}),className:"w-full p-4 text-lg border-2 border-green-300 rounded-xl bg-green-50 focus:bg-white focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all outline-none font-semibold",placeholder:"Gramatura extraída pela IA"}),a.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:a.jsx(gt,{className:"w-5 h-5 text-green-500"})})]}):a.jsxs("select",{value:t.gramatura,onChange:s=>r({gramatura:s.target.value}),className:"w-full p-4 text-lg border-2 border-gray-300 rounded-xl bg-gray-50 focus:bg-white focus:border-orange-500 focus:ring-2 focus:ring-orange-200 transition-all outline-none",children:[a.jsx("option",{value:"",children:"Selecione a gramatura"}),Rw.map(s=>a.jsxs("option",{value:s,children:[s," g/m²"]},s))]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:[a.jsx(Ic,{className:"w-5 h-5 inline mr-2 text-indigo-600"}),"Fornecedor *",n&&a.jsx("span",{className:"ml-2 text-xs font-normal text-green-600 bg-green-100 px-2 py-1 rounded-full",children:"IA Extraído"})]}),n?a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:t.fornecedor,onChange:s=>r({fornecedor:s.target.value}),className:"w-full p-4 text-lg border-2 border-green-300 rounded-xl bg-green-50 focus:bg-white focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all outline-none font-semibold",placeholder:"Fornecedor extraído pela IA"}),a.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:a.jsx(gt,{className:"w-5 h-5 text-green-500"})})]}):a.jsxs("select",{value:t.fornecedor,onChange:s=>r({fornecedor:s.target.value}),className:"w-full p-4 text-lg border-2 border-gray-300 rounded-xl bg-gray-50 focus:bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all outline-none",children:[a.jsx("option",{value:"",children:"Selecione o fornecedor"}),Iw.map(s=>a.jsx("option",{value:s,children:s},s))]})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-200",children:[a.jsxs("h4",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[a.jsx(Yd,{className:"w-6 h-6 mr-2 text-blue-600"}),"Controle de Peso"]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:"Peso Inicial (kg) *"}),a.jsx("input",{type:"number",value:t.pesoInicial,onChange:s=>r({pesoInicial:Number(s.target.value)}),placeholder:"Ex: 151",min:"0",step:"0.1",className:"w-full p-4 text-lg border-2 border-blue-300 rounded-xl bg-white focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:"Peso Atual (kg) *"}),a.jsx("input",{type:"number",value:t.pesoAtual,onChange:s=>r({pesoAtual:Number(s.target.value)}),placeholder:"Ex: 151",min:"0",step:"0.1",className:"w-full p-4 text-lg border-2 border-blue-300 rounded-xl bg-white focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all outline-none"})]})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:[a.jsx(le,{className:"w-5 h-5 inline mr-2 text-gray-600"}),"Observações"]}),a.jsx("textarea",{value:t.observacoes,onChange:s=>r({observacoes:s.target.value}),placeholder:"Informações adicionais sobre a bobina...",rows:4,className:"w-full p-4 text-base border-2 border-gray-300 rounded-xl bg-gray-50 focus:bg-white focus:border-gray-500 focus:ring-2 focus:ring-gray-200 transition-all outline-none resize-none"})]}),n&&a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:[a.jsxs("h4",{className:"text-sm font-bold text-green-900 mb-2 flex items-center",children:[a.jsx(gt,{className:"w-4 h-4 mr-2"}),"Dados extraídos automaticamente:"]}),a.jsxs("div",{className:"text-sm text-green-800 space-y-1",children:[a.jsxs("p",{children:["• ",a.jsx("strong",{children:"Código:"})," ",t.codigoBobina]}),a.jsxs("p",{children:["• ",a.jsx("strong",{children:"Tipo:"})," ",t.tipoPapel]}),a.jsxs("p",{children:["• ",a.jsx("strong",{children:"Fornecedor:"})," ",t.fornecedor]}),a.jsxs("p",{children:["• ",a.jsx("strong",{children:"Peso:"})," ",t.pesoInicial,"kg"]})]})]})]})]})},Uc=async(t,e=1,r=50)=>{if(console.log("🔍 DEBUG PRODUCTS SERVICE - Iniciando getProducts..."),console.log("🔍 DEBUG - isSupabaseAvailable():",lr()),console.log("🔍 DEBUG - supabase client exists:",!!O),!lr())return console.log("🔍 DEBUG - Supabase não disponível, retornando erro..."),qn();console.log("🔍 DEBUG - Supabase disponível, executando query...");try{let n=O.from("products").select("*",{count:"exact"});t!=null&&t.category_code&&(n=n.eq("category_code",t.category_code)),(t==null?void 0:t.active)!==void 0&&(n=n.eq("active",t.active)),t!=null&&t.search&&(n=n.or(`name.ilike.%${t.search}%,soropel_code.eq.${t.search}`)),t!=null&&t.weight_min&&(n=n.gte("weight_value",t.weight_min)),t!=null&&t.weight_max&&(n=n.lte("weight_value",t.weight_max));const s=(e-1)*r,o=s+r-1;n=n.order("soropel_code",{ascending:!0}).range(s,o),console.log("🔍 DEBUG - Executando query Supabase...");const{data:i,error:l,count:c}=await n;if(console.log("🔍 DEBUG - Resultado da query:",{data:!!i,error:l,count:c,dataLength:i==null?void 0:i.length}),l)return console.error("❌ Erro ao buscar produtos:",l),{success:!1,error:l.message};const d={success:!0,data:{items:i||[],count:c||0,page:e,pageSize:r,totalPages:Math.ceil((c||0)/r)}};return console.log("🔍 DEBUG - Retornando resultado:",d),d}catch(n){return console.error("❌ Erro inesperado:",n),{success:!1,error:"Erro de conexão"}}},Lw=()=>{const[t,e]=k.useState([]),[r,n]=k.useState(!1),[s,o]=k.useState(null),i=k.useCallback(async d=>{n(!0),o(null);try{const u=await Uc({active:!0,search:d||void 0},1,100);u.success&&u.data?e(u.data.items):(o(u.error||"Erro ao carregar produtos"),e([]))}catch(u){o("Erro de conexão"),e([]),console.error("Erro ao buscar produtos:",u)}finally{n(!1)}},[]),l=k.useCallback(d=>{i(d)},[i]),c=k.useCallback(async()=>{await i()},[i]);return k.useEffect(()=>{i()},[i]),{products:t,loading:r,error:s,searchProducts:l,refreshProducts:c}},qw=({selectedProductId:t,onProductSelect:e,disabled:r=!1,placeholder:n="Selecione o produto sendo produzido..."})=>{const{products:s,loading:o,error:i,searchProducts:l}=Lw(),[c,d]=k.useState(!1),[u,h]=k.useState(""),[p,x]=k.useState(null),b=k.useRef(null),y=k.useRef(null);k.useEffect(()=>{if(t){const v=s.find(_=>_.id===t);x(v||null)}else x(null)},[t,s]),k.useEffect(()=>{const v=_=>{b.current&&!b.current.contains(_.target)&&d(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),k.useEffect(()=>{c&&y.current&&y.current.focus()},[c]);const w=v=>{h(v),l(v)},g=v=>{x(v),e(v),d(!1),h("")},m=()=>{x(null),e(null),h("")},f=s.filter(v=>v.name.toLowerCase().includes(u.toLowerCase())||v.soropel_code.toString().includes(u));return a.jsxs("div",{ref:b,className:"relative",children:[a.jsxs("button",{onClick:()=>!r&&d(!c),disabled:r,className:I("w-full p-4 text-left border-2 rounded-xl transition-all duration-200 flex items-center justify-between",r?"bg-gray-100 border-gray-200 text-gray-400 cursor-not-allowed":p?"bg-green-50 border-green-300 text-green-900 hover:border-green-400":"bg-white border-gray-300 text-gray-700 hover:border-blue-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-200"),children:[a.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[a.jsx(le,{className:I("w-5 h-5 flex-shrink-0",p?"text-green-600":"text-gray-400")}),a.jsx("div",{className:"min-w-0 flex-1",children:p?a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-base truncate",children:p.name}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Código: ",p.soropel_code," • ",p.category_name]})]}):a.jsx("span",{className:"text-gray-500",children:n})})]}),a.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[p&&!r&&a.jsx("button",{onClick:v=>{v.stopPropagation(),m()},className:"p-1 text-gray-400 hover:text-red-500 transition-colors",children:a.jsx(rt,{className:"w-4 h-4"})}),a.jsx(kn,{className:I("w-5 h-5 transition-transform",c?"rotate-180":"",r?"text-gray-300":"text-gray-500")})]})]}),c&&!r&&a.jsxs("div",{className:"absolute z-50 w-full mt-2 bg-white border border-gray-200 rounded-xl shadow-xl max-h-80 overflow-hidden",children:[a.jsx("div",{className:"p-4 border-b border-gray-100",children:a.jsxs("div",{className:"relative",children:[a.jsx(kn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx("input",{ref:y,type:"text",value:u,onChange:v=>w(v.target.value),placeholder:"Buscar por nome ou código...",className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none"})]})}),a.jsx("div",{className:"max-h-64 overflow-y-auto",children:o?a.jsxs("div",{className:"p-4 text-center text-gray-500",children:[a.jsx("div",{className:"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-2"}),"Carregando produtos..."]}):i?a.jsxs("div",{className:"p-4 text-center text-red-500",children:[a.jsx(rt,{className:"w-5 h-5 mx-auto mb-2"}),i]}):f.length===0?a.jsxs("div",{className:"p-4 text-center text-gray-500",children:[a.jsx(le,{className:"w-5 h-5 mx-auto mb-2"}),u?"Nenhum produto encontrado":"Nenhum produto disponível"]}):f.map(v=>a.jsx("button",{onClick:()=>g(v),className:"w-full p-4 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none border-b border-gray-50 last:border-b-0 transition-colors",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"flex-shrink-0",children:(p==null?void 0:p.id)===v.id?a.jsx(gt,{className:"w-5 h-5 text-green-600"}):a.jsx(le,{className:"w-5 h-5 text-gray-400"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-semibold text-gray-900 truncate",children:v.name}),a.jsxs("div",{className:"text-sm text-gray-600 flex items-center space-x-3",children:[a.jsxs("span",{children:["Código: ",v.soropel_code]}),a.jsx("span",{children:"•"}),a.jsx("span",{children:v.category_name}),v.weight_value&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"•"}),a.jsxs("span",{children:[v.weight_value,v.weight_unit]})]})]})]})]})},v.id))})]})]})},zw=({formData:t,onUpdateFormData:e,onUpdateStatus:r,onReturnToStock:n})=>{const s=[{value:"estoque",label:"ESTOQUE",icon:le,description:"Disponível para uso",color:"green"},{value:"em-maquina",label:"EM MÁQUINA",icon:tt,description:"Sendo utilizada na produção",color:"blue"},{value:"sobra",label:"SOBRA",icon:co,description:"Resto aproveitável",color:"yellow"}],o=()=>{const l=Number(t.pesoSobra);if(!l||!t.codigoBobina)return;window.confirm(`Confirma retorno de ${l}kg da sobra ao estoque?

Isto criará uma nova entrada de estoque baseada nesta bobina.`)&&n(l)},i=l=>{e({produtoProducaoId:l==null?void 0:l.id,produtoProducao:(l==null?void 0:l.name)||""})};return a.jsxs("div",{className:"bg-white p-6 sm:p-8 rounded-2xl shadow-xl border border-gray-100",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx(Io,{className:"w-6 h-6 text-blue-600"}),a.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Status e Controle da Bobina"})]}),a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-4",children:"Status da Bobina *"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:s.map(l=>a.jsx("div",{onClick:()=>r(l.value),className:I("p-4 border-2 rounded-xl hover:shadow-md transition-all duration-200 cursor-pointer",t.status===l.value?`border-${l.color}-500 bg-${l.color}-50 shadow-lg`:"border-gray-300 bg-white hover:border-gray-400"),children:a.jsxs("div",{className:"flex flex-col items-center text-center space-y-2",children:[a.jsx(l.icon,{className:"w-8 h-8 text-gray-600"}),a.jsxs("div",{children:[a.jsx("div",{className:I("font-bold text-sm",t.status===l.value?`text-${l.color}-700`:"text-gray-700"),children:l.label}),a.jsx("div",{className:"text-xs text-gray-500",children:l.description})]}),a.jsx("div",{className:I("w-4 h-4 rounded-full border-2 transition-all",t.status===l.value?`bg-${l.color}-500 border-${l.color}-500`:"border-gray-300"),children:t.status===l.value&&a.jsx("div",{className:"w-full h-full bg-white rounded-full scale-50"})})]})},l.value))})]}),t.status==="em-maquina"&&a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:[a.jsxs("h4",{className:"text-lg font-bold text-blue-900 mb-4 flex items-center",children:[a.jsx(tt,{className:"w-5 h-5 mr-2"}),"Configuração de Produção"]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-blue-900 mb-3",children:"Máquina Atual *"}),a.jsxs("select",{value:t.maquinaAtual||"",onChange:l=>e({maquinaAtual:l.target.value}),className:"w-full p-4 text-lg border-2 border-blue-300 rounded-xl bg-white focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all outline-none",children:[a.jsx("option",{value:"",children:"Selecione a máquina..."}),$w.map(l=>a.jsxs("option",{value:l,children:["Máquina ",l]},l))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-blue-900 mb-3",children:"Produto sendo Produzido *"}),a.jsx(qw,{selectedProductId:t.produtoProducaoId,onProductSelect:i,placeholder:"Selecione o produto sendo produzido..."}),a.jsx("p",{className:"text-xs text-blue-700 mt-2",children:"Selecione o produto específico que está sendo fabricado com esta bobina"})]})]})]}),t.status==="sobra"&&a.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[a.jsx("h5",{className:"text-sm font-semibold text-yellow-800 mb-3",children:"📏 Detalhes da Sobra"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-yellow-700 mb-1",children:"Peso da Sobra (kg)"}),a.jsx("input",{type:"number",value:t.pesoSobra||"",onChange:l=>e({pesoSobra:Number(l.target.value)}),className:"w-full p-2 border border-yellow-300 rounded text-sm",placeholder:"Ex: 25",min:"1",step:"0.1"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-yellow-700 mb-1",children:"Observações da Sobra"}),a.jsx("input",{type:"text",value:t.obsSobra||"",onChange:l=>e({obsSobra:l.target.value}),className:"w-full p-2 border border-yellow-300 rounded text-sm",placeholder:"Ex: Boa qualidade, aproveitável"})]})]}),a.jsxs("div",{className:"p-3 bg-yellow-100 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-yellow-800",children:"Retornar sobra ao estoque?"}),a.jsxs("button",{type:"button",onClick:o,disabled:!t.pesoSobra,className:"bg-green-600 text-white py-1 px-3 rounded text-xs hover:bg-green-700 transition disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(co,{className:"w-3 h-3 inline mr-1"}),"Retornar ao Estoque"]})]}),a.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:"A sobra será registrada como nova bobina em estoque"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Mc,{className:"w-4 h-4 inline mr-1"}),t.status==="estoque"&&"Observações do Estoque",t.status==="em-maquina"&&"Observações da Produção",t.status==="sobra"&&"Observações da Sobra",!["estoque","em-maquina","sobra"].includes(t.status)&&"Observações"]}),a.jsx("textarea",{value:t.observacoes,onChange:l=>e({observacoes:l.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg",rows:3,placeholder:t.status==="estoque"?"Ex: Bobina nova, boa qualidade, armazenada corretamente...":t.status==="em-maquina"?"Ex: Produção normal, sem problemas, qualidade ok...":t.status==="sobra"?"Ex: Sobra de boa qualidade, aproveitável para pequenos pedidos...":"Observações sobre a bobina..."})]})]})]})},Uw=({className:t})=>{const e=[{id:"1",codigo:"BOB-2025-891",tipoPapel:"MIX32",gramatura:"45",fornecedor:"PARANA",peso:180,status:"estoque",timestamp:"17:15"},{id:"2",codigo:"BOB-2025-890",tipoPapel:"MIX32",gramatura:"45",fornecedor:"PARANA",peso:95,status:"em-maquina",timestamp:"16:45",maquina:"3",produto:"KRAFT 1/2 MIX"},{id:"3",codigo:"BOB-2025-889",tipoPapel:"MIX32",gramatura:"45",fornecedor:"SUZANO",peso:25,status:"sobra",timestamp:"16:20"}],r={emEstoque:42,emMaquinas:8,sobrasUteis:15,acabaramHoje:3},n=[{tipo:"MIX32",percentual:35},{tipo:"IRANI45",percentual:22},{tipo:"BRANCO52",percentual:18},{tipo:"MONO32",percentual:15},{tipo:"Outros",percentual:10}],s=o=>({estoque:{label:"📦 ESTOQUE",color:"green"},"em-maquina":{label:"⚙️ MÁQUINA",color:"blue"},sobra:{label:"📏 SOBRA",color:"yellow"},acabou:{label:"✅ ACABOU",color:"red"}})[o]||{label:o,color:"gray"};return a.jsxs("div",{className:I("grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",t),children:[a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Últimas Bobinas Cadastradas"}),a.jsx("div",{className:"space-y-3",children:e.map(o=>{const i=s(o.status);return a.jsxs("div",{className:I("flex items-center justify-between p-3 rounded-lg",o.status==="estoque"&&"bg-gray-50",o.status==="em-maquina"&&"bg-blue-50",o.status==="sobra"&&"bg-yellow-50"),children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:I("w-10 h-10 rounded-full flex items-center justify-center",o.status==="estoque"&&"bg-green-100",o.status==="em-maquina"&&"bg-blue-100",o.status==="sobra"&&"bg-yellow-100"),children:a.jsxs("span",{className:"text-sm",children:[o.status==="estoque"&&"📦",o.status==="em-maquina"&&"⚙️",o.status==="sobra"&&"📏"]})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:o.codigo}),a.jsxs("p",{className:"text-sm text-gray-600",children:[o.tipoPapel," • ",o.gramatura,"g/m² • ",o.fornecedor," • ",o.peso,"kg",o.status==="em-maquina"&&" restantes",o.status==="sobra"&&" sobra"]}),o.status==="em-maquina"&&o.maquina&&o.produto&&a.jsxs("p",{className:"text-xs text-blue-600",children:["🏭 Máq. ",o.maquina," • ",o.produto]}),o.status==="sobra"&&a.jsx("p",{className:"text-xs text-yellow-600",children:"Aproveitável p/ pequenos"})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("span",{className:I("px-2 py-1 rounded-full text-sm",o.status==="estoque"&&"bg-green-100 text-green-800",o.status==="em-maquina"&&"bg-blue-100 text-blue-800",o.status==="sobra"&&"bg-yellow-100 text-yellow-800"),children:i.label}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:o.timestamp})]})]},o.id)})})]}),a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Controle de Bobinas"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.emEstoque}),a.jsx("div",{className:"text-sm text-green-800",children:"📦 Em Estoque"})]}),a.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.emMaquinas}),a.jsx("div",{className:"text-sm text-blue-800",children:"⚙️ Em Máquinas"})]}),a.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:r.sobrasUteis}),a.jsx("div",{className:"text-sm text-yellow-800",children:"📏 Sobras Úteis"})]}),a.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:r.acabaramHoje}),a.jsx("div",{className:"text-sm text-red-800",children:"✅ Acabaram Hoje"})]})]}),a.jsxs("div",{className:"pt-4 border-t",children:[a.jsx("h4",{className:"font-medium mb-2",children:"Tipos mais utilizados:"}),a.jsx("div",{className:"space-y-2",children:n.map((o,i)=>a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:o.tipo}),a.jsxs("span",{className:"font-medium",children:[o.percentual,"%"]})]},i))})]}),a.jsxs("div",{className:"mt-4 pt-4 border-t",children:[a.jsx("h4",{className:"font-medium mb-2",children:"Fluxo do dia:"}),a.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[a.jsx("div",{children:"📦 → ⚙️ : 5 bobinas para máquinas"}),a.jsx("div",{children:"⚙️ → ✅ : 3 bobinas acabaram"}),a.jsx("div",{children:"⚙️ → 📏 : 2 sobras aproveitáveis"})]})]})]})]})},Bw=({isVisible:t,progress:e,message:r,className:n})=>t?a.jsxs("div",{className:I("bg-white p-6 rounded-xl shadow-lg fade-in",n),children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:a.jsx(am,{className:"w-5 h-5 text-white animate-pulse"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Processando Imagem..."}),a.jsx("p",{className:"text-gray-600",children:r})]})]}),a.jsx("div",{className:"mt-4 bg-gray-200 rounded-full h-3",children:a.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-300",style:{width:`${e}%`}})}),a.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[Math.round(e),"% concluído"]})]}):null,Fw=()=>{const{formData:t,cameraState:e,formState:r,videoRef:n,canvasRef:s,updateFormData:o,updateStatus:i,activateCamera:l,captureImage:c,uploadImage:d,saveBobina:u,clearForm:h,returnToStock:p}=Tw(),[x,b]=k.useState(!1),[y,w]=k.useState(0),[g,m]=k.useState(""),f=async()=>{b(!0),await u()?setTimeout(()=>{h(),b(!1)},2e3):b(!1)};return a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto p-3 sm:p-4 lg:p-6 xl:p-8",children:[a.jsxs("div",{className:"mb-6 lg:mb-8 text-center",children:[a.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 mb-3 lg:mb-4 leading-tight",children:"Nova Bobina"}),a.jsx("p",{className:"text-gray-600 text-sm sm:text-base lg:text-lg max-w-2xl mx-auto leading-relaxed",children:"Registre uma nova bobina via análise inteligente de imagem do rótulo"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 lg:gap-6",children:[a.jsx("div",{className:"lg:col-span-1 xl:col-span-1",children:a.jsx(Mw,{cameraState:e,isProcessing:r.isProcessing,videoRef:n,canvasRef:s,onActivateCamera:l,onCaptureImage:c,onUploadImage:d})}),a.jsx("div",{className:"lg:col-span-1 xl:col-span-2",children:a.jsx(Dw,{formData:t,formState:r,onUpdateFormData:o})})]}),a.jsx("div",{className:"mt-6 lg:mt-8",children:a.jsx(zw,{formData:t,onUpdateFormData:o,onUpdateStatus:i,onReturnToStock:p})}),a.jsxs("div",{className:"mt-6 lg:mt-8 grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx("button",{onClick:f,disabled:!t.codigoBobina||x,className:"w-full bg-green-600 text-white py-4 lg:py-5 px-6 rounded-xl hover:bg-green-700 transition-all duration-200 flex items-center justify-center space-x-3 text-base lg:text-lg font-semibold shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none",children:x?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-6 h-6 border-3 border-white border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:"Salvando Bobina..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Lr,{className:"w-6 h-6"}),a.jsx("span",{children:"Salvar Bobina"})]})}),a.jsxs("button",{onClick:h,disabled:x,className:"w-full bg-gray-600 text-white py-4 lg:py-5 px-6 rounded-xl hover:bg-gray-700 transition-all duration-200 flex items-center justify-center space-x-3 text-base lg:text-lg font-semibold shadow-lg hover:shadow-xl disabled:opacity-50",children:[a.jsx(nm,{className:"w-5 h-5 lg:w-6 lg:h-6"}),a.jsx("span",{children:"Limpar Formulário"})]})]}),a.jsx("div",{className:"mt-8",children:a.jsx(Bw,{isVisible:r.isProcessing,progress:y,message:g})}),a.jsx("div",{className:"mt-8",children:a.jsx(Uw,{})})]})})},Wm=[{id:"1",nome:"Máquina 1",tipo:"normal"},{id:"2",nome:"Máquina 2",tipo:"normal"},{id:"3",nome:"Máquina 3",tipo:"normal"},{id:"4",nome:"Máquina 4",tipo:"normal"},{id:"5",nome:"Máquina 5",tipo:"normal"},{id:"6",nome:"Máquina 6",tipo:"normal"},{id:"7",nome:"Máquina 7",tipo:"normal"},{id:"8",nome:"Máquina 8",tipo:"normal"},{id:"9",nome:"Máquina 9",tipo:"especial"}],Ww=[{value:"urgente",label:"Urgente",color:"bg-red-600"},{value:"alta",label:"Alta",color:"bg-orange-600"},{value:"media",label:"Média",color:"bg-yellow-600"},{value:"baixa",label:"Baixa",color:"bg-blue-600"}],_a={maxRetries:3,timeout:3e4,model:"gpt-4o-mini"},Hw=`
ESPECIALISTA EM ANÁLISE DE ORDENS DE PRODUÇÃO SOROPEL

Analise este documento/ordem de produção da empresa Soropel e extraia os seguintes campos:

CAMPOS OBRIGATÓRIOS DO DOCUMENTO:
1. **NÚMERO DA ORDEM**: Código OP seguido de número (ex: OP-1609, OP-1540)
2. **CLIENTE**: 
   - Razão Social: nome completo da empresa
   - Nome Fantasia: nome comercial (se diferente)
   - CNPJ: número do documento
   - Endereço: rua, número, bairro, cidade (SEM o CEP)
   - CEP: código postal separado (formato XXXXX-XXX)
   - Telefone e email (se visível)
3. **PRODUTOS**: Lista de itens com:
   - Nome do produto (ex: "Saco Mix 2kg", "Hamburgão Mono 30gr")
   - Quantidade (ex: 2.000, 8.000)
   - Unidade (MIL, KG, UND)
4. **DATA DE ENTREGA**: data limite para produção
5. **OBSERVAÇÕES**: qualquer nota especial

EXEMPLOS DE PRODUTOS SOROPEL:
- Saco Mix (vários tamanhos: 1kg, 2kg, 3kg, 4kg, 5kg)
- Hamburgão - Mono 30gr
- Viagem 2 - Mono 30gr
- KRAFT (vários tipos)
- Papel Semi Kraft

INSTRUÇÕES ESPECÍFICAS:
- Procure por cabeçalhos como "ORDEM DE PRODUÇÃO", "OP-", "CLIENTE:", "PRODUTOS:"
- Quantidades podem estar em formato brasileiro (vírgula como decimal)
- Se algum campo não estiver visível, extrair o máximo possível
- Manter formatação original dos nomes de produtos

RESPONDA APENAS com JSON VÁLIDO:
{
  "numeroOrdem": "string - código OP completo",
  "cliente": {
    "razaoSocial": "string - nome completo da empresa",
    "nomeFantasia": "string - nome comercial",
    "cnpj": "string - documento",
    "endereco": "string - rua, número, bairro, cidade (SEM CEP)",
    "cep": "string - código postal XXXXX-XXX",
    "telefone": "string - se disponível",
    "email": "string - se disponível"
  },
  "produtos": [
    {
      "item": number,
      "nome": "string - nome exato do produto",
      "quantidade": number,
      "unidade": "string - MIL/KG/UND"
    }
  ],
  "dataEntrega": "string - formato YYYY-MM-DD",
  "observacoes": "string - notas especiais",
  "confianca": number (0-1),
  "quantidadeTotal": number
}
`,Vw=t=>{if(!t)return{endereco:"",cep:""};const e=/\b(\d{5}[-\s]?\d{3})\b/,r=t.match(e);if(r){const n=r[1].replace(/[-\s]/g,"").replace(/(\d{5})(\d{3})/,"$1-$2");return{endereco:t.replace(e,"").replace(/,\s*$/,"").trim(),cep:n}}return{endereco:t,cep:""}},Gw=async t=>new Promise((e,r)=>{const n=new FileReader;n.onload=()=>{const s=n.result.split(",")[1];e(s)},n.onerror=()=>r(new Error("Erro ao converter imagem")),n.readAsDataURL(t)}),Qw=async(t,e)=>{var i,l,c,d,u,h,p,x,b,y,w;const r="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";e==null||e("📱 Convertendo imagem...");let n;try{n=await Gw(t)}catch(g){throw new Error(`Erro ao processar imagem: ${g instanceof Error?g.message:"Erro desconhecido"}`)}let s=0,o=null;for(;s<_a.maxRetries;)try{s++,e==null||e(`🤖 Analisando documento com IA (tentativa ${s}/${_a.maxRetries})...`);const g=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({model:_a.model,messages:[{role:"user",content:[{type:"text",text:Hw},{type:"image_url",image_url:{url:`data:image/jpeg;base64,${n}`,detail:"high"}}]}],max_tokens:2e3,temperature:.1})});if(!g.ok)throw new Error(`Erro da API OpenAI: ${g.status} - ${g.statusText}`);const f=(c=(l=(i=(await g.json()).choices)==null?void 0:i[0])==null?void 0:l.message)==null?void 0:c.content;if(!f)throw new Error("Resposta vazia da API OpenAI");e==null||e("📋 Processando resultados...");let v;try{const N=f.replace(/```json\n?/g,"").replace(/```\n?/g,"").trim();v=JSON.parse(N)}catch(N){throw new Error(`Erro ao fazer parse do JSON: ${N instanceof Error?N.message:"Erro desconhecido"}`)}const _=Vw(((d=v.cliente)==null?void 0:d.endereco)||"");return{numeroOrdem:v.numeroOrdem||`OP-${Date.now().toString().slice(-4)}`,cliente:{razaoSocial:((u=v.cliente)==null?void 0:u.razaoSocial)||"Cliente Identificado",nomeFantasia:((h=v.cliente)==null?void 0:h.nomeFantasia)||"",cnpj:((p=v.cliente)==null?void 0:p.cnpj)||"",endereco:((x=v.cliente)==null?void 0:x.endereco)||_.endereco,cep:((b=v.cliente)==null?void 0:b.cep)||_.cep,telefone:((y=v.cliente)==null?void 0:y.telefone)||"",email:((w=v.cliente)==null?void 0:w.email)||""},produtos:v.produtos||[],dataEntrega:v.dataEntrega||new Date().toISOString().split("T")[0],observacoes:v.observacoes||"Documento processado via OCR",confianca:v.confianca||.8}}catch(g){if(o=g instanceof Error?g:new Error("Erro desconhecido"),console.error(`❌ Tentativa ${s} falhou:`,o.message),s<_a.maxRetries){const m=Math.pow(2,s)*1e3;e==null||e(`⏳ Aguardando ${m/1e3}s antes da próxima tentativa...`),await new Promise(f=>setTimeout(f,m))}}throw console.error("❌ Todas as tentativas de OCR falharam"),o||new Error("Falha na análise OCR após múltiplas tentativas")},Kw=()=>{const{showNotification:t}=_t(),[e,r]=k.useState({numeroOrdem:"",dataEntrega:new Date().toISOString().split("T")[0],prioridade:"media",tipo:"neutro",cliente:{razaoSocial:"",nomeFantasia:"",cnpj:"",endereco:"",cep:"",telefone:"",email:""},produtos:[],observacoes:""}),[n,s]=k.useState({isActive:!1,isReady:!0,hasImage:!1}),[o,i]=k.useState({isProcessing:!1,hasExtractedData:!1,currentStep:1}),[l,c]=k.useState(null),d=k.useRef(null),u=k.useRef(null),h=k.useCallback(f=>{r(v=>({...v,...f}))},[]),p=k.useCallback(async()=>{try{s(v=>({...v,isReady:!1}));const f=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1920},height:{ideal:1080}}});d.current&&(d.current.srcObject=f,s({isActive:!0,isReady:!0,hasImage:!1}))}catch(f){console.error("Erro ao ativar câmera:",f),s(v=>({...v,isReady:!0})),t({message:"❌ Erro ao ativar câmera",type:"error"})}},[t]),x=k.useCallback(async()=>{if(!(!d.current||!u.current))try{i(E=>({...E,isProcessing:!0}));const f=d.current,v=u.current,_=v.getContext("2d");if(v.width=f.videoWidth,v.height=f.videoHeight,_){_.drawImage(f,0,0);const E=v.toDataURL("image/jpeg",.9);v.toBlob(async N=>{if(N)try{await b(N),s(j=>({...j,hasImage:!0})),i(j=>({...j,currentStep:2}))}catch(j){console.error("❌ Erro no processamento OCR:",j),t({message:"❌ Erro ao processar imagem",type:"error"}),i(C=>({...C,isProcessing:!1}))}else console.error("❌ Erro: blob da imagem é null"),t({message:"❌ Erro ao capturar imagem",type:"error"}),i(j=>({...j,isProcessing:!1}))},"image/jpeg",.9)}}catch(f){console.error("Erro ao capturar imagem:",f),t({message:"❌ Erro ao processar imagem",type:"error"})}finally{i(f=>({...f,isProcessing:!1}))}},[t]),b=k.useCallback(async f=>{var v,_,E,N,j,C,M,$,U;i(F=>({...F,isProcessing:!0}));try{console.log("🤖 Iniciando análise OCR real do documento...");const F=await Qw(f),S={numeroOrdem:F.numeroOrdem||`OP-2025-${Date.now().toString().slice(-6)}`,dataEntrega:F.dataEntrega||new Date().toISOString().split("T")[0],cliente:{razaoSocial:((v=F.cliente)==null?void 0:v.razaoSocial)||"Cliente Identificado",nomeFantasia:((_=F.cliente)==null?void 0:_.nomeFantasia)||"",cnpj:((E=F.cliente)==null?void 0:E.cnpj)||"",endereco:((N=F.cliente)==null?void 0:N.endereco)||"",cep:((j=F.cliente)==null?void 0:j.cep)||"",telefone:((C=F.cliente)==null?void 0:C.telefone)||"",email:((M=F.cliente)==null?void 0:M.email)||""},produtos:(($=F.produtos)==null?void 0:$.map(q=>({item:q.item,nome:q.nome,unidade:q.unidade,quantidade:q.quantidade})))||[],quantidadeTotal:((U=F.produtos)==null?void 0:U.reduce((q,B)=>q+B.quantidade,0))||0};c(S),i(q=>({...q,hasExtractedData:!0})),r(q=>({...q,numeroOrdem:S.numeroOrdem,dataEntrega:S.dataEntrega,cliente:S.cliente,produtos:S.produtos.map(B=>({...B,maquinaSugerida:y(B.nome)}))}))}catch(F){console.error("❌ Erro no OCR real:",F),t({message:"❌ Erro na análise OCR - usando dados padrão",type:"error"});const S={numeroOrdem:`OP-ERRO-${Date.now().toString().slice(-6)}`,dataEntrega:new Date().toISOString().split("T")[0],cliente:{razaoSocial:"Cliente - Erro OCR",nomeFantasia:"",cnpj:"",endereco:"",cep:"",telefone:"",email:""},produtos:[{item:1,nome:"Produto Padrão",unidade:"MIL",quantidade:1}],quantidadeTotal:1};c(S),i(q=>({...q,hasExtractedData:!0}))}finally{i(F=>({...F,isProcessing:!1}))}},[t]),y=f=>{if(f.includes("Mono")||f.includes("Viagem"))return"Máquina 9";const v=Wm.filter(E=>E.tipo==="normal"),_=Math.floor(Math.random()*v.length);return v[_].nome},w=k.useCallback(()=>{const f=document.createElement("input");f.type="file",f.accept="image/*",f.onchange=async v=>{var E;const _=(E=v.target.files)==null?void 0:E[0];if(_)try{i(N=>({...N,isProcessing:!0})),await b(_),s(N=>({...N,hasImage:!0})),i(N=>({...N,currentStep:2,isProcessing:!1}))}catch(N){console.error("❌ Erro no upload:",N),t({message:"❌ Erro ao processar arquivo",type:"error"}),i(j=>({...j,isProcessing:!1}))}},f.click()},[b]),g=k.useCallback(async()=>{try{i(_=>({..._,isProcessing:!0}));const f={order_number:e.numeroOrdem,client_id:null,delivery_date:e.dataEntrega,priority:e.prioridade,observations:e.observacoes,cliente:e.cliente.razaoSocial?{razaoSocial:e.cliente.razaoSocial,nomeFantasia:e.cliente.nomeFantasia,cnpj:e.cliente.cnpj,endereco:e.cliente.endereco,cep:e.cliente.cep,telefone:e.cliente.telefone,email:e.cliente.email}:void 0,produtos:e.produtos.map(_=>({nome:_.nome,soropel_code:_.codigoSoropel,quantidade:_.quantidade,maquinaSugerida:_.maquinaSugerida}))},v=await ow(f);if(v.error){console.error("❌ Erro do service:",v.error),t({message:`❌ Erro ao salvar: ${v.error}`,type:"error"});return}v.data&&(r({numeroOrdem:"",dataEntrega:new Date().toISOString().split("T")[0],prioridade:"media",tipo:"neutro",cliente:{razaoSocial:"",nomeFantasia:"",cnpj:"",endereco:"",cep:"",telefone:"",email:""},produtos:[],observacoes:""}),s({isActive:!1,isReady:!0,hasImage:!1}),i({isProcessing:!1,hasExtractedData:!1,currentStep:1}),c(null))}catch(f){console.error("❌ Erro inesperado ao salvar pedido:",f),t({message:"❌ Erro inesperado ao salvar pedido",type:"error"})}finally{i(f=>({...f,isProcessing:!1}))}},[e,t]),m=k.useCallback(()=>{var f;(f=d.current)!=null&&f.srcObject&&(d.current.srcObject.getTracks().forEach(_=>_.stop()),d.current.srcObject=null),s({isActive:!1,isReady:!0,hasImage:!1}),i({isProcessing:!1,hasExtractedData:!1,currentStep:1}),c(null)},[]);return{formData:e,cameraState:n,formState:o,processedData:l,videoRef:d,canvasRef:u,updateFormData:h,activateCamera:p,captureImage:x,uploadImage:w,savePedido:g,resetProcess:m}},Jw=({cameraState:t,isProcessing:e=!1,videoRef:r,canvasRef:n,onActivateCamera:s,onCaptureImage:o,onUploadImage:i})=>{const{isActive:l,isReady:c,hasImage:d}=t;return a.jsxs("div",{className:"bg-white p-4 md:p-6 rounded-xl shadow-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Captura da Ordem de Produção"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:I("w-3 h-3 rounded-full",l?"bg-blue-500":c?"bg-green-500":"bg-yellow-500")}),a.jsx("span",{className:I("text-sm",l?"text-blue-600":c?"text-green-600":"text-yellow-600"),children:l?"Câmera Ativa":c?"Câmera Pronta":"Processando"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"relative h-80 rounded-lg overflow-hidden bg-gray-100 border-2 border-dashed border-gray-300",children:l?a.jsxs(a.Fragment,{children:[a.jsx("video",{ref:r,className:"w-full h-full object-cover",autoPlay:!0,playsInline:!0,muted:!0}),a.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[a.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-80 h-60 border-2 border-green-400 border-dashed rounded-lg animate-pulse"}),a.jsx("div",{className:"absolute top-4 left-4 text-white bg-black bg-opacity-50 px-2 py-1 rounded text-sm",children:"Posicione a ordem de produção aqui"}),a.jsx("div",{className:"absolute bottom-4 left-4 text-white bg-black bg-opacity-50 px-2 py-1 rounded text-xs",children:"Formato A4 - certifique-se de que o documento está bem iluminado"})]}),e&&a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center z-10",children:a.jsxs("div",{className:"text-center text-white",children:[a.jsx(ar,{className:"w-12 h-12 mx-auto mb-4 animate-spin"}),a.jsx("p",{className:"text-lg font-semibold",children:"Analisando Documento..."}),a.jsx("p",{className:"text-sm opacity-80",children:"IA processando ordem de produção"})]})})]}):d?a.jsx("div",{className:"w-full h-full bg-green-100 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(gt,{className:"w-16 h-16 text-green-600 mx-auto mb-4"}),a.jsx("p",{className:"text-lg font-semibold text-green-800",children:"Ordem Capturada!"}),a.jsx("p",{className:"text-sm text-green-600",children:"Dados extraídos com sucesso"})]})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(z0,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500 mb-2",children:"Posicione a ordem de produção"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Documento deve estar bem iluminado e legível"})]})}),a.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[a.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-80 h-60 border-2 border-blue-500 border-dashed rounded-lg animate-pulse"}),a.jsx("div",{className:"absolute top-4 left-4 text-white bg-black bg-opacity-50 px-2 py-1 rounded text-sm",children:"Área de captura da ordem"})]})]})}),a.jsx("canvas",{ref:n,className:"hidden"}),a.jsxs("div",{className:"flex flex-col md:flex-row space-y-3 md:space-y-0 md:space-x-3",children:[a.jsxs("button",{onClick:s,disabled:l,className:I("flex-1 py-3 px-4 rounded-lg transition flex items-center justify-center space-x-2",l?"bg-green-600 text-white cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:[a.jsx(Jt,{className:"w-5 h-5"}),a.jsx("span",{children:l?"Câmera Ativa":"Ativar Câmera"})]}),a.jsxs("button",{onClick:i,className:"flex-1 bg-gray-600 text-white py-3 px-4 rounded-lg hover:bg-gray-700 transition flex items-center justify-center space-x-2",children:[a.jsx(sm,{className:"w-5 h-5"}),a.jsx("span",{children:"Upload Arquivo"})]})]}),l&&a.jsxs("button",{onClick:o,className:"w-full bg-green-600 text-white py-4 px-6 rounded-lg hover:bg-green-700 transition flex items-center justify-center space-x-2",children:[a.jsx(Jt,{className:"w-6 h-6"}),a.jsx("span",{className:"text-lg font-semibold",children:"CAPTURAR ORDEM"})]}),a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[a.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"📋 Dicas para melhor captura:"}),a.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[a.jsx("li",{children:"• Posicione a ordem de produção completamente dentro da área marcada"}),a.jsx("li",{children:"• Certifique-se de que todos os dados estão legíveis"}),a.jsx("li",{children:"• Use iluminação adequada (evite sombras e reflexos)"}),a.jsx("li",{children:"• Mantenha o documento plano (sem dobras)"}),a.jsx("li",{children:"• Distância recomendada: 30-40cm do documento"}),a.jsx("li",{children:"• Formato aceito: Ordens de produção Soropel padrão"})]})]})]})]})},Yw=({isProcessing:t,hasExtractedData:e,currentStep:r})=>{const n=[{id:1,label:"Captura de Imagem",description:"Fotografar ou fazer upload da ordem"},{id:2,label:"Processamento OCR",description:"Extraindo dados do documento"},{id:3,label:"Validação",description:"Verificando informações extraídas"},{id:4,label:"Finalização",description:"Salvando pedido no sistema"}],s=l=>l<r?"completed":l===r&&t?"processing":l===r&&!t?"current":"pending",o=l=>{switch(s(l)){case"completed":return a.jsx(Rr,{className:"w-5 h-5 text-green-600"});case"processing":return a.jsx(ar,{className:"w-5 h-5 text-blue-600 animate-spin"});case"current":return a.jsx("div",{className:"w-5 h-5 bg-blue-600 rounded-full"});default:return a.jsx("div",{className:"w-5 h-5 bg-gray-300 rounded-full"})}},i=l=>{const c=s(l);return I("flex items-center space-x-3 p-3 rounded-lg transition-all",{"bg-green-50 border border-green-200":c==="completed","bg-blue-50 border border-blue-200":c==="processing"||c==="current","bg-gray-50 border border-gray-200":c==="pending"})};return t?a.jsx("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:a.jsxs("div",{className:"text-center",children:[a.jsx(ar,{className:"w-12 h-12 text-blue-600 animate-spin mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Processando Ordem de Produção"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Extraindo dados do documento... Isso pode levar alguns segundos."}),a.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2 text-blue-700",children:[a.jsx(ar,{className:"w-4 h-4 animate-spin"}),a.jsx("span",{className:"text-sm font-medium",children:"Analisando estrutura do documento"})]})})]})}):a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Progresso do Processamento"}),a.jsx("div",{className:"space-y-3",children:n.map(l=>a.jsxs("div",{className:i(l.id),children:[a.jsx("div",{className:"flex-shrink-0",children:o(l.id)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:I("text-sm font-medium",s(l.id)==="completed"?"text-green-800":s(l.id)==="processing"||s(l.id)==="current"?"text-blue-800":"text-gray-600"),children:l.label}),a.jsx("p",{className:I("text-xs",s(l.id)==="completed"?"text-green-600":s(l.id)==="processing"||s(l.id)==="current"?"text-blue-600":"text-gray-500"),children:l.description})]})]},l.id))}),e&&a.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Rr,{className:"w-5 h-5 text-green-600"}),a.jsx("p",{className:"text-sm font-medium text-green-800",children:"Dados extraídos com sucesso!"})]}),a.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Revise as informações no formulário antes de salvar."})]})]})},Xw=({formData:t,onUpdateFormData:e,hasExtractedData:r})=>{const n=(o,i)=>{e({cliente:{...t.cliente,[o]:i}})},s=(o,i,l)=>{const c=[...t.produtos];c[o]={...c[o],[i]:l},e({produtos:c})};return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg space-y-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Dados da Ordem de Produção"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Número da Ordem"}),a.jsx("input",{type:"text",value:t.numeroOrdem,onChange:o=>e({numeroOrdem:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"OP-XXXX"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Entrega"}),a.jsx("input",{type:"date",value:t.dataEntrega,onChange:o=>e({dataEntrega:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prioridade"}),a.jsx("select",{value:t.prioridade,onChange:o=>e({prioridade:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:Ww.map(o=>a.jsx("option",{value:o.value,children:o.label},o.value))})]})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx(O0,{className:"w-5 h-5 text-gray-600"}),a.jsx("h4",{className:"text-md font-semibold text-gray-900",children:"Dados do Cliente"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Razão Social"}),a.jsx("input",{type:"text",value:t.cliente.razaoSocial,onChange:o=>n("razaoSocial",o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nome completo da empresa"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome Fantasia"}),a.jsx("input",{type:"text",value:t.cliente.nomeFantasia,onChange:o=>n("nomeFantasia",o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nome comercial"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CNPJ"}),a.jsx("input",{type:"text",value:t.cliente.cnpj,onChange:o=>n("cnpj",o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"00.000.000/0000-00"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CEP"}),a.jsx("input",{type:"text",value:t.cliente.cep,onChange:o=>n("cep",o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"00000-000"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Endereço"}),a.jsx("input",{type:"text",value:t.cliente.endereco,onChange:o=>n("endereco",o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Rua, número, bairro - cidade"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone"}),a.jsx("input",{type:"text",value:t.cliente.telefone,onChange:o=>n("telefone",o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"(XX) XXXXX-XXXX"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-mail"}),a.jsx("input",{type:"email",value:t.cliente.email,onChange:o=>n("email",o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"contato@empresa.com"})]})]})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx(le,{className:"w-5 h-5 text-gray-600"}),a.jsx("h4",{className:"text-md font-semibold text-gray-900",children:"Produtos"})]}),t.produtos.length>0?a.jsx("div",{className:"space-y-4",children:t.produtos.map((o,i)=>a.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Produto"}),a.jsx("input",{type:"text",value:o.nome,onChange:l=>s(i,"nome",l.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantidade"}),a.jsx("input",{type:"number",step:"0.001",value:o.quantidade,onChange:l=>s(i,"quantidade",parseFloat(l.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unidade"}),a.jsxs("select",{value:o.unidade,onChange:l=>s(i,"unidade",l.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"MIL",children:"MIL"}),a.jsx("option",{value:"KG",children:"KG"}),a.jsx("option",{value:"UND",children:"UND"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Máquina Sugerida"}),a.jsxs("select",{value:o.maquinaSugerida||"",onChange:l=>s(i,"maquinaSugerida",l.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Selecionar máquina"}),Wm.map(l=>a.jsxs("option",{value:l.nome,children:[l.nome," ",l.tipo==="especial"&&"(Especial)"]},l.id))]})]})]})},i))}):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(le,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{children:"Nenhum produto adicionado"}),a.jsx("p",{className:"text-sm",children:"Capture uma ordem para extrair os produtos automaticamente"})]})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observações"}),a.jsx("textarea",{value:t.observacoes,onChange:o=>e({observacoes:o.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Observações adicionais sobre o pedido..."})]}),r&&a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsx("p",{className:"text-sm text-green-700",children:"✅ Dados extraídos automaticamente da ordem de produção. Revise as informações antes de salvar."})})]})},Zw=()=>{const{formData:t,cameraState:e,formState:r,processedData:n,videoRef:s,canvasRef:o,updateFormData:i,activateCamera:l,captureImage:c,uploadImage:d,savePedido:u,resetProcess:h}=Kw(),p=t.numeroOrdem&&t.cliente.nomeFantasia&&t.produtos.length>0;return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Novo Pedido"}),a.jsx("p",{className:"text-gray-600",children:"Capture uma ordem de produção para criar um novo pedido"})]}),r.hasExtractedData&&a.jsxs("div",{className:"flex items-center space-x-2 bg-green-100 px-4 py-2 rounded-lg",children:[a.jsx(M0,{className:"w-5 h-5 text-green-600"}),a.jsxs("span",{className:"text-sm font-medium text-green-800",children:["Dados extraídos: ",(n==null?void 0:n.produtos.length)||0," produtos"]})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[a.jsx(Jw,{cameraState:e,isProcessing:r.isProcessing,videoRef:s,canvasRef:o,onActivateCamera:l,onCaptureImage:c,onUploadImage:d}),a.jsx(Yw,{isProcessing:r.isProcessing,hasExtractedData:r.hasExtractedData,currentStep:r.currentStep})]}),a.jsx("div",{className:"lg:col-span-2",children:a.jsx(Xw,{formData:t,onUpdateFormData:i,hasExtractedData:r.hasExtractedData})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-end",children:[a.jsxs("button",{onClick:h,className:"flex items-center justify-center space-x-2 px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition",children:[a.jsx(nm,{className:"w-5 h-5"}),a.jsx("span",{children:"Reiniciar"})]}),a.jsxs("button",{onClick:u,disabled:!p||r.isProcessing,className:`flex items-center justify-center space-x-2 px-8 py-3 rounded-lg transition ${p&&!r.isProcessing?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[a.jsx(Lr,{className:"w-5 h-5"}),a.jsx("span",{className:"font-semibold",children:r.isProcessing?"Salvando...":"Salvar Pedido"})]})]}),!p&&a.jsx("div",{className:"mt-4 text-center",children:a.jsx("p",{className:"text-sm text-gray-600",children:"ℹ️ Preencha os campos obrigatórios: Número da ordem, Nome do cliente e pelo menos um produto"})})]}),n&&a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Resumo dos Dados Extraídos"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium text-blue-800",children:["Ordem: ",n.numeroOrdem]}),a.jsxs("p",{className:"text-blue-700",children:["Cliente: ",n.cliente.nomeFantasia]}),a.jsxs("p",{className:"text-blue-700",children:["Entrega: ",new Date(n.dataEntrega).toLocaleDateString("pt-BR")]})]}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium text-blue-800",children:["Total de Produtos: ",n.produtos.length]}),a.jsxs("p",{className:"text-blue-700",children:["Quantidade Total: ",n.quantidadeTotal.toFixed(3)," MIL"]}),a.jsxs("p",{className:"text-blue-700",children:["CNPJ: ",n.cliente.cnpj]})]})]}),a.jsx("div",{className:"mt-4",children:a.jsx("p",{className:"text-xs text-blue-600",children:"✨ Dados processados automaticamente via OCR. Revise e edite conforme necessário antes de salvar."})})]})]})},e1=({metricas:t,onFilterByStatus:e})=>{const r=[{id:"total",title:"Total Pedidos",value:t.totalPedidos,color:"blue",icon:le,borderColor:"border-blue-500",bgColor:"bg-blue-100",textColor:"text-blue-600",onClick:()=>e("todos")},{id:"producao",title:"Em Produção",value:t.emProducao,color:"green",icon:A0,borderColor:"border-green-500",bgColor:"bg-green-100",textColor:"text-green-600",onClick:()=>e("producao")},{id:"aguardando",title:"Aguardando",value:t.aguardando,color:"yellow",icon:Rn,borderColor:"border-yellow-500",bgColor:"bg-yellow-100",textColor:"text-yellow-600",onClick:()=>e("aguardando")},{id:"atrasados",title:"Atrasados",value:t.atrasados,color:"red",icon:jt,borderColor:"border-red-500",bgColor:"bg-red-100",textColor:"text-red-600",onClick:()=>e("atrasado")},{id:"urgentes",title:"Urgentes",value:t.urgentes,color:"orange",icon:am,borderColor:"border-orange-500",bgColor:"bg-orange-100",textColor:"text-orange-600",onClick:()=>e("urgente")}];return a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:r.map(n=>{const s=n.icon;return a.jsx("div",{className:`bg-white rounded-xl p-4 shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer hover:-translate-y-1 border-l-4 ${n.borderColor}`,onClick:n.onClick,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:n.title}),a.jsx("p",{className:`text-2xl font-bold ${n.textColor}`,children:n.value})]}),a.jsx("div",{className:`w-10 h-10 ${n.bgColor} rounded-lg flex items-center justify-center`,children:a.jsx(s,{className:`w-5 h-5 ${n.textColor}`})})]})},n.id)})})},t1=({filtros:t,onUpdateFiltros:e})=>a.jsx("div",{className:"bg-white rounded-xl shadow-lg p-4 mb-6",children:a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(kn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",value:t.busca,onChange:r=>e({busca:r.target.value}),placeholder:"Buscar por pedido, cliente...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs("select",{value:t.status,onChange:r=>e({status:r.target.value}),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 transition-all",children:[a.jsx("option",{value:"",children:"Todos os Status"}),a.jsx("option",{value:"producao",children:"Em Produção"}),a.jsx("option",{value:"aguardando",children:"Aguardando"}),a.jsx("option",{value:"atrasado",children:"Atrasados"}),a.jsx("option",{value:"urgente",children:"Urgentes"}),a.jsx("option",{value:"separado",children:"Separados"}),a.jsx("option",{value:"finalizado",children:"Finalizados"})]}),a.jsxs("select",{value:t.prioridade,onChange:r=>e({prioridade:r.target.value}),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 transition-all",children:[a.jsx("option",{value:"",children:"Todas Prioridades"}),a.jsx("option",{value:"urgente",children:"Urgente"}),a.jsx("option",{value:"alta",children:"Alta"}),a.jsx("option",{value:"media",children:"Média"}),a.jsx("option",{value:"baixa",children:"Baixa"})]})]})]})}),r1=({pedido:t,onSeparar:e,onVerDetalhes:r,onSepararTodos:n,onFinalizar:s,onEditar:o})=>{const i=nw(t.dataEntrega),l=i?"text-red-600 font-bold":"text-gray-600",c=u=>({urgente:"border-l-red-500",producao:"border-l-green-500",aguardando:"border-l-yellow-500",separado:"border-l-blue-500",atrasado:"border-l-red-600",finalizado:"border-l-gray-500"})[u]||"border-l-gray-500",d=u=>({urgente:"bg-red-100 text-red-800 border-red-200",alta:"bg-orange-100 text-orange-800 border-orange-200",media:"bg-yellow-100 text-yellow-800 border-yellow-200",baixa:"bg-blue-100 text-blue-800 border-blue-200"})[u]||"bg-gray-100 text-gray-800 border-gray-200";return a.jsxs("div",{className:`bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 border-l-4 ${c(t.status)}`,children:[a.jsxs("div",{className:"p-6 border-b border-gray-100",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:t.numero}),a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium border ${d(t.prioridade)}`,children:Bm(t.prioridade)})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[Re(t.quantidadeTotal)," Pacotes"]}),a.jsxs("p",{className:`text-sm ${l}`,children:["Entrega: ",Fm(t.dataEntrega),i&&" ⚠️"]})]})]}),a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("p",{className:"text-lg font-medium text-gray-800",children:t.cliente}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"text-sm font-medium text-gray-600",children:[t.progresso,"%"]}),a.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-400 h-full rounded-full transition-all duration-500",style:{width:`${t.progresso}%`}})})]})]})]}),"      ",a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"space-y-3",children:t.produtos.map((u,h)=>{const p=u.pedido-u.separado;return a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-1",children:u.nome}),a.jsx("div",{className:"text-xs text-gray-500 mb-3",children:u.unidade}),a.jsxs("div",{className:"flex flex-col gap-1 text-xs",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Pedido:"}),a.jsxs("span",{className:"font-semibold ml-2",children:[Re(u.pedido)," pacotes (",u.pedido.toLocaleString("pt-BR"),")"]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Separado:"}),a.jsxs("span",{className:"font-semibold text-blue-600 ml-2",children:[Re(u.separado)," pacotes (",u.separado.toLocaleString("pt-BR"),")"]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Pendente:"}),a.jsxs("span",{className:"font-semibold text-orange-600 ml-2",children:[Re(p)," pacotes (",p.toLocaleString("pt-BR"),")"]})]})]})]}),a.jsxs("button",{onClick:()=>e(t.id,h),disabled:p<=0&&u.separado<=0,className:`w-full flex items-center justify-center gap-2 py-3 px-4 rounded-lg font-semibold text-sm transition-all ${p<=0&&u.separado<=0?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 active:bg-blue-800"}`,title:"Gerenciar Produto (Separar/Retirar)",children:[a.jsx(G0,{className:"w-4 h-4"}),a.jsx("span",{children:"Gerenciar"})]})]},h)})})}),a.jsx("div",{className:"p-6 border-t border-gray-100 bg-gray-50 rounded-b-xl",children:a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("button",{onClick:()=>r(t),className:"w-full px-4 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 active:bg-gray-800 transition flex items-center justify-center gap-2 font-semibold",children:[a.jsx(L0,{className:"w-4 h-4"}),"Ver Detalhes"]}),a.jsxs("button",{onClick:()=>o(t),disabled:t.status==="finalizado",className:`w-full px-4 py-3 rounded-lg transition flex items-center justify-center gap-2 font-semibold ${t.status==="finalizado"?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-amber-600 text-white hover:bg-amber-700 active:bg-amber-800"}`,children:[a.jsx(Y0,{className:"w-4 h-4"}),"Editar"]})]}),a.jsxs("button",{onClick:()=>n(t.id),disabled:t.progresso===100,className:`w-full px-4 py-3 rounded-lg transition flex items-center justify-center gap-2 font-semibold ${t.progresso===100?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 active:bg-blue-800"}`,children:[a.jsx(le,{className:"w-4 h-4"}),"Separar Todos"]}),a.jsxs("button",{onClick:()=>s(t.id),disabled:t.progresso<100,className:`w-full px-4 py-3 rounded-lg transition flex items-center justify-center gap-2 font-semibold ${t.progresso<100?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700 active:bg-green-800"}`,children:[a.jsx(gt,{className:"w-4 h-4"}),"Finalizar Pedido"]})]})})]})},n1=({isOpen:t,pedido:e,produtoIndex:r,onClose:n,onConfirmSeparar:s,onConfirmRetirar:o})=>{const[i,l]=k.useState(""),[c,d]=k.useState("separar"),[u,h]=k.useState("pacotes"),{showNotification:p}=_t(),x=e&&r!==null?e.produtos[r]:null,b=x?x.pedido-x.separado:0,y=x?x.separado:0,w=c==="separar"?Math.min(b,(x==null?void 0:x.estoque)||0):y;k.useEffect(()=>{t&&(l(""),d("separar"),h("pacotes"))},[t]);const g=()=>{const m=u==="pacotes"?$x(i):Rx(i);if(!m||m<=0){p({message:"Digite uma quantidade válida!",type:"error"});return}const f=c==="separar"?b:y,v=c==="separar"?"pendente":"separado",_=u==="pacotes"?"pacotes":"unidades";if(m>f){p({message:`Quantidade maior que o ${v} em ${_}!`,type:"error"});return}c==="separar"?s(m):o(m),n()};return!t||!e||!x?null:a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm z-50 flex items-end md:items-center justify-center",children:a.jsxs("div",{className:"bg-white rounded-t-2xl md:rounded-xl shadow-2xl w-full md:max-w-md max-h-[95vh] md:max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"sticky top-0 bg-white p-4 md:p-6 border-b border-gray-200 rounded-t-2xl md:rounded-t-xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-900",children:"Gerenciar Produto"}),a.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors p-2 -m-2",children:a.jsx(rt,{className:"w-5 h-5 md:w-6 md:h-6"})})]})}),a.jsx("div",{className:"p-4 md:p-6 pb-6 md:pb-6",children:a.jsxs("div",{className:"space-y-4 md:space-y-4",children:[a.jsxs("div",{className:"bg-gray-50 p-3 md:p-4 rounded-lg",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Tipo de Operação:"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("button",{onClick:()=>{d("separar"),l("")},disabled:b<=0,className:`flex items-center justify-center gap-2 px-3 md:px-4 py-3 md:py-2 rounded-lg font-medium text-sm md:text-base transition ${c==="separar"?"bg-blue-600 text-white":b<=0?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:[a.jsx(Ds,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Separar"}),a.jsx("span",{className:"sm:hidden",children:"+"})]}),a.jsxs("button",{onClick:()=>{d("retirar"),l("")},disabled:y<=0,className:`flex items-center justify-center gap-2 px-3 md:px-4 py-3 md:py-2 rounded-lg font-medium text-sm md:text-base transition ${c==="retirar"?"bg-orange-600 text-white":y<=0?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:[a.jsx(V0,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Retirar"}),a.jsx("span",{className:"sm:hidden",children:"-"})]})]})]}),a.jsxs("div",{className:"bg-gray-50 p-3 md:p-4 rounded-lg",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Unidade de Medida:"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("button",{onClick:()=>{h("pacotes"),l("")},className:`flex items-center justify-center gap-2 px-3 md:px-4 py-3 md:py-2 rounded-lg font-medium text-sm md:text-base transition ${u==="pacotes"?c==="separar"?"bg-blue-600 text-white":"bg-orange-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:[a.jsx(le,{className:"w-4 h-4"}),a.jsx("span",{children:"Pacotes"})]}),a.jsxs("button",{onClick:()=>{h("unidades"),l("")},className:`flex items-center justify-center gap-2 px-3 md:px-4 py-3 md:py-2 rounded-lg font-medium text-sm md:text-base transition ${u==="unidades"?c==="separar"?"bg-blue-600 text-white":"bg-orange-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:[a.jsx(em,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Unidades"}),a.jsx("span",{className:"sm:hidden",children:"Un."})]})]})]}),a.jsxs("div",{className:`p-3 md:p-4 rounded-lg ${c==="separar"?"bg-blue-50":"bg-orange-50"}`,children:[a.jsx("h4",{className:`font-semibold text-sm md:text-base ${c==="separar"?"text-blue-900":"text-orange-900"}`,children:x.nome}),a.jsxs("p",{className:`text-xs md:text-sm ${c==="separar"?"text-blue-700":"text-orange-700"} mt-1`,children:["Pedido: ",e.numero," - ",e.cliente]}),a.jsxs("div",{className:"mt-2 space-y-1",children:[c==="separar"?a.jsxs("div",{className:`text-xs md:text-sm ${c==="separar"?"text-blue-600":"text-orange-600"}`,children:[a.jsx("strong",{children:"Pendente:"}),a.jsxs("div",{className:"mt-1",children:[a.jsxs("span",{className:"text-base md:text-lg font-bold",children:[Re(b)," pacotes"]}),a.jsxs("span",{className:"text-xs md:text-sm ml-2",children:["(",b.toLocaleString("pt-BR"),")"]})]})]}):a.jsxs("div",{className:`text-xs md:text-sm ${c==="separar"?"text-blue-600":"text-orange-600"}`,children:[a.jsx("strong",{children:"Separado:"}),a.jsxs("div",{className:"mt-1",children:[a.jsxs("span",{className:"text-base md:text-lg font-bold",children:[Re(y)," pacotes"]}),a.jsxs("span",{className:"text-xs md:text-sm ml-2",children:["(",y.toLocaleString("pt-BR"),")"]})]})]}),u==="pacotes"&&a.jsx("p",{className:`text-xs ${c==="separar"?"text-blue-500":"text-orange-500"}`,children:"💡 1 pacote = 500 unidades"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Quantidade a ",c==="separar"?"Separar":"Retirar"," (",u,"):"]}),a.jsx("input",{type:"number",value:i,onChange:m=>l(m.target.value),step:u==="pacotes"?"0.1":"1",max:u==="pacotes"?Ix(w):Ax(w),className:`w-full px-4 py-4 md:py-3 text-lg md:text-base border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent ${c==="separar"?"focus:ring-blue-500":"focus:ring-orange-500"}`,placeholder:u==="pacotes"?"Ex: 4 ou 2.5":"Ex: 2000 ou 1.5"}),a.jsxs("div",{className:"mt-2 space-y-1",children:[u==="unidades"&&a.jsx("p",{className:"text-xs text-gray-500",children:"💡 Digite em milhares: 2 = 2000 unidades, 1.5 = 1500 unidades"}),a.jsx("p",{className:"text-xs text-gray-400",children:u==="pacotes"?"Número de pacotes":"Em milhares de unidades"})]})]}),a.jsxs("div",{className:"flex flex-col gap-3 pt-2 md:pt-4",children:[a.jsxs("button",{onClick:g,className:`w-full py-4 md:py-3 px-4 rounded-lg transition font-semibold text-base md:text-sm text-white ${c==="separar"?"bg-blue-600 hover:bg-blue-700 active:bg-blue-800":"bg-orange-600 hover:bg-orange-700 active:bg-orange-800"}`,children:[a.jsxs("span",{className:"hidden md:inline",children:["Confirmar ",c==="separar"?"Separação":"Retirada"," em ",u==="pacotes"?"Pacotes":"Unidades"]}),a.jsx("span",{className:"md:hidden",children:c==="separar"?"Confirmar Separação":"Confirmar Retirada"})]}),a.jsx("button",{onClick:n,className:"w-full bg-gray-300 text-gray-700 py-4 md:py-3 px-4 rounded-lg hover:bg-gray-400 active:bg-gray-500 transition font-semibold text-base md:text-sm",children:"Cancelar"})]})]})})]})})},s1=({isOpen:t,pedido:e,onClose:r})=>{if(!t||!e)return null;const n=s=>({urgente:"bg-red-100 text-red-800 border-red-200",alta:"bg-orange-100 text-orange-800 border-orange-200",media:"bg-yellow-100 text-yellow-800 border-yellow-200",baixa:"bg-blue-100 text-blue-800 border-blue-200"})[s]||"bg-gray-100 text-gray-800 border-gray-200";return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm z-50 flex items-end md:items-center justify-center",children:a.jsxs("div",{className:"bg-white rounded-t-xl md:rounded-xl shadow-2xl w-full md:max-w-4xl max-h-[95vh] overflow-y-auto",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Detalhes - ",e.id]}),a.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(rt,{className:"w-6 h-6"})})]})}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold mb-3",children:"Informações do Pedido"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Código:"})," ",e.numero]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Cliente:"})," ",e.cliente]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Status:"}),a.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs font-medium border ${n(e.prioridade)}`,children:rw(e.status)})]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Prioridade:"}),a.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs font-medium border ${n(e.prioridade)}`,children:Bm(e.prioridade)})]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Data de Entrega:"})," ",Fm(e.dataEntrega)]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Tipo:"})," ",e.tipo]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Progresso:"})," ",e.progresso,"%"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Quantidade Total:"})," ",Re(e.quantidadeTotal)," Pacotes"]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold mb-3",children:"Recursos Sugeridos"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Máquina Sugerida:"})," ",e.maquinaSugerida]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Bobina Disponível:"})," ",e.bobinaDisponivel]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Observações:"})," ",e.observacoes]})]})]})]}),a.jsxs("div",{className:"mt-6",children:[a.jsx("h4",{className:"text-lg font-semibold mb-3",children:"Histórico de Separação"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full border border-gray-200 rounded-lg",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Produto"}),a.jsx("th",{className:"px-4 py-2 text-center text-sm font-medium text-gray-700",children:"Pedido"}),a.jsx("th",{className:"px-4 py-2 text-center text-sm font-medium text-gray-700",children:"Separado"}),a.jsx("th",{className:"px-4 py-2 text-center text-sm font-medium text-gray-700",children:"Pendente"}),a.jsx("th",{className:"px-4 py-2 text-center text-sm font-medium text-gray-700",children:"% Completo"})]})}),a.jsx("tbody",{children:e.produtos.map((s,o)=>a.jsxs("tr",{className:"border-t",children:[a.jsx("td",{className:"px-4 py-2 text-sm",children:s.nome}),a.jsxs("td",{className:"px-4 py-2 text-center text-sm",children:[Re(s.pedido)," pacotes",a.jsx("br",{}),"(",s.pedido.toLocaleString("pt-BR"),")"]}),a.jsxs("td",{className:"px-4 py-2 text-center text-sm font-medium text-blue-600",children:[Re(s.separado)," pacotes",a.jsx("br",{}),"(",s.separado.toLocaleString("pt-BR"),")"]}),a.jsxs("td",{className:"px-4 py-2 text-center text-sm font-medium text-orange-600",children:[Re(s.pedido-s.separado)," pacotes",a.jsx("br",{}),"(",(s.pedido-s.separado).toLocaleString("pt-BR"),")"]}),a.jsxs("td",{className:"px-4 py-2 text-center text-sm font-medium",children:[Math.round(s.separado/s.pedido*100),"%"]})]},o))})]})})]})]})]})})},ku=t=>{switch(t){case"aguardando":return"pendente";case"producao":return"producao";case"finalizado":return"finalizado";case"separado":return"finalizado";case"atrasado":return"pendente";case"urgente":return"pendente";default:return"pendente"}},a1=({isOpen:t,pedido:e,onClose:r,onSave:n})=>{const[s,o]=k.useState({customer_name:"",priority:"normal",delivery_date:"",notes:"",status:"aguardando_producao"}),[i,l]=k.useState([]),[c,d]=k.useState([]),[u,h]=k.useState(""),[p,x]=k.useState([]),[b,y]=k.useState(!1),[w,g]=k.useState(!1),[m,f]=k.useState(null),[v,_]=k.useState("info");k.useEffect(()=>{if(t&&e){o({customer_name:e.cliente,priority:N(e.prioridade),delivery_date:e.dataEntrega,notes:e.observacoes||"",status:j(e.status)});const S=e.produtos.map((q,B)=>({id:`existing_${B}`,product_id:`product_${B}`,product_name:q.nome,quantity:q.pedido}));l(S),E()}},[t,e]);const E=async()=>{g(!0),f(null);try{console.log("🔍 LOADING ALL PRODUCTS - Start");const S=await Uc({active:!0},1,300);if(console.log("🔍 LOADING ALL PRODUCTS - Result:",S),S.success&&S.data&&S.data.items){const q=Array.isArray(S.data.items)?S.data.items:[];console.log("🔍 LOADING ALL PRODUCTS - Products found:",q.length),d(q),x(q)}else console.warn("⚠️ No products data:",S),d([]),x([])}catch(S){console.error("❌ Error loading products:",S),f("Erro ao carregar produtos"),d([]),x([])}finally{g(!1)}};k.useEffect(()=>{if(!u.trim()){x(c);return}const S=c.filter(q=>{var B,R,T;return((B=q.name)==null?void 0:B.toLowerCase().includes(u.toLowerCase()))||((R=q.soropel_code)==null?void 0:R.toString().includes(u))||((T=q.category_name)==null?void 0:T.toLowerCase().includes(u.toLowerCase()))||`${q.weight_value}${q.weight_unit}`.toLowerCase().includes(u.toLowerCase())});x(S)},[u,c]);const N=S=>{switch(S){case"urgente":return"urgente";case"alta":return"especial";default:return"normal"}},j=S=>{switch(S){case"producao":return"em_producao";case"separado":return"produzido";case"finalizado":return"entrega_completa";default:return"aguardando_producao"}},C=(S,q)=>{o(B=>({...B,[S]:q}))},M=S=>{const q={product_id:S.id,product_name:S.name,quantity:1e3,isNew:!0};l(B=>[...B,q])},$=(S,q)=>{l(B=>B.map((R,T)=>T===S?{...R,quantity:q}:R))},U=S=>{l(q=>q.filter((B,R)=>R!==S))},F=async()=>{if(e){y(!0),f(null);try{console.log("🔍 DEBUG - Dados sendo enviados para updateOrder:",{pedidoId:e.id,dadosUpdate:{priority:s.priority,delivery_date:s.delivery_date,observations:s.notes,status:ku(s.status)}});const S=await lw(e.id,{priority:s.priority,delivery_date:s.delivery_date,observations:s.notes,status:ku(s.status)});if(console.log("🔍 DEBUG - Resultado do updateOrder:",S),S.error)throw new Error(S.error||"Erro ao atualizar pedido");n(),r()}catch(S){f(S instanceof Error?S.message:"Erro desconhecido")}finally{y(!1)}}};return!t||!e?null:a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm z-50 flex items-end md:items-center justify-center",children:a.jsxs("div",{className:"bg-white rounded-t-xl md:rounded-xl shadow-2xl w-full md:max-w-5xl max-h-[95vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 bg-white",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Editar Pedido"}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Código: ",e.id]})]}),a.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(rt,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"flex mt-4 space-x-1 bg-gray-100 rounded-lg p-1",children:[a.jsxs("button",{onClick:()=>_("info"),className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-colors ${v==="info"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[a.jsx(En,{className:"w-4 h-4 inline mr-2"}),"Informações"]}),a.jsxs("button",{onClick:()=>_("products"),className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-colors ${v==="products"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[a.jsx(le,{className:"w-4 h-4 inline mr-2"}),"Produtos (",i.length,")"]})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[v==="info"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Cliente *"}),a.jsx("input",{type:"text",value:s.customer_name,onChange:S=>C("customer_name",S.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Digite o nome do cliente"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Entrega *"}),a.jsx("input",{type:"date",value:s.delivery_date,onChange:S=>C("delivery_date",S.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prioridade"}),a.jsxs("select",{value:s.priority,onChange:S=>C("priority",S.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"normal",children:"Normal"}),a.jsx("option",{value:"especial",children:"Especial"}),a.jsx("option",{value:"urgente",children:"Urgente"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),a.jsxs("select",{value:s.status,onChange:S=>C("status",S.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"aguardando_producao",children:"Aguardando Produção"}),a.jsx("option",{value:"em_producao",children:"Em Produção"}),a.jsx("option",{value:"em_andamento",children:"Em Andamento"}),a.jsx("option",{value:"produzido",children:"Produzido"}),a.jsx("option",{value:"entrega_completa",children:"Entrega Completa"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observações"}),a.jsx("textarea",{value:s.notes,onChange:S=>C("notes",S.target.value),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Observações sobre o pedido..."})]})]}),v==="products"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Adicionar Produto"}),a.jsxs("div",{className:"relative",children:[a.jsx(kn,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Buscar produtos por nome, código ou peso...",value:u,onChange:S=>h(S.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),w&&a.jsx("div",{className:"absolute right-3 top-3",children:a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})})]}),a.jsx("div",{className:"mt-2 max-h-40 overflow-y-auto border border-gray-200 rounded-lg bg-white",children:w?a.jsxs("div",{className:"p-4 text-center text-gray-500",children:[a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto mb-2"}),"Carregando produtos..."]}):p.length>0?a.jsxs(a.Fragment,{children:[u&&a.jsxs("div",{className:"p-2 bg-gray-50 text-xs text-gray-600 border-b",children:[p.length,' produto(s) encontrado(s) para "',u,'"']}),p.map(S=>a.jsxs("button",{onClick:()=>M(S),className:"w-full px-4 py-2 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 transition-colors",children:[a.jsx("div",{className:"font-medium text-sm",children:S.name}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Código: ",S.soropel_code]})]},S.id))]}):u?a.jsxs("div",{className:"p-4 text-center text-gray-500",children:['Nenhum produto encontrado para "',u,'"']}):a.jsx("div",{className:"p-4 text-center text-gray-500",children:"Digite para buscar produtos"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Produtos do Pedido"}),a.jsxs("div",{className:"space-y-3",children:[i.map((S,q)=>a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-sm",children:S.product_name}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[S.isNew&&a.jsx("span",{className:"text-green-600 font-medium",children:"NOVO • "}),"Quantidade: ",S.quantity.toLocaleString()," unidades"]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"number",value:S.quantity,onChange:B=>$(q,parseInt(B.target.value)||0),className:"w-24 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0"}),a.jsx("button",{onClick:()=>U(q),className:"p-1 text-red-500 hover:text-red-700 transition-colors",children:a.jsx(Ro,{className:"w-4 h-4"})})]})]},q)),i.length===0&&a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(le,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),a.jsx("p",{children:"Nenhum produto adicionado"})]})]})]})]})]}),m&&a.jsx("div",{className:"px-6 py-2",children:a.jsxs("div",{className:"flex items-center space-x-2 text-red-600 bg-red-50 p-3 rounded-lg",children:[a.jsx(Vt,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:m})]})}),a.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:justify-end",children:[a.jsx("button",{onClick:r,disabled:b,className:"px-6 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancelar"}),a.jsx("button",{onClick:F,disabled:b||!s.customer_name.trim(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:b?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Salvando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Lr,{className:"w-4 h-4 mr-2"}),"Salvar Alterações"]})})]})})]})})},o1=()=>{var q;const{pedidos:t,metricas:e,filtros:r,separacaoModal:n,detalhesModal:s,editarModal:o,isLoading:i,loadPedidos:l,updateFiltros:c,filtrarPedidos:d,filterByStatus:u,openSeparacaoModal:h,closeSeparacaoModal:p,openDetalhesModal:x,closeDetalhesModal:b,openEditarModal:y,closeEditarModal:w,separarProduto:g,retirarProduto:m,separarTodosProdutos:f,finalizarPedido:v}=uw(),{showNotification:_}=_t();k.useEffect(()=>{l()},[l]);const E=d(),N=(B,R)=>{h(B,R)},j=async B=>{if(n.pedidoId&&n.produtoIndex!==null)try{await g(n.pedidoId,n.produtoIndex,B),_({message:"✅ Produto separado com sucesso!",type:"success"})}catch{_({message:"❌ Erro ao separar produto. Tente novamente.",type:"error"})}},C=async B=>{if(n.pedidoId&&n.produtoIndex!==null)try{await m(n.pedidoId,n.produtoIndex,B),_({message:"✅ Produto retirado com sucesso!",type:"success"})}catch{_({message:"❌ Erro ao retirar produto. Tente novamente.",type:"error"})}},M=B=>{f(B)},$=B=>{window.confirm(`Tem certeza que deseja finalizar o pedido ${B}?`)&&v(B)},U=B=>{y(B)},F=()=>{l(),w()},S=()=>n.pedidoId&&t.find(B=>B.id===n.pedidoId)||null;return i?a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Gestão de Pedidos"}),a.jsx("p",{className:"text-gray-600",children:"Controle de separação e produção"})]}),a.jsx(e1,{metricas:e,onFilterByStatus:u}),a.jsx(t1,{filtros:r,onUpdateFiltros:c}),a.jsx("div",{className:"space-y-4",children:E.length===0?a.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:a.jsx("p",{className:"text-gray-500 text-lg",children:"Nenhum pedido encontrado"})}):E.map(B=>a.jsx(r1,{pedido:B,onSeparar:N,onVerDetalhes:x,onSepararTodos:M,onFinalizar:$,onEditar:U},B.id))}),a.jsx(n1,{isOpen:n.isOpen,pedido:S(),produtoIndex:n.produtoIndex,onClose:p,onConfirmSeparar:j,onConfirmRetirar:C}),a.jsx(s1,{isOpen:s.isOpen,pedido:s.pedido,onClose:b}),a.jsx(a1,{isOpen:o.isOpen,pedido:o.pedido,onClose:w,onSave:F},((q=o.pedido)==null?void 0:q.id)||"modal-editar")]})},i1=({machine:t,onToggleStatus:e,onOpenConfig:r})=>{const s=(h=>({active:{dotClass:"bg-green-500",textClass:"text-green-600",bgClass:"status-online",buttonClass:"bg-red-600 hover:bg-red-700 text-white",buttonIcon:Ac,buttonText:"PAUSAR"},stopped:{dotClass:"bg-red-500",textClass:"text-red-600",bgClass:"status-offline",buttonClass:"bg-green-600 hover:bg-green-700 text-white",buttonIcon:uo,buttonText:"INICIAR"},maintenance:{dotClass:"bg-yellow-500",textClass:"text-yellow-600",bgClass:"status-maintenance",buttonClass:"bg-gray-300 text-gray-500 cursor-not-allowed",buttonIcon:$o,buttonText:"MANUTENÇÃO"},waiting:{dotClass:"bg-gray-500",textClass:"text-gray-600",bgClass:"status-idle",buttonClass:"bg-blue-600 hover:bg-blue-700 text-white",buttonIcon:uo,buttonText:"INICIAR"}})[h])(t.status),o=s.buttonIcon,i=h=>h>=80?"bg-green-600":h>=50?"bg-yellow-600":"bg-red-600",l=h=>h>=90?"text-green-600":h>=70?"text-yellow-600":"text-red-600",c=()=>{t.status!=="maintenance"&&e(t.id,t.status)},d=h=>new Intl.NumberFormat("pt-BR").format(h),u=h=>({no_print:"Sem Impressão",with_print:"Com Impressão",special:"Especial"})[h]||"Padrão";return a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-shadow duration-300",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:I("w-3 h-3 rounded-full",s.dotClass)}),a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t.name})]}),a.jsx("div",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:u(t.type)})]}),a.jsxs("div",{className:I("inline-block px-3 py-1 rounded text-xs font-medium",s.bgClass),children:[t.status==="active"&&"ATIVA",t.status==="stopped"&&"PARADA",t.status==="maintenance"&&"MANUTENÇÃO",t.status==="waiting"&&"AGUARDANDO"]})]}),a.jsxs("div",{className:"p-6",children:[t.bobina&&a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(le,{className:"w-4 h-4 text-blue-600"}),a.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Bobina Atual:"})]}),a.jsxs("div",{className:"bg-blue-50 p-3 rounded border border-blue-200",children:[a.jsx("div",{className:"font-semibold text-gray-800",children:t.bobina.numero}),a.jsxs("div",{className:"text-sm text-gray-600",children:[t.bobina.tipo," • ",t.bobina.peso,"kg"]})]})]}),t.plannedOrders&&t.plannedOrders.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(Sn,{className:"w-4 h-4 text-purple-600"}),a.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Planejamento Semanal:"})]}),a.jsxs("div",{className:"bg-purple-50 p-3 rounded border border-purple-200 space-y-2",children:[t.plannedOrders.slice(0,3).map((h,p)=>a.jsxs("div",{className:"flex justify-between items-center text-xs",children:[a.jsxs("div",{children:[a.jsxs("span",{className:"font-medium",children:["#",h.order_number]}),a.jsxs("span",{className:"text-gray-600 ml-1",children:["- ",h.client_name]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"font-medium",children:[h.quantity,"un"]}),a.jsx("div",{className:I("text-xs",h.days_until_delivery<=3?"text-red-600":"text-gray-500"),children:h.delivery_date})]})]},h.order_id)),t.plannedOrders.length>3&&a.jsxs("div",{className:"text-xs text-gray-500 text-center pt-1 border-t border-purple-200",children:["+",t.plannedOrders.length-3," pedidos adicionais"]}),a.jsxs("div",{className:"flex justify-between text-xs font-medium pt-2 border-t border-purple-200",children:[a.jsx("span",{children:"Meta Semanal:"}),a.jsxs("span",{children:[t.weeklyProgress||0,"/",t.weeklyTarget||0]})]})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(le,{className:"w-4 h-4 text-green-600"}),a.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Produto:"})]}),a.jsx("div",{className:"font-semibold text-gray-800 bg-gray-50 p-3 rounded border",children:t.currentProduct}),t.pedidoAtivo&&a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Pedido: ",t.pedidoAtivo.numero]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Progresso:"}),a.jsxs("span",{className:I("text-sm font-bold",l(t.progress)),children:[t.progress,"%"]})]}),a.jsx("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:a.jsx("div",{className:I("h-full rounded-full transition-all duration-500",i(t.progress)),style:{width:`${t.progress}%`}})}),a.jsxs("div",{className:"text-sm text-gray-600 mt-2 flex justify-between",children:[a.jsxs("span",{children:[d(t.currentProduction)," unidades"]}),a.jsxs("span",{children:["Meta: ",d(t.targetProduction)]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[a.jsx("div",{className:"bg-gray-50 p-3 rounded border",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Io,{className:"w-4 h-4 text-gray-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-600",children:"Eficiência"}),a.jsxs("p",{className:I("text-sm font-bold",l(t.efficiency)),children:[t.efficiency,"%"]})]})]})}),a.jsx("div",{className:"bg-gray-50 p-3 rounded border",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Rn,{className:"w-4 h-4 text-gray-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-600",children:"Tempo Rest."}),a.jsx("p",{className:"text-sm font-bold text-gray-800",children:t.timeRemaining})]})]})})]}),t.operator&&a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"flex items-center space-x-2 bg-gray-50 p-3 rounded border",children:[a.jsx(En,{className:"w-4 h-4 text-gray-500"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-600",children:"Operador:"}),a.jsx("span",{className:"text-sm font-semibold text-gray-800 ml-2",children:t.operator})]})]})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("button",{onClick:c,disabled:t.status==="maintenance",className:I("flex-1 flex items-center justify-center space-x-2 px-4 py-3 rounded-lg font-semibold text-sm transition-colors duration-300",s.buttonClass),children:[a.jsx(o,{className:"w-4 h-4"}),a.jsx("span",{children:s.buttonText})]}),a.jsxs("button",{onClick:()=>r(t.id),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-3 rounded-lg font-semibold text-sm transition-colors duration-300 flex items-center space-x-2",children:[a.jsx(tt,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"CONFIG"})]})]})]}),t.efficiency<70&&t.status==="active"&&a.jsx("div",{className:"absolute top-3 right-3",children:a.jsx("div",{className:"w-6 h-6 bg-yellow-100 rounded-full flex items-center justify-center border border-yellow-300",children:a.jsx(jt,{className:"w-3 h-3 text-yellow-600"})})})]})};class l1{isSupabaseAvailable(){return!!O}async getWeeklyPlanningWithMachineStatus(e){if(!this.isSupabaseAvailable())return{success:!1,error:"Supabase não disponível"};try{console.log("Carregando planejamento integrado para semana:",e);const{data:r,error:n}=await O.from("weekly_planning").select(`
          *,
          machines(
            id,
            machine_number,
            name,
            type,
            status,
            capacity_per_hour
          )
        `).eq("week_start_date",e);if(n)throw new Error(`Erro ao buscar planejamentos: ${n.message}`);const{data:s,error:o}=await O.from("orders").select(`
          id,
          order_number,
          priority,
          delivery_date,
          status,
          customer:customers(name),
          order_items(
            id,
            quantity,
            progress_percentage,
            planned_machine_id,
            product:products(name, soropel_code)
          )
        `).in("status",["aguardando_producao","em_producao"]).order("delivery_date",{ascending:!0});if(o)throw new Error(`Erro ao buscar pedidos: ${o.message}`);const{data:i,error:l}=await O.from("machines").select(`
          *,
          current_bobina:bobinas(reel_number, paper_type),
          machine_status(efficiency_current, progress_percentage)
        `).eq("active",!0).order("machine_number");if(l)throw new Error(`Erro ao buscar máquinas: ${l.message}`);return{success:!0,data:this.processIntegratedData(r||[],s||[],i||[],e)}}catch(r){return console.error("Erro no planejamento integrado:",r),{success:!1,error:r instanceof Error?r.message:"Erro desconhecido"}}}processIntegratedData(e,r,n,s){const o=r.flatMap(d=>d.order_items.map(u=>{var h,p,x,b,y,w,g;return{id:u.id,order_number:d.order_number,client_id:((h=d.customer)==null?void 0:h.id)||"",client_name:((p=d.customer)==null?void 0:p.name)||"Cliente não identificado",product_id:((x=u.product)==null?void 0:x.id)||"",product_name:((b=u.product)==null?void 0:b.name)||"Produto",product_code:((y=u.product)==null?void 0:y.soropel_code)||0,quantity:u.quantity,priority:d.priority,delivery_date:d.delivery_date,status:this.mapOrderStatus(d.status),estimated_hours:this.calculateEstimatedHours(u.quantity,(w=u.product)==null?void 0:w.name),machine_compatibility:this.getMachineCompatibility((g=u.product)==null?void 0:g.name),is_planned:!!u.planned_machine_id,planned_machine_id:u.planned_machine_id,days_until_delivery:this.calculateDaysUntilDelivery(d.delivery_date)}})),i=n.map(d=>{var p,x,b,y;const u=e.find(w=>w.machine_id===d.id),h=o.filter(w=>w.planned_machine_id===d.id);return{id:d.id,machine_number:d.machine_number,name:d.name,type:this.mapMachineType(d.type),status:this.mapMachineStatus(d.status),currentProduct:d.current_product,currentProgress:((x=(p=d.machine_status)==null?void 0:p[0])==null?void 0:x.progress_percentage)||0,efficiency:((y=(b=d.machine_status)==null?void 0:b[0])==null?void 0:y.efficiency_current)||0,weeklyPlanning:u,plannedOrders:h.map(this.mapToPlannedOrderItem),weeklyTarget:(u==null?void 0:u.total_planned_quantity)||0,weeklyProgress:this.calculateWeeklyProgress(h),capacity_per_hour:375,utilization_percentage:this.calculateUtilization(h,375),on_schedule:this.isOnSchedule(h),alerts:this.generateMachineAlerts(d,h)}}),l=e.map(d=>({...d,planned_orders:o.filter(u=>u.planned_machine_id===d.machine_id).map(this.mapToPlannedOrderItem)})),c=this.calculateWeekMetrics(i,s);return{planning:l,machines:i,availableOrders:o.filter(d=>!d.is_planned),metrics:c}}async moveOrderBetweenMachines(e,r,n){if(!this.isSupabaseAvailable())return{success:!1,error:"Supabase não disponível"};try{console.log(`Movendo pedido ${e} para máquina ${n}`);const{error:s}=await O.from("order_items").update({planned_machine_id:n,updated_at:new Date().toISOString()}).eq("id",e);if(s)throw new Error(`Erro ao atualizar pedido: ${s.message}`);return await this.updateWeeklyPlanningTotals(n),r&&await this.updateWeeklyPlanningTotals(r),console.log("Pedido movido com sucesso"),{success:!0}}catch(s){return console.error("Erro ao mover pedido:",s),{success:!1,error:s instanceof Error?s.message:"Erro desconhecido"}}}async savePlanningAndSync(e){if(!this.isSupabaseAvailable())return{success:!1,error:"Supabase não disponível"};try{console.log("Salvando planejamento semanal:",e.week_start_date);for(const r of e.machineAssignments){const{error:n}=await O.from("weekly_planning").upsert({machine_id:r.machine_id,week_start_date:e.week_start_date,week_end_date:this.calculateWeekEndDate(e.week_start_date),total_planned_quantity:r.production_goal,planned_orders:r.orders,notes:r.notes,status:"active",updated_at:new Date().toISOString()});if(n)throw new Error(`Erro ao salvar planejamento: ${n.message}`)}for(const r of e.machineAssignments)for(const n of r.orders)await O.from("order_items").update({planned_machine_id:r.machine_id,planned_start_date:e.week_start_date,updated_at:new Date().toISOString()}).eq("id",n.order_id);return console.log("Planejamento salvo e sincronizado com sucesso"),{success:!0}}catch(r){return console.error("Erro ao salvar planejamento:",r),{success:!1,error:r instanceof Error?r.message:"Erro desconhecido"}}}calculateEstimatedHours(e,r){return Math.ceil(e/100)}getMachineCompatibility(e){return[]}calculateDaysUntilDelivery(e){const r=new Date,s=new Date(e).getTime()-r.getTime();return Math.ceil(s/(1e3*60*60*24))}mapMachineType(e){return{sem_impressao:"no_print",com_impressao:"with_print",especial:"special"}[e]||"no_print"}mapMachineStatus(e){return{ativa:"active",manutencao:"maintenance",parada:"stopped"}[e]||"stopped"}mapOrderStatus(e){return{aguardando_producao:"pending",em_producao:"in_production",produzido:"completed"}[e]||"pending"}mapToPlannedOrderItem(e){return{order_id:e.id,order_number:e.order_number,product_id:e.product_id,product_name:e.product_name,product_code:e.product_code,client_id:e.client_id,client_name:e.client_name,quantity:e.quantity,completed_quantity:0,priority:e.priority,delivery_date:e.delivery_date,estimated_duration_hours:e.estimated_hours,sequence_order:1,status:"planned",progress_percentage:0}}calculateWeeklyProgress(e){if(e.length===0)return 0;const r=e.reduce((s,o)=>s+o.quantity,0),n=e.reduce((s,o)=>s+o.quantity*0,0);return r>0?n/r*100:0}calculateUtilization(e,r){const n=e.reduce((o,i)=>o+i.estimated_hours,0),s=r*8*5;return s>0?n/s*100:0}isOnSchedule(e){return e.every(r=>r.days_until_delivery>=0)}generateMachineAlerts(e,r){const n=[],s=this.calculateUtilization(r,375);s>100&&n.push({type:"overload",message:`Máquina sobrecarregada: ${s.toFixed(0)}% da capacidade`,severity:"high"});const o=r.filter(i=>i.priority==="urgente"&&i.days_until_delivery<=3);return o.length>0&&n.push({type:"urgent_order",message:`${o.length} pedido(s) urgente(s) com entrega próxima`,severity:"critical"}),n}calculateWeekMetrics(e,r){return{week_start:r,week_end:this.calculateWeekEndDate(r),machines:e.map(n=>({machine_id:n.id,planned_quantity:n.weeklyTarget,actual_quantity:0,efficiency_planned:85,efficiency_actual:n.efficiency,orders_completed:0,orders_delayed:0,utilization_hours:0})),overall:{total_planned:e.reduce((n,s)=>n+s.weeklyTarget,0),total_actual:0,efficiency_average:85,on_time_delivery_rate:95,machine_utilization_average:75}}}calculateWeekEndDate(e){const r=new Date(e),n=new Date(r);return n.setDate(r.getDate()+6),n.toISOString().split("T")[0]}async updateWeeklyPlanningTotals(e){const{data:r}=await O.from("order_items").select("quantity").eq("planned_machine_id",e),n=(r==null?void 0:r.reduce((s,o)=>s+o.quantity,0))||0;await O.from("weekly_planning").update({total_planned_quantity:n}).eq("machine_id",e)}}const Ci=new l1,c1=Qs()(Lo((t,e)=>({currentWeek:d1(new Date).toISOString().split("T")[0],weeklyPlanning:[],machines:[],availableOrders:[],metrics:null,loading:!1,error:null,dragDropData:{draggedOrder:null,draggedFromMachine:void 0,dropTargetMachine:void 0,dragOverOrder:void 0},selectedMachine:null,planningModalOpen:!1,setCurrentWeek:r=>{t({currentWeek:r}),e().loadWeeklyPlanning(r)},loadWeeklyPlanning:async r=>{t({loading:!0,error:null});try{console.log("Carregando planejamento para semana:",r);const n=await Ci.getWeeklyPlanningWithMachineStatus(r);if(n.success&&n.data)t({weeklyPlanning:n.data.planning,machines:n.data.machines,availableOrders:n.data.availableOrders,metrics:n.data.metrics,loading:!1}),console.log("Planejamento carregado:",{planning:n.data.planning.length,machines:n.data.machines.length,orders:n.data.availableOrders.length});else throw new Error(n.error||"Erro ao carregar planejamento")}catch(n){console.error("Erro ao carregar planejamento:",n),t({loading:!1,error:n instanceof Error?n.message:"Erro desconhecido"})}},moveOrderToMachine:async(r,n)=>{const o=e().availableOrders.find(i=>i.id===r);if(!o){console.error("Pedido não encontrado:",r);return}try{console.log(`Movendo pedido ${r} para máquina ${n}`);const i=await Ci.moveOrderBetweenMachines(r,o.planned_machine_id||null,n);if(i.success)t(l=>({availableOrders:l.availableOrders.filter(c=>c.id!==r),machines:l.machines.map(c=>{if(c.id===n){const d={order_id:o.id,order_number:o.order_number,client_name:o.client_name,product_name:o.product_name,quantity:o.quantity,delivery_date:o.delivery_date,priority:o.priority,days_until_delivery:o.days_until_delivery,progress_percentage:0};return{...c,plannedOrders:[...c.plannedOrders,d],weeklyTarget:c.weeklyTarget+o.quantity}}return c})})),console.log("Pedido movido com sucesso");else throw new Error(i.error)}catch(i){console.error("Erro ao mover pedido:",i),t({error:i instanceof Error?i.message:"Erro ao mover pedido"})}},savePlanningAndSync:async()=>{const r=e();try{console.log("Salvando planejamento semanal...");const n={week_start_date:r.currentWeek,machineAssignments:r.machines.map(o=>{var i;return{machine_id:o.id,orders:o.plannedOrders,production_goal:o.weeklyTarget,notes:((i=o.weeklyPlanning)==null?void 0:i.notes)||""}}),affectedMachines:r.machines.map(o=>o.id)},s=await Ci.savePlanningAndSync(n);if(s.success)console.log("Planejamento salvo e sincronizado"),await e().loadWeeklyPlanning(r.currentWeek);else throw new Error(s.error)}catch(n){console.error("Erro ao salvar planejamento:",n),t({error:n instanceof Error?n.message:"Erro ao salvar planejamento"})}},setDraggedOrder:r=>{t(n=>({dragDropData:{...n.dragDropData,draggedOrder:r}}))},setDropTarget:r=>{t(n=>({dragDropData:{...n.dragDropData,dropTargetMachine:r}}))},handleDropOrder:async(r,n)=>{await e().moveOrderToMachine(r,n),t(s=>({dragDropData:{draggedOrder:null,draggedFromMachine:void 0,dropTargetMachine:void 0,dragOverOrder:void 0}}))},setSelectedMachine:r=>t({selectedMachine:r}),openPlanningModal:()=>t({planningModalOpen:!0}),closePlanningModal:()=>t({planningModalOpen:!1}),validatePlanning:()=>{const r=e(),n=[],s=[],o=[];for(const i of r.machines){i.utilization_percentage>100&&n.push({type:"capacity_exceeded",machine_id:i.id,message:`Máquina ${i.machine_number} sobrecarregada: ${i.utilization_percentage.toFixed(0)}%`,affected_orders:i.plannedOrders.map(c=>c.order_id)});const l=i.plannedOrders.filter(c=>c.priority==="urgente"&&c.days_until_delivery<=3);l.length>0&&n.push({type:"tight_deadline",machine_id:i.id,message:`${l.length} pedido(s) urgente(s) com prazo apertado`,affected_orders:l.map(c=>c.order_id)})}return{isValid:s.length===0,warnings:n,errors:s,suggestions:o}},syncWithMachineCards:()=>{console.log("Sincronizando planejamento com cards das máquinas...")},refreshData:async()=>{const r=e();await e().loadWeeklyPlanning(r.currentWeek)},setLoading:r=>t({loading:r}),setError:r=>t({error:r})}),{name:"production-planning-store"}));function d1(t){const e=t.getDay(),r=t.getDate()-e+(e===0?-6:1);return new Date(t.setDate(r))}function Ve(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function cr(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function u1(t,e){const r=Ve(t);return isNaN(e)?cr(t,NaN):(e&&r.setDate(r.getDate()+e),r)}const Hm=6048e5,h1=864e5;let f1={};function Xs(){return f1}function Tn(t,e){var l,c,d,u;const r=Xs(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,s=Ve(t),o=s.getDay(),i=(o<n?7:0)+o-n;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}function xo(t){return Tn(t,{weekStartsOn:1})}function Vm(t){const e=Ve(t),r=e.getFullYear(),n=cr(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const s=xo(n),o=cr(t,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const i=xo(o);return e.getTime()>=s.getTime()?r+1:e.getTime()>=i.getTime()?r:r-1}function Eu(t){const e=Ve(t);return e.setHours(0,0,0,0),e}function Cu(t){const e=Ve(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function m1(t,e){const r=Eu(t),n=Eu(e),s=+r-Cu(r),o=+n-Cu(n);return Math.round((s-o)/h1)}function p1(t){const e=Vm(t),r=cr(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),xo(r)}function Gm(t,e){const r=e*7;return u1(t,r)}function g1(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function x1(t){if(!g1(t)&&typeof t!="number")return!1;const e=Ve(t);return!isNaN(Number(e))}function v1(t){const e=Ve(t),r=cr(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}function Pu(t,e){var l,c,d,u;const r=Xs(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,s=Ve(t),o=s.getDay(),i=(o<n?-7:0)+6-(o-n);return s.setDate(s.getDate()+i),s.setHours(23,59,59,999),s}const y1={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},b1=(t,e,r)=>{let n;const s=y1[t];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function gn(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const w1={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},j1={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},_1={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},N1={date:gn({formats:w1,defaultWidth:"full"}),time:gn({formats:j1,defaultWidth:"full"}),dateTime:gn({formats:_1,defaultWidth:"full"})},S1={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},k1=(t,e,r,n)=>S1[t];function vt(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):i;s=t.formattingValues[l]||t.formattingValues[i]}else{const i=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;s=t.values[l]||t.values[i]}const o=t.argumentCallback?t.argumentCallback(e):e;return s[o]}}const E1={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},C1={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},P1={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},O1={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},T1={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},M1={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},A1=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},I1={ordinalNumber:A1,era:vt({values:E1,defaultWidth:"wide"}),quarter:vt({values:C1,defaultWidth:"wide",argumentCallback:t=>t-1}),month:vt({values:P1,defaultWidth:"wide"}),day:vt({values:O1,defaultWidth:"wide"}),dayPeriod:vt({values:T1,defaultWidth:"wide",formattingValues:M1,defaultFormattingWidth:"wide"})};function yt(t){return(e,r={})=>{const n=r.width,s=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],o=e.match(s);if(!o)return null;const i=o[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?$1(l,h=>h.test(i)):R1(l,h=>h.test(i));let d;d=t.valueCallback?t.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const u=e.slice(i.length);return{value:d,rest:u}}}function R1(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function $1(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function Qm(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const s=n[0],o=e.match(t.parsePattern);if(!o)return null;let i=t.valueCallback?t.valueCallback(o[0]):o[0];i=r.valueCallback?r.valueCallback(i):i;const l=e.slice(s.length);return{value:i,rest:l}}}const D1=/^(\d+)(th|st|nd|rd)?/i,L1=/\d+/i,q1={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},z1={any:[/^b/i,/^(a|c)/i]},U1={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},B1={any:[/1/i,/2/i,/3/i,/4/i]},F1={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},W1={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},H1={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},V1={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},G1={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Q1={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},K1={ordinalNumber:Qm({matchPattern:D1,parsePattern:L1,valueCallback:t=>parseInt(t,10)}),era:yt({matchPatterns:q1,defaultMatchWidth:"wide",parsePatterns:z1,defaultParseWidth:"any"}),quarter:yt({matchPatterns:U1,defaultMatchWidth:"wide",parsePatterns:B1,defaultParseWidth:"any",valueCallback:t=>t+1}),month:yt({matchPatterns:F1,defaultMatchWidth:"wide",parsePatterns:W1,defaultParseWidth:"any"}),day:yt({matchPatterns:H1,defaultMatchWidth:"wide",parsePatterns:V1,defaultParseWidth:"any"}),dayPeriod:yt({matchPatterns:G1,defaultMatchWidth:"any",parsePatterns:Q1,defaultParseWidth:"any"})},J1={code:"en-US",formatDistance:b1,formatLong:N1,formatRelative:k1,localize:I1,match:K1,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Y1(t){const e=Ve(t);return m1(e,v1(e))+1}function X1(t){const e=Ve(t),r=+xo(e)-+p1(e);return Math.round(r/Hm)+1}function Km(t,e){var u,h,p,x;const r=Ve(t),n=r.getFullYear(),s=Xs(),o=(e==null?void 0:e.firstWeekContainsDate)??((h=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((x=(p=s.locale)==null?void 0:p.options)==null?void 0:x.firstWeekContainsDate)??1,i=cr(t,0);i.setFullYear(n+1,0,o),i.setHours(0,0,0,0);const l=Tn(i,e),c=cr(t,0);c.setFullYear(n,0,o),c.setHours(0,0,0,0);const d=Tn(c,e);return r.getTime()>=l.getTime()?n+1:r.getTime()>=d.getTime()?n:n-1}function Z1(t,e){var l,c,d,u;const r=Xs(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,s=Km(t,e),o=cr(t,0);return o.setFullYear(s,0,n),o.setHours(0,0,0,0),Tn(o,e)}function ej(t,e){const r=Ve(t),n=+Tn(r,e)-+Z1(r,e);return Math.round(n/Hm)+1}function Y(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const zt={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return Y(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):Y(r+1,2)},d(t,e){return Y(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return Y(t.getHours()%12||12,e.length)},H(t,e){return Y(t.getHours(),e.length)},m(t,e){return Y(t.getMinutes(),e.length)},s(t,e){return Y(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return Y(s,e.length)}},Gr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ou={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return zt.y(t,e)},Y:function(t,e,r,n){const s=Km(t,n),o=s>0?s:1-s;if(e==="YY"){const i=o%100;return Y(i,2)}return e==="Yo"?r.ordinalNumber(o,{unit:"year"}):Y(o,e.length)},R:function(t,e){const r=Vm(t);return Y(r,e.length)},u:function(t,e){const r=t.getFullYear();return Y(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Y(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Y(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return zt.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return Y(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const s=ej(t,n);return e==="wo"?r.ordinalNumber(s,{unit:"week"}):Y(s,e.length)},I:function(t,e,r){const n=X1(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):Y(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):zt.d(t,e)},D:function(t,e,r){const n=Y1(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Y(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const s=t.getDay(),o=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return Y(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const s=t.getDay(),o=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return Y(o,e.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return Y(s,e.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let s;switch(n===12?s=Gr.noon:n===0?s=Gr.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let s;switch(n>=17?s=Gr.evening:n>=12?s=Gr.afternoon:n>=4?s=Gr.morning:s=Gr.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return zt.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):zt.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Y(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):Y(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):zt.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):zt.s(t,e)},S:function(t,e){return zt.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return Mu(n);case"XXXX":case"XX":return jr(n);case"XXXXX":case"XXX":default:return jr(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return Mu(n);case"xxxx":case"xx":return jr(n);case"xxxxx":case"xxx":default:return jr(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Tu(n,":");case"OOOO":default:return"GMT"+jr(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Tu(n,":");case"zzzz":default:return"GMT"+jr(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return Y(n,e.length)},T:function(t,e,r){const n=t.getTime();return Y(n,e.length)}};function Tu(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Math.trunc(n/60),o=n%60;return o===0?r+String(s):r+String(s)+e+Y(o,2)}function Mu(t,e){return t%60===0?(t>0?"-":"+")+Y(Math.abs(t)/60,2):jr(t,e)}function jr(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Y(Math.trunc(n/60),2),o=Y(n%60,2);return r+s+e+o}const Au=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Jm=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},tj=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return Au(t,e);let o;switch(n){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",Au(n,e)).replace("{{time}}",Jm(s,e))},rj={p:Jm,P:tj},nj=/^D+$/,sj=/^Y+$/,aj=["D","DD","YY","YYYY"];function oj(t){return nj.test(t)}function ij(t){return sj.test(t)}function lj(t,e,r){const n=cj(t,e,r);if(console.warn(n),aj.includes(t))throw new RangeError(n)}function cj(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const dj=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,uj=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,hj=/^'([^]*?)'?$/,fj=/''/g,mj=/[a-zA-Z]/;function es(t,e,r){var u,h,p,x,b,y,w,g;const n=Xs(),s=(r==null?void 0:r.locale)??n.locale??J1,o=(r==null?void 0:r.firstWeekContainsDate)??((h=(u=r==null?void 0:r.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((x=(p=n.locale)==null?void 0:p.options)==null?void 0:x.firstWeekContainsDate)??1,i=(r==null?void 0:r.weekStartsOn)??((y=(b=r==null?void 0:r.locale)==null?void 0:b.options)==null?void 0:y.weekStartsOn)??n.weekStartsOn??((g=(w=n.locale)==null?void 0:w.options)==null?void 0:g.weekStartsOn)??0,l=Ve(t);if(!x1(l))throw new RangeError("Invalid time value");let c=e.match(uj).map(m=>{const f=m[0];if(f==="p"||f==="P"){const v=rj[f];return v(m,s.formatLong)}return m}).join("").match(dj).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const f=m[0];if(f==="'")return{isToken:!1,value:pj(m)};if(Ou[f])return{isToken:!0,value:m};if(f.match(mj))throw new RangeError("Format string contains an unescaped latin alphabet character `"+f+"`");return{isToken:!1,value:m}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const d={firstWeekContainsDate:o,weekStartsOn:i,locale:s};return c.map(m=>{if(!m.isToken)return m.value;const f=m.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&ij(f)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&oj(f))&&lj(f,e,String(t));const v=Ou[f[0]];return v(l,f,s.localize,d)}).join("")}function pj(t){const e=t.match(hj);return e?e[1].replace(fj,"'"):t}function gj(t,e){return Gm(t,-1)}const xj={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 mês",other:"cerca de {{count}} meses"},xMonths:{one:"1 mês",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},vj=(t,e,r)=>{let n;const s=xj[t];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",String(e)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"em "+n:"há "+n:n},yj={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},bj={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},wj={full:"{{date}} 'às' {{time}}",long:"{{date}} 'às' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},jj={date:gn({formats:yj,defaultWidth:"full"}),time:gn({formats:bj,defaultWidth:"full"}),dateTime:gn({formats:wj,defaultWidth:"full"})},_j={lastWeek:t=>{const e=t.getDay();return"'"+(e===0||e===6?"último":"última")+"' eeee 'às' p"},yesterday:"'ontem às' p",today:"'hoje às' p",tomorrow:"'amanhã às' p",nextWeek:"eeee 'às' p",other:"P"},Nj=(t,e,r,n)=>{const s=_j[t];return typeof s=="function"?s(e):s},Sj={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},kj={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},Ej={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},Cj={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","terça","quarta","quinta","sexta","sábado"],wide:["domingo","segunda-feira","terça-feira","quarta-feira","quinta-feira","sexta-feira","sábado"]},Pj={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"}},Oj={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},Tj=(t,e)=>{const r=Number(t);return(e==null?void 0:e.unit)==="week"?r+"ª":r+"º"},Mj={ordinalNumber:Tj,era:vt({values:Sj,defaultWidth:"wide"}),quarter:vt({values:kj,defaultWidth:"wide",argumentCallback:t=>t-1}),month:vt({values:Ej,defaultWidth:"wide"}),day:vt({values:Cj,defaultWidth:"wide"}),dayPeriod:vt({values:Pj,defaultWidth:"wide",formattingValues:Oj,defaultFormattingWidth:"wide"})},Aj=/^(\d+)[ºªo]?/i,Ij=/\d+/i,Rj={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},$j={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},Dj={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},Lj={any:[/1/i,/2/i,/3/i,/4/i]},qj={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},zj={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},Uj={narrow:/^(dom|[23456]ª?|s[aá]b)/i,short:/^(dom|[23456]ª?|s[aá]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[aá]b)/i,wide:/^(domingo|(segunda|ter[cç]a|quarta|quinta|sexta)([- ]feira)?|s[aá]bado)/i},Bj={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[aá]b/i]},Fj={narrow:/^(a|p|mn|md|(da) (manhã|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manhã|tarde|noite))/i},Wj={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manhã/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},Hj={ordinalNumber:Qm({matchPattern:Aj,parsePattern:Ij,valueCallback:t=>parseInt(t,10)}),era:yt({matchPatterns:Rj,defaultMatchWidth:"wide",parsePatterns:$j,defaultParseWidth:"any"}),quarter:yt({matchPatterns:Dj,defaultMatchWidth:"wide",parsePatterns:Lj,defaultParseWidth:"any",valueCallback:t=>t+1}),month:yt({matchPatterns:qj,defaultMatchWidth:"wide",parsePatterns:zj,defaultParseWidth:"any"}),day:yt({matchPatterns:Uj,defaultMatchWidth:"wide",parsePatterns:Bj,defaultParseWidth:"any"}),dayPeriod:yt({matchPatterns:Fj,defaultMatchWidth:"any",parsePatterns:Wj,defaultParseWidth:"any"})},Na={code:"pt-BR",formatDistance:vj,formatLong:jj,formatRelative:Nj,localize:Mj,match:Hj,options:{weekStartsOn:0,firstWeekContainsDate:1}},Vj=({isOpen:t,onClose:e})=>{const{currentWeek:r,machines:n,availableOrders:s,loading:o,error:i,dragDropData:l,setCurrentWeek:c,loadWeeklyPlanning:d,moveOrderToMachine:u,savePlanningAndSync:h,setDraggedOrder:p,handleDropOrder:x,validatePlanning:b}=c1(),[y,w]=k.useState(Tn(new Date,{weekStartsOn:1})),[g,m]=k.useState("all"),[f,v]=k.useState(!1),[_,E]=k.useState(null);k.useEffect(()=>{if(t){const R=es(y,"yyyy-MM-dd");c(R),d(R)}},[t,y]);const N=()=>{w(R=>gj(R))},j=()=>{w(R=>Gm(R,1))},C=s.filter(R=>g==="all"?!0:R.priority===g),M=(R,T)=>{p(R),T.dataTransfer.setData("application/json",JSON.stringify(R))},$=R=>{R.preventDefault()},U=async(R,T)=>{T.preventDefault();try{const z=JSON.parse(T.dataTransfer.getData("application/json"));await x(z.id,R)}catch(z){console.error("Erro no drop:",z)}},F=async()=>{v(!0);try{await h(),alert("Planejamento salvo com sucesso!"),e()}catch(R){console.error("Erro ao salvar:",R),alert("Erro ao salvar planejamento")}finally{v(!1)}},S=R=>{switch(R){case"urgente":return"text-red-600 bg-red-50 border-red-200";case"especial":return"text-orange-600 bg-orange-50 border-orange-200";case"normal":return"text-blue-600 bg-blue-50 border-blue-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},q=R=>{switch(R){case"active":return"bg-green-500";case"maintenance":return"bg-yellow-500";case"stopped":return"bg-red-500";default:return"bg-gray-400"}},B=b();return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg w-full max-w-7xl h-[90vh] flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b flex items-center justify-between bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-t-lg",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(Sn,{className:"w-8 h-8"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Planejamento Semanal de Produção"}),a.jsxs("p",{className:"text-blue-100 mt-1",children:["Semana de ",es(y,"dd 'de' MMMM",{locale:Na})," a ",es(Pu(y,{weekStartsOn:1}),"dd 'de' MMMM 'de' yyyy",{locale:Na})]})]})]}),a.jsx("button",{onClick:e,className:"hover:bg-white/20 p-2 rounded-lg transition",children:a.jsx(rt,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"p-4 border-b bg-gray-50 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:N,className:"p-2 hover:bg-gray-200 rounded-lg transition",children:a.jsx(Yf,{className:"w-5 h-5"})}),a.jsxs("span",{className:"text-lg font-semibold",children:[es(y,"dd/MM",{locale:Na})," - ",es(Pu(y,{weekStartsOn:1}),"dd/MM/yyyy",{locale:Na})]}),a.jsx("button",{onClick:j,className:"p-2 hover:bg-gray-200 rounded-lg transition",children:a.jsx(Xf,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("select",{value:g,onChange:R=>m(R.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"Todas prioridades"}),a.jsx("option",{value:"urgente",children:"Urgente"}),a.jsx("option",{value:"especial",children:"Especial"}),a.jsx("option",{value:"normal",children:"Normal"})]})})]}),a.jsxs("div",{className:"flex-1 overflow-hidden flex",children:[a.jsxs("div",{className:"w-1/3 border-r bg-gray-50 p-4 overflow-y-auto",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[a.jsx(le,{className:"w-5 h-5"}),"Pedidos Disponíveis (",C.length,")"]}),o?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"text-gray-500 mt-2",children:"Carregando pedidos..."})]}):a.jsxs("div",{className:"space-y-3",children:[C.map(R=>a.jsxs("div",{draggable:!0,onDragStart:T=>M(R,T),className:`p-3 rounded-lg border-2 cursor-move hover:shadow-md transition ${S(R.priority)}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"font-semibold",children:["#",R.order_number]}),a.jsx("p",{className:"text-sm opacity-75",children:R.client_name})]}),a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${R.priority==="urgente"?"bg-red-100 text-red-800":R.priority==="especial"?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:R.priority.toUpperCase()})]}),a.jsxs("div",{className:"text-sm space-y-1",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Produto:"})," ",R.product_name]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Quantidade:"})," ",R.quantity.toLocaleString()," un"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Entrega:"})," ",R.delivery_date]}),a.jsxs("p",{className:R.days_until_delivery<=3?"text-red-600 font-medium":"",children:[a.jsx("strong",{children:"Prazo:"})," ",R.days_until_delivery," dias"]})]})]},R.id)),C.length===0&&!o&&a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(le,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"Nenhum pedido disponível"}),a.jsx("p",{className:"text-sm",children:"com esta prioridade"})]})]})]}),a.jsxs("div",{className:"flex-1 p-4 overflow-y-auto",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[a.jsx(ho,{className:"w-5 h-5"}),"Máquinas da Semana (",n.length,")"]}),o?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"text-gray-500 mt-2",children:"Carregando máquinas..."})]}):a.jsx("div",{className:"grid grid-cols-2 gap-4",children:n.map(R=>a.jsxs("div",{className:`bg-white rounded-lg border-2 p-4 transition-all ${_===R.id?"border-blue-500 shadow-lg":"border-gray-200 hover:border-gray-300"}`,onClick:()=>E(R.id),onDragOver:$,onDrop:T=>U(R.id,T),children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${q(R.status)}`}),a.jsx("h4",{className:"font-semibold text-gray-900",children:R.name})]}),a.jsxs("span",{className:"text-sm text-gray-500",children:["#",R.machine_number]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[a.jsxs("div",{className:"bg-gray-50 p-2 rounded",children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Meta"}),a.jsx("p",{className:"text-sm font-semibold",children:(R.weeklyTarget||0).toLocaleString()})]}),a.jsxs("div",{className:"bg-gray-50 p-2 rounded",children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Eficiência"}),a.jsxs("p",{className:"text-sm font-semibold",children:[R.efficiency,"%"]})]})]}),a.jsx("div",{className:"space-y-2 min-h-[120px] border-2 border-dashed border-gray-200 rounded-lg p-2",children:R.plannedOrders.length===0?a.jsxs("div",{className:"text-center py-4 text-gray-400",children:[a.jsx(Ds,{className:"w-6 h-6 mx-auto mb-2"}),a.jsx("p",{className:"text-xs",children:"Arraste pedidos aqui"})]}):R.plannedOrders.map(T=>a.jsx("div",{className:"bg-blue-50 p-2 rounded border border-blue-200 group",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"text-xs font-medium text-blue-900",children:["#",T.order_number]}),a.jsx("p",{className:"text-xs text-blue-700",children:T.client_name}),a.jsxs("p",{className:"text-xs text-blue-600",children:[T.quantity.toLocaleString()," un"]})]}),a.jsx("button",{onClick:z=>{z.stopPropagation(),console.log("Remover pedido:",T.order_id)},className:"opacity-0 group-hover:opacity-100 transition p-1 hover:bg-red-100 rounded",children:a.jsx(Ro,{className:"w-3 h-3 text-red-600"})})]})},T.order_id))}),R.alerts&&R.alerts.length>0&&a.jsx("div",{className:"mt-3 space-y-1",children:R.alerts.map((T,z)=>a.jsxs("div",{className:`text-xs p-2 rounded flex items-center gap-1 ${T.severity==="critical"?"bg-red-100 text-red-800":T.severity==="high"?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"}`,children:[a.jsx(jt,{className:"w-3 h-3"}),T.message]},z))})]},R.id))})]})]}),a.jsxs("div",{className:"p-4 border-t bg-gray-50 flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Dica: Arraste os pedidos para as máquinas"}),B.warnings.length>0&&a.jsxs("div",{className:"flex items-center gap-1 text-orange-600",children:[a.jsx(jt,{className:"w-4 h-4"}),a.jsxs("span",{className:"text-sm",children:[B.warnings.length," alerta(s)"]})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:e,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition",children:"Cancelar"}),a.jsx("button",{onClick:F,disabled:f,className:`px-6 py-2 rounded-lg transition flex items-center gap-2 ${f?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:f?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Salvando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Lr,{className:"w-4 h-4"}),"Salvar Planejamento"]})})]})]})]})}):null};async function Gj(t){try{const{data:e,error:r}=await O.from("machine_products").select(`
        *,
        product:products(*)
      `).eq("machine_id",t).eq("active",!0);if(r)throw console.error("Erro ao buscar produtos da máquina:",r),r;return(e==null?void 0:e.map(n=>n.product).filter(Boolean))||[]}catch(e){throw console.error("Erro no getMachineProducts:",e),e}}async function Qj(){try{const{data:t,error:e}=await O.from("machines").select("id, machine_number, name").order("machine_number");if(e)throw console.error("Erro ao buscar máquinas:",e),e;if(!t)return[];const r=[];for(const n of t){const s=await Gj(n.id);r.push({machine_id:n.id,machine_number:n.machine_number,machine_name:n.name,products:s})}return r}catch(t){throw console.error("Erro no getAllMachinesProductsConfig:",t),t}}async function Kj(t,e,r="Sistema"){try{const{error:n}=await O.from("machine_products").update({active:!1}).eq("machine_id",t);if(n)throw console.error("Erro ao desativar produtos existentes:",n),n;if(e.length>0){const s=e.map(i=>({machine_id:t,product_id:i,assigned_by:r,active:!0})),{error:o}=await O.from("machine_products").upsert(s,{onConflict:"machine_id,product_id"});if(o)throw console.error("Erro ao inserir novos produtos:",o),o}console.log(`✅ Configuração da máquina ${t} salva com ${e.length} produtos`)}catch(n){throw console.error("Erro no saveMachineProductsConfig:",n),n}}async function Jj(t,e="Sistema"){try{console.log("💾 Salvando configuração completa de máquinas:",t);for(const r of t)await Kj(r.machineId,r.productIds,e);console.log("✅ Todas as configurações de máquinas foram salvas com sucesso!")}catch(r){throw console.error("Erro no saveAllMachinesProductsConfig:",r),r}}const Yj=({isOpen:t,onClose:e})=>{const[r,n]=k.useState([]),[s,o]=k.useState([]),[i,l]=k.useState(!1),[c,d]=k.useState(!1),[u,h]=k.useState(null),[p,x]=k.useState(""),[b,y]=k.useState(null),[w,g]=k.useState([{id:1,uuid:"5087712b-4725-4780-9b70-d4f50c4b6e20",name:"MÁQUINA 1",type:"no-print",assignedProducts:[],color:"border-green-500 bg-gradient-to-br from-white to-green-50",category:"SEM IMPRESSÃO"},{id:2,uuid:"32a242e8-6f72-4cad-b213-8f27f4d69969",name:"MÁQUINA 2",type:"no-print",assignedProducts:[],color:"border-green-500 bg-gradient-to-br from-white to-green-50",category:"SEM IMPRESSÃO"},{id:3,uuid:"f4301074-d6a5-4bde-8a19-9fbb9a662a9a",name:"MÁQUINA 3",type:"no-print",assignedProducts:[],color:"border-green-500 bg-gradient-to-br from-white to-green-50",category:"SEM IMPRESSÃO"},{id:4,uuid:"b96cf059-a80d-4838-9a11-5738c021669b",name:"MÁQUINA 4",type:"no-print",assignedProducts:[],color:"border-green-500 bg-gradient-to-br from-white to-green-50",category:"SEM IMPRESSÃO"},{id:5,uuid:"96f1edec-82a8-409e-ae5e-a621c63e8934",name:"MÁQUINA 5",type:"no-print",assignedProducts:[],color:"border-green-500 bg-gradient-to-br from-white to-green-50",category:"SEM IMPRESSÃO"},{id:6,uuid:"92774af0-b764-49ff-bdee-d89fdc54671e",name:"MÁQUINA 6",type:"with-print",assignedProducts:[],color:"border-blue-500 bg-gradient-to-br from-white to-blue-50",category:"COM IMPRESSÃO"},{id:7,uuid:"bf97bda8-3b7f-484e-ab43-6cc54f9a8e10",name:"MÁQUINA 7",type:"with-print",assignedProducts:[],color:"border-blue-500 bg-gradient-to-br from-white to-blue-50",category:"COM IMPRESSÃO"},{id:8,uuid:"6515d2a3-9888-440d-b0ad-808d993c842b",name:"MÁQUINA 8",type:"with-print",assignedProducts:[],color:"border-blue-500 bg-gradient-to-br from-white to-blue-50",category:"COM IMPRESSÃO"},{id:9,uuid:"944d4295-f032-4866-a4bb-94a4ae3a68ca",name:"MÁQUINA 9 ESPECIAL",type:"special",assignedProducts:[],color:"border-purple-500 bg-gradient-to-br from-white to-purple-50",category:"ESPECIAL"}]),m=async()=>{l(!0),h(null),console.log("🔍 DEBUG MODAL - Iniciando carregamento de produtos..."),console.log("VITE_SUPABASE_URL:","https://chhtllsprlqvjeivspxq.supabase.co"),console.log("VITE_ENABLE_SUPABASE:","true");try{console.log("🔍 DEBUG MODAL - Chamando productsService.getProducts...");const j=await Uc({active:!0},1,300);console.log("🔍 DEBUG MODAL - Resultado do productsService:",j),j.success&&j.data?(n(j.data.items),o(j.data.items),console.log(`✅ ${j.data.items.length} produtos carregados do Supabase`)):(h("Falha ao carregar produtos do banco de dados"),console.error("❌ Erro ao carregar produtos:",j.error))}catch(j){h("Erro de conexão ao carregar produtos"),console.error("❌ Erro ao carregar produtos:",j)}finally{l(!1)}},f=j=>{if(x(j),!j.trim()){o(r);return}const C=r.filter(M=>{var $,U,F;return(($=M.name)==null?void 0:$.toLowerCase().includes(j.toLowerCase()))||((U=M.soropel_code)==null?void 0:U.toString().includes(j))||((F=M.category_name)==null?void 0:F.toLowerCase().includes(j.toLowerCase()))||`${M.weight_value}${M.weight_unit}`.toLowerCase().includes(j.toLowerCase())});o(C)},v=(j,C)=>{g(M=>M.map($=>$.id===j?$.assignedProducts.some(F=>F.id===C.id)?(alert("Este produto já está atribuído a esta máquina!"),$):{...$,assignedProducts:[...$.assignedProducts,C]}:$)),console.log(`✅ Produto ${C.name} adicionado à Máquina ${j}`)},_=(j,C)=>{g(M=>M.map($=>$.id===j?{...$,assignedProducts:$.assignedProducts.filter(U=>U.id!==C)}:$)),console.log(`❌ Produto removido da Máquina ${j}`)},E=async()=>{d(!0),h(null);try{const j=w.map(C=>({machineId:C.uuid,productIds:C.assignedProducts.map(M=>M.id)}));await Jj(j,"Sistema - Configuração Manual"),console.log("✅ Configurações salvas com sucesso no Supabase!"),alert("✅ Configurações de produtos salvas com sucesso!"),e()}catch(j){console.error("❌ Erro ao salvar configurações:",j),h("Erro ao salvar configurações. Tente novamente."),alert("❌ Erro ao salvar configurações. Verifique o console para detalhes.")}finally{d(!1)}},N=async()=>{try{console.log("🔄 Carregando configurações de produtos das máquinas...");const j=await Qj();g(C=>C.map(M=>{const $=j.find(U=>U.machine_id===M.uuid);return{...M,assignedProducts:($==null?void 0:$.products)||[]}})),console.log("✅ Configurações carregadas:",j)}catch(j){console.error("❌ Erro ao carregar configurações:",j),h("Erro ao carregar configurações salvas")}};return k.useEffect(()=>{t&&(m(),N())},[t]),t?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-[95%] max-w-7xl h-[90%] flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b bg-gradient-to-r from-blue-50 to-purple-50 rounded-t-2xl",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(tt,{className:"w-6 h-6 text-blue-600"}),a.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Configurar Produtos das Máquinas"}),r.length>0&&a.jsxs("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-sm rounded-full font-medium",children:[r.length," produtos disponíveis"]})]}),a.jsx("button",{onClick:e,className:"p-2 hover:bg-white/50 rounded-lg transition-colors",children:a.jsx(rt,{className:"w-5 h-5 text-gray-600"})})]}),a.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[a.jsxs("div",{className:"w-1/3 border-r bg-gray-50 flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b bg-white",children:[a.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[a.jsx(le,{className:"w-4 h-4"}),"Produtos Disponíveis"]}),a.jsxs("div",{className:"relative",children:[a.jsx(kn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Buscar produtos...",value:p,onChange:j=>f(j.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[i&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Carregando produtos..."})]}),u&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Vt,{className:"w-4 h-4 text-red-500 mt-0.5"}),a.jsx("p",{className:"text-sm text-red-700",children:u})]})}),!i&&!u&&s.map(j=>a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-3 hover:shadow-md transition-shadow cursor-pointer group",onClick:()=>b&&v(b,j),children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-gray-800 text-sm line-clamp-2 group-hover:text-blue-600",children:j.name}),a.jsxs("div",{className:"flex gap-2 mt-1",children:[a.jsxs("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded font-mono",children:["#",j.soropel_code]}),j.weight_value&&j.weight_unit&&a.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded",children:[j.weight_value,j.weight_unit]})]})]}),b&&a.jsx(Ds,{className:"w-4 h-4 text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity"})]})},j.id)),!i&&!u&&s.length===0&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(le,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-gray-500",children:p?"Nenhum produto encontrado":"Nenhum produto disponível"})]})]})]}),a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b bg-white",children:[a.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[a.jsx(tt,{className:"w-4 h-4"}),"Máquinas e Produtos Atribuídos"]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Clique em uma máquina para selecioná-la, depois clique nos produtos para atribuí-los"})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:w.map(j=>a.jsxs("div",{className:`${j.color} border-2 rounded-xl p-4 transition-all cursor-pointer ${b===j.id?"ring-2 ring-blue-500 shadow-lg scale-105":"hover:shadow-md"}`,onClick:()=>y(j.id),children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-gray-800",children:j.name}),a.jsx("p",{className:"text-xs text-gray-600 font-medium",children:j.category})]}),a.jsx("div",{className:"text-right",children:a.jsx("div",{className:"w-8 h-8 bg-white/50 rounded-lg flex items-center justify-center",children:a.jsx(X0,{className:"w-4 h-4 text-gray-600"})})})]}),a.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:j.assignedProducts.length===0?a.jsxs("div",{className:"text-center py-4 text-gray-500 text-sm",children:[a.jsx(le,{className:"w-6 h-6 mx-auto mb-1 opacity-50"}),"Nenhum produto atribuído"]}):j.assignedProducts.map(C=>a.jsxs("div",{className:"bg-white/70 rounded-lg p-2 flex items-center justify-between group",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-gray-800 truncate",children:C.name}),a.jsxs("p",{className:"text-xs text-gray-600 font-mono",children:["#",C.soropel_code]})]}),a.jsx("button",{onClick:M=>{M.stopPropagation(),_(j.id,C.id)},className:"opacity-0 group-hover:opacity-100 p-1 text-red-500 hover:bg-red-50 rounded transition-all",children:a.jsx(Ro,{className:"w-3 h-3"})})]},C.id))})]},j.id))})})]})]}),a.jsxs("div",{className:"p-6 border-t bg-gray-50 rounded-b-2xl flex justify-between items-center",children:[a.jsx("div",{className:"text-sm text-gray-600",children:b?a.jsxs("span",{className:"text-blue-600 font-medium",children:["Máquina ",b," selecionada - Clique nos produtos para atribuir"]}):"Selecione uma máquina para começar a atribuir produtos"}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-600 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:E,disabled:c,className:"px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 disabled:bg-blue-400 rounded-lg transition-colors font-medium flex items-center gap-2",children:c?a.jsxs(a.Fragment,{children:[a.jsx(Pr,{className:"w-4 h-4 animate-spin"}),"Salvando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Lr,{className:"w-4 h-4"}),"Salvar Configurações"]})})]})]})]})}):null};class Xj{isSupabaseAvailable(){return!!O}async getAvailableProducts(){if(!this.isSupabaseAvailable())return{success:!1,error:"Supabase não disponível"};try{console.log("Buscando produtos disponíveis do banco...");const{data:e,error:r}=await O.from("products").select(`
          id,
          soropel_code,
          name,
          category_name,
          description,
          paper_type,
          weight_value,
          active
        `).eq("active",!0).order("name");if(r)throw new Error(`Erro ao buscar produtos: ${r.message}`);return console.log(`Produtos carregados: ${(e==null?void 0:e.length)||0}`),{success:!0,data:e||[]}}catch(e){return console.error("Erro ao buscar produtos:",e),{success:!1,error:e instanceof Error?e.message:"Erro desconhecido"}}}async getOrdersForProduct(e){if(!this.isSupabaseAvailable())return{success:!1,error:"Supabase não disponível"};try{console.log(`Buscando pedidos para produto ${e}...`);const{data:r,error:n}=await O.from("order_items").select("id, quantity, order_id").eq("product_id",e);if(n)throw new Error(`Erro ao buscar order_items: ${n.message}`);const s=[];if(r&&r.length>0)for(const o of r)try{const{data:i}=await O.from("orders").select(`
                order_number,
                priority,
                delivery_date,
                status,
                customer_id
              `).eq("id",o.order_id).in("status",["aguardando_producao","em_producao"]).single();if(i){const{data:l}=await O.from("customers").select("name").eq("id",i.customer_id).single(),{data:c}=await O.from("products").select("name").eq("id",e).single(),d=new Date(i.delivery_date),u=new Date,h=Math.ceil((d.getTime()-u.getTime())/(1e3*60*60*24));s.push({id:o.id,order_number:i.order_number,customer_name:(l==null?void 0:l.name)||"Cliente não identificado",product_name:(c==null?void 0:c.name)||"Produto",quantity:o.quantity,priority:i.priority,delivery_date:i.delivery_date,status:this.mapOrderStatus(i.status),days_until_delivery:h})}}catch(i){console.warn("Erro ao buscar dados do pedido:",o.order_id,i)}return console.log(`Pedidos encontrados: ${s.length}`),{success:!0,data:s}}catch(r){return console.error("Erro ao buscar pedidos:",r),{success:!1,error:r instanceof Error?r.message:"Erro desconhecido"}}}async getMachineConfiguration(e){var r;if(!this.isSupabaseAvailable())return{success:!1,error:"Supabase não disponível"};try{console.log(`Carregando configuração da máquina ${e}...`);const{data:n,error:s}=await O.from("machines").select(`
          id,
          machine_number,
          name,
          status,
          current_product
        `).eq("machine_number",parseInt(e)).single();if(s)throw new Error(`Erro ao buscar máquina: ${s.message}`);let o=null;try{const{data:d}=await O.from("bobinas").select("reel_number, paper_type").eq("machine_id",n.id).eq("status","em_maquina").single();o=d}catch{console.log("Bobina atual não encontrada ou múltiplas para máquina:",e)}let i=null;if(n.current_product){const{data:d}=await O.from("products").select("*").eq("name",n.current_product).single();i=d}const l=[];try{const{data:d}=await O.from("order_items").select("id, quantity, order_id, product_id").eq("planned_machine_id",n.id);if(d&&d.length>0)for(const u of d)try{const{data:h}=await O.from("orders").select(`
                  order_number,
                  priority,
                  delivery_date,
                  status,
                  customer:customers(name)
                `).eq("id",u.order_id).single(),{data:p}=await O.from("products").select("name").eq("id",u.product_id).single();if(h&&p){const x=new Date(h.delivery_date),b=new Date,y=Math.ceil((x.getTime()-b.getTime())/(1e3*60*60*24));l.push({id:u.id,order_number:h.order_number,customer_name:((r=h.customer)==null?void 0:r.name)||"Cliente não identificado",product_name:p.name,quantity:u.quantity,priority:h.priority,delivery_date:h.delivery_date,status:this.mapOrderStatus(h.status),days_until_delivery:y})}}catch(h){console.warn("Erro ao buscar dados do pedido:",u.id,h)}}catch(d){console.warn("Erro ao buscar pedidos da máquina:",d)}return{success:!0,data:{machine_id:n.id,current_product_id:i==null?void 0:i.id,current_product:i,assigned_orders:l,production_goal:3e3,efficiency_target:85,status:this.mapMachineStatus(n.status),notes:`Bobina atual: ${(o==null?void 0:o.reel_number)||"Não identificada"}`}}}catch(n){return console.error("Erro ao carregar configuração:",n),{success:!1,error:n instanceof Error?n.message:"Erro desconhecido"}}}async updateMachineProduct(e,r,n=[]){if(!this.isSupabaseAvailable())return{success:!1,error:"Supabase não disponível"};try{console.log(`Atualizando produto da máquina ${e}...`);const{data:s,error:o}=await O.from("machines").select("id").eq("machine_number",parseInt(e)).single();if(o||!s)throw new Error(`Máquina ${e} não encontrada`);const{data:i,error:l}=await O.from("products").select("name").eq("id",r).single();if(l)throw new Error(`Produto não encontrado: ${l.message}`);const{error:c}=await O.from("machines").update({current_product:i.name,updated_at:new Date().toISOString()}).eq("id",s.id);if(c)throw new Error(`Erro ao atualizar máquina: ${c.message}`);if(n.length>0){const{error:d}=await O.from("order_items").update({planned_machine_id:s.id,updated_at:new Date().toISOString()}).in("id",n);d&&console.warn("Erro ao atualizar pedidos:",d)}return await O.from("activities").insert({type:"changed",title:`Máquina ${e} - Produto Alterado`,description:`Produto alterado para: ${i.name}`,machine_id:s.id,user_name:"Sistema Configuração",metadata:{product_id:r,product_name:i.name,selected_orders_count:n.length}}),console.log("Configuração atualizada com sucesso"),{success:!0}}catch(s){return console.error("Erro ao atualizar configuração:",s),{success:!1,error:s instanceof Error?s.message:"Erro desconhecido"}}}async updateMachineStatus(e,r,n){if(!this.isSupabaseAvailable())return{success:!1,error:"Supabase não disponível"};try{console.log(`Atualizando status da máquina ${e} para ${r}...`);const{data:s,error:o}=await O.from("machines").select("id").eq("machine_number",parseInt(e)).single();if(o||!s)throw new Error(`Máquina ${e} não encontrada`);const i=this.mapStatusToDB(r),{error:l}=await O.from("machines").update({status:i,updated_at:new Date().toISOString()}).eq("id",s.id);if(l)throw new Error(`Erro ao atualizar status: ${l.message}`);return await O.from("activities").insert({type:"status_changed",title:`Máquina ${e} - Status Alterado`,description:`Status alterado para: ${r}${n?` - ${n}`:""}`,machine_id:s.id,user_name:"Sistema Configuração",metadata:{old_status:"unknown",new_status:r,reason:n}}),{success:!0}}catch(s){return console.error("Erro ao atualizar status:",s),{success:!1,error:s instanceof Error?s.message:"Erro desconhecido"}}}mapMachineStatus(e){return{ativa:"active",manutencao:"maintenance",parada:"stopped",aguardando:"waiting"}[e]||"parada"}mapStatusToDB(e){return{active:"ativa",maintenance:"manutencao",stopped:"parada",waiting:"parada"}[e]||"parada"}mapOrderStatus(e){return{aguardando_producao:"pending",em_producao:"in_production",produzido:"completed"}[e]||"pending"}calculateConfigurationMetrics(e){const r=e.assigned_orders.reduce((o,i)=>o+i.quantity,0),n=e.assigned_orders.filter(o=>o.priority==="urgente").length,s=e.assigned_orders.filter(o=>o.days_until_delivery<=3).length;return{totalOrders:e.assigned_orders.length,totalQuantity:r,urgentOrders:n,nearDeadline:s,averageDaysToDelivery:e.assigned_orders.length>0?e.assigned_orders.reduce((o,i)=>o+i.days_until_delivery,0)/e.assigned_orders.length:0,isOverloaded:r>e.production_goal,capacityUtilization:e.production_goal>0?r/e.production_goal*100:0}}}const ts=new Xj,mr=()=>O!==null,zr=()=>({error:"Supabase não está disponível. Verifique a configuração.",data:null}),Ym=async t=>{if(!mr()){let r=[{id:"1",name:"João Silva",cpf:"12345678901",phone:"(11) 99999-1111",email:"joao@soropel.com",role:"operador",shift:"manha",machine_ids:[1,2,3],active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"2",name:"Maria Santos",cpf:"23456789012",phone:"(11) 99999-2222",email:"maria@soropel.com",role:"operador",shift:"tarde",machine_ids:[4,5,6],active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"3",name:"Carlos Oliveira",cpf:"34567890123",phone:"(11) 99999-3333",email:"carlos@soropel.com",role:"supervisor",shift:"manha",machine_ids:[1,2,3,4,5,6,7,8,9],active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"4",name:"Ana Costa",cpf:"45678901234",phone:"(11) 99999-4444",email:"ana@soropel.com",role:"operador",shift:"noite",machine_ids:[7,8],active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"5",name:"Pedro Souza",cpf:"56789012345",phone:"(11) 99999-5555",email:"pedro@soropel.com",role:"tecnico",shift:"integral",machine_ids:[9],active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"6",name:"Lucia Ferreira",cpf:"67890123456",phone:"(11) 99999-6666",email:"lucia@soropel.com",role:"operador",shift:"unico",machine_ids:[1,2],active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"7",name:"Roberto Lima",cpf:"78901234567",phone:"(11) 99999-7777",email:"roberto@soropel.com",role:"manutencao",shift:"integral",machine_ids:[1,2,3,4,5,6,7,8,9],active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"8",name:"Fernanda Alves",cpf:"89012345678",phone:"(11) 99999-8888",email:"fernanda@soropel.com",role:"operador",shift:"tarde",machine_ids:[3,4,5],active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"9",name:"José Santos",cpf:"90123456789",phone:"(11) 99999-9999",email:"jose@soropel.com",role:"operador",shift:"unico",machine_ids:[6,7,8],active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}];if(t){if(t.role&&t.role!=="all"&&(r=r.filter(n=>n.role===t.role)),t.shift&&t.shift!=="all"&&(r=r.filter(n=>n.shift===t.shift)),t.active!==void 0&&(r=r.filter(n=>n.active===t.active)),t.search){const n=t.search.toLowerCase();r=r.filter(s=>s.name.toLowerCase().includes(n)||s.cpf&&s.cpf.includes(t.search))}t.machine_id&&(r=r.filter(n=>n.machine_ids&&n.machine_ids.includes(t.machine_id)))}return console.log("✅ Operadores mock encontrados:",r.length),{data:r,error:null}}try{console.log("🔍 Buscando operadores...",t);let e=O.from("operators").select("*").order("name",{ascending:!0});t&&(t.role&&(e=e.eq("role",t.role)),t.shift&&(e=e.eq("shift",t.shift)),t.active!==void 0&&(e=e.eq("active",t.active)),t.search&&(e=e.or(`name.ilike.%${t.search}%,cpf.ilike.%${t.search}%`)),t.machine_id&&(e=e.contains("machine_ids",[t.machine_id])));const{data:r,error:n}=await e;return n?(console.error("❌ Erro ao buscar operadores:",n),{error:n.message,data:null}):(console.log("✅ Operadores encontrados:",(r==null?void 0:r.length)||0),{data:r||[],error:null})}catch(e){return console.error("❌ Erro inesperado ao buscar operadores:",e),{error:"Erro inesperado ao buscar operadores",data:null}}},Zj=async t=>{if(!mr())return zr();try{console.log("🔍 Buscando operador por ID:",t);const{data:e,error:r}=await O.from("operators").select("*").eq("id",t).single();return r?(console.error("❌ Erro ao buscar operador:",r),{error:r.message,data:null}):(console.log("✅ Operador encontrado:",e==null?void 0:e.name),{data:e,error:null})}catch(e){return console.error("❌ Erro inesperado ao buscar operador:",e),{error:"Erro inesperado ao buscar operador",data:null}}},e2=async t=>{var e;if(!mr())return zr();try{if(console.log("➕ Criando novo operador:",t.name),!((e=t.name)!=null&&e.trim()))return{error:"Nome do operador é obrigatório",data:null};if(t.cpf){const{data:s}=await O.from("operators").select("id").eq("cpf",t.cpf).single();if(s)return{error:"CPF já cadastrado para outro operador",data:null}}const{data:r,error:n}=await O.from("operators").insert({...t,active:!0}).select().single();return n?(console.error("❌ Erro ao criar operador:",n),{error:n.message,data:null}):(console.log("✅ Operador criado com sucesso:",r.name),{data:r,error:null})}catch(r){return console.error("❌ Erro inesperado ao criar operador:",r),{error:"Erro inesperado ao criar operador",data:null}}},t2=async(t,e)=>{if(!mr())return zr();try{if(console.log("✏️ Atualizando operador:",t),e.cpf){const{data:s}=await O.from("operators").select("id").eq("cpf",e.cpf).neq("id",t).single();if(s)return{error:"CPF já cadastrado para outro operador",data:null}}const{data:r,error:n}=await O.from("operators").update(e).eq("id",t).select().single();return n?(console.error("❌ Erro ao atualizar operador:",n),{error:n.message,data:null}):(console.log("✅ Operador atualizado com sucesso:",r.name),{data:r,error:null})}catch(r){return console.error("❌ Erro inesperado ao atualizar operador:",r),{error:"Erro inesperado ao atualizar operador",data:null}}},r2=async t=>{if(!mr())return zr();try{console.log("🗑️ Excluindo operador:",t);const{error:e}=await O.from("operators").update({active:!1}).eq("id",t);return e?(console.error("❌ Erro ao excluir operador:",e),{error:e.message,data:null}):(console.log("✅ Operador excluído com sucesso"),{data:!0,error:null})}catch(e){return console.error("❌ Erro inesperado ao excluir operador:",e),{error:"Erro inesperado ao excluir operador",data:null}}},n2=async t=>{if(!mr())return zr();try{console.log("🔄 Reativando operador:",t);const{data:e,error:r}=await O.from("operators").update({active:!0}).eq("id",t).select().single();return r?(console.error("❌ Erro ao reativar operador:",r),{error:r.message,data:null}):(console.log("✅ Operador reativado com sucesso:",e.name),{data:e,error:null})}catch(e){return console.error("❌ Erro inesperado ao reativar operador:",e),{error:"Erro inesperado ao reativar operador",data:null}}},s2=async t=>{if(!mr())return zr();try{console.log("🔍 Buscando operadores para máquina:",t);const{data:e,error:r}=await O.from("operators").select("*").contains("machine_ids",[t]).eq("active",!0).order("name",{ascending:!0});return r?(console.error("❌ Erro ao buscar operadores da máquina:",r),{error:r.message,data:null}):(console.log("✅ Operadores encontrados para máquina:",(e==null?void 0:e.length)||0),{data:e||[],error:null})}catch(e){return console.error("❌ Erro inesperado ao buscar operadores da máquina:",e),{error:"Erro inesperado ao buscar operadores da máquina",data:null}}},a2=async()=>{if(!mr())return zr();try{console.log("📊 Buscando estatísticas dos operadores...");const{data:t,error:e}=await O.from("operators").select("role, shift, active");if(e)return console.error("❌ Erro ao buscar estatísticas:",e),{error:e.message,data:null};const r={total:(t==null?void 0:t.length)||0,active:(t==null?void 0:t.filter(n=>n.active).length)||0,inactive:(t==null?void 0:t.filter(n=>!n.active).length)||0,byRole:{},byShift:{}};return t==null||t.forEach(n=>{r.byRole[n.role]=(r.byRole[n.role]||0)+1}),t==null||t.forEach(n=>{r.byShift[n.shift]=(r.byShift[n.shift]||0)+1}),console.log("✅ Estatísticas calculadas:",r),{data:r,error:null}}catch(t){return console.error("❌ Erro inesperado ao calcular estatísticas:",t),{error:"Erro inesperado ao calcular estatísticas",data:null}}},o2=async()=>Ym({active:!0}),i2=t=>{var r;const e=[];return"name"in t&&!((r=t.name)!=null&&r.trim())&&e.push("Nome é obrigatório"),t.cpf&&!/^\d{11}$/.test(t.cpf.replace(/\D/g,""))&&e.push("CPF deve ter 11 dígitos"),t.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)&&e.push("Email inválido"),t.phone&&!/^\d{10,11}$/.test(t.phone.replace(/\D/g,""))&&e.push("Telefone deve ter 10 ou 11 dígitos"),e},xn={getAllOperators:Ym,getOperatorById:Zj,createOperator:e2,updateOperator:t2,deleteOperator:r2,reactivateOperator:n2,getOperatorsByMachine:s2,getOperatorStats:a2,getAvailableOperators:o2,validateOperatorData:i2},l2=({isOpen:t,onClose:e,machineId:r=1})=>{var z,W,K,ue,pr;const[n,s]=k.useState(!0),[o,i]=k.useState(!1),[l,c]=k.useState(null),[d,u]=k.useState(null),[h,p]=k.useState([]),[x,b]=k.useState([]),[y,w]=k.useState([]),[g,m]=k.useState(""),[f,v]=k.useState([]),[_,E]=k.useState("active"),[N,j]=k.useState(""),[C,M]=k.useState(""),[$,U]=k.useState("product");k.useEffect(()=>{t&&r&&(F(),S())},[t,r]),k.useEffect(()=>{d&&d.operator&&M(d.operator)},[d]),k.useEffect(()=>{g&&q(g)},[g]);const F=async()=>{s(!0),c(null);try{const P=await ts.getMachineConfiguration(r.toString());if(!P.success)throw new Error(P.error);u(P.data),E(P.data.status),m(P.data.current_product_id||""),v(P.data.assigned_orders.map(qe=>qe.id));const te=await ts.getAvailableProducts();if(!te.success)throw new Error(te.error);p(te.data)}catch(P){console.error("Erro ao carregar configuração:",P),c(P instanceof Error?P.message:"Erro desconhecido")}finally{s(!1)}},S=async()=>{try{const P=await xn.getAvailableOperators();P.success&&w(P.data||[])}catch(P){console.error("Erro ao carregar operadores:",P)}},q=async P=>{try{const te=await ts.getOrdersForProduct(P);te.success&&b(te.data||[])}catch(te){console.error("Erro ao carregar pedidos:",te)}},B=async()=>{if(!(!d||!g)){i(!0),c(null);try{const P=await ts.updateMachineProduct(d.machine_id,g,f);if(!P.success)throw new Error(P.error);if(_!==d.status){const te=await ts.updateMachineStatus(d.machine_id,_,_==="maintenance"?N:void 0);if(!te.success)throw new Error(te.error)}C!==d.operator&&console.log("Atualizando operador:",C),alert("Configuração salva com sucesso!"),e()}catch(P){console.error("Erro ao salvar:",P),c(P instanceof Error?P.message:"Erro ao salvar configuração")}finally{i(!1)}}},R=P=>{v(te=>te.includes(P)?te.filter(qe=>qe!==P):[...te,P])},T=P=>{switch(P){case"urgente":return"text-red-600 bg-red-50 border-red-200";case"especial":return"text-orange-600 bg-orange-50 border-orange-200";case"normal":return"text-blue-600 bg-blue-50 border-blue-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}};return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg w-full max-w-5xl h-[85vh] flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b flex items-center justify-between bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-t-lg",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(tt,{className:"w-8 h-8"}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold",children:["Configuração da Máquina ",r]}),a.jsx("p",{className:"text-blue-100 mt-1",children:d?`${((z=d.current_product)==null?void 0:z.name)||"Nenhum produto"} - ${d.assigned_orders.length} pedidos`:"Carregando..."})]})]}),a.jsx("button",{onClick:e,className:"hover:bg-white/20 p-2 rounded-lg transition",children:a.jsx(rt,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"border-b bg-gray-50",children:a.jsx("div",{className:"flex",children:[{id:"product",label:"Produto & Pedidos",icon:le},{id:"status",label:"Status & Controle",icon:Io},{id:"overview",label:"Visão Geral",icon:ho}].map(P=>a.jsxs("button",{onClick:()=>U(P.id),className:I("flex items-center gap-2 px-6 py-4 border-b-2 transition-colors",$===P.id?"border-blue-500 text-blue-600 bg-white":"border-transparent text-gray-600 hover:text-gray-900"),children:[a.jsx(P.icon,{className:"w-4 h-4"}),P.label]},P.id))})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:n?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"text-gray-500 mt-4",children:"Carregando configuração..."})]}):l?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(jt,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),a.jsx("p",{className:"text-red-600 font-medium",children:l}),a.jsx("button",{onClick:F,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Tentar Novamente"})]}):a.jsxs(a.Fragment,{children:[$==="product"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-lg font-semibold text-gray-900 mb-4",children:"Produto em Produção"}),a.jsxs("select",{value:g,onChange:P=>m(P.target.value),className:"w-full p-4 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"",children:"Selecione um produto..."}),h.map(P=>a.jsxs("option",{value:P.id,children:[P.name," (Código: ",P.soropel_code,") - ",P.category_name]},P.id))]}),g&&a.jsxs("div",{className:"mt-2 p-3 bg-blue-50 rounded-lg",children:[a.jsxs("p",{className:"text-sm text-blue-800",children:[a.jsx("strong",{children:"Produto selecionado:"})," ",(W=h.find(P=>P.id===g))==null?void 0:W.name]}),a.jsxs("p",{className:"text-sm text-blue-600",children:["Categoria: ",(K=h.find(P=>P.id===g))==null?void 0:K.category_name," | Tipo: ",((ue=h.find(P=>P.id===g))==null?void 0:ue.paper_type)||"N/A"]})]})]}),g&&x.length>0&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-lg font-semibold text-gray-900 mb-4",children:["Pedidos Disponíveis (",x.length,")"]}),a.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:x.map(P=>a.jsx("div",{className:I("p-4 border-2 rounded-lg cursor-pointer transition-all",f.includes(P.id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),onClick:()=>R(P.id),children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("input",{type:"checkbox",checked:f.includes(P.id),onChange:()=>R(P.id),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),a.jsxs("h4",{className:"font-semibold text-gray-900",children:["Pedido #",P.order_number]}),a.jsx("span",{className:I("px-2 py-1 rounded text-xs font-medium",T(P.priority)),children:P.priority.toUpperCase()})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Cliente:"})," ",P.customer_name]}),a.jsxs("div",{className:"mt-1",children:[a.jsx("p",{children:a.jsx("strong",{children:"Quantidade:"})}),a.jsxs("p",{className:"text-blue-600 font-medium ml-2",children:[Re(P.quantity)," pacotes (",P.quantity.toLocaleString("pt-BR")," unidades)"]})]})]}),a.jsxs("div",{children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Entrega:"})," ",P.delivery_date]}),a.jsxs("p",{className:P.days_until_delivery<=3?"text-red-600 font-medium":"",children:[a.jsx("strong",{children:"Prazo:"})," ",P.days_until_delivery," dias"]})]})]})]})})},P.id))}),a.jsx("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:a.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{children:["Pedidos selecionados: ",f.length]}),a.jsx("span",{className:"font-medium text-blue-600",children:(()=>{const P=x.filter(te=>f.includes(te.id)).reduce((te,qe)=>te+qe.quantity,0);return`${Re(P)} pacotes`})()})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Total em unidades:"}),a.jsxs("span",{className:"font-medium text-gray-700",children:[x.filter(P=>f.includes(P.id)).reduce((P,te)=>P+te.quantity,0).toLocaleString("pt-BR")," unidades"]})]})]})})]}),g&&x.length===0&&a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(le,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"Nenhum pedido encontrado para este produto"})]})]}),$==="status"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-lg font-semibold text-gray-900 mb-4",children:"Status da Máquina"}),a.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{value:"active",label:"Ativa",icon:uo,colorClass:"border-green-500 bg-green-50"},{value:"stopped",label:"Parada",icon:Ac,colorClass:"border-red-500 bg-red-50"},{value:"maintenance",label:"Manutenção",icon:$o,colorClass:"border-yellow-500 bg-yellow-50"},{value:"waiting",label:"Aguardando",icon:Rn,colorClass:"border-blue-500 bg-blue-50"}].map(P=>a.jsxs("div",{onClick:()=>E(P.value),className:I("p-4 border-2 rounded-lg cursor-pointer transition-all flex items-center gap-3",_===P.value?P.colorClass:"border-gray-200 hover:border-gray-300"),children:[a.jsx(P.icon,{className:"w-6 h-6"}),a.jsx("span",{className:"font-medium",children:P.label})]},P.value))})]}),_==="maintenance"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Motivo da Manutenção"}),a.jsx("textarea",{value:N,onChange:P=>j(P.target.value),placeholder:"Descreva o motivo da manutenção...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3})]})]}),$==="overview"&&d&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(le,{className:"w-5 h-5 text-blue-600"}),a.jsx("span",{className:"font-medium text-blue-900",children:"Produto Atual"})]}),a.jsx("p",{className:"text-blue-800",children:((pr=d.current_product)==null?void 0:pr.name)||"Nenhum"})]}),a.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(fo,{className:"w-5 h-5 text-green-600"}),a.jsx("span",{className:"font-medium text-green-900",children:"Pedidos Ativos"})]}),a.jsx("p",{className:"text-green-800",children:d.assigned_orders.length})]}),a.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(ho,{className:"w-5 h-5 text-purple-600"}),a.jsx("span",{className:"font-medium text-purple-900",children:"Meta Produção"})]}),a.jsxs("p",{className:"text-purple-800",children:[Re(d.production_goal),"/dia"]})]}),a.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(En,{className:"w-5 h-5 text-orange-600"}),a.jsx("span",{className:"font-medium text-orange-900",children:"Operador"})]}),a.jsxs("select",{value:C,onChange:P=>M(P.target.value),className:"w-full mt-2 p-2 text-sm border border-orange-200 rounded focus:ring-2 focus:ring-orange-500 focus:border-orange-500 bg-white",children:[a.jsx("option",{value:"",children:"Selecionar operador..."}),y.map(P=>a.jsxs("option",{value:P.name,children:[P.name," - ",P.role]},P.id))]})]})]}),d.assigned_orders.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Pedidos Atribuídos"}),a.jsx("div",{className:"space-y-3",children:d.assigned_orders.map(P=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"font-medium",children:["#",P.order_number," - ",P.customer_name]}),a.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[a.jsxs("p",{className:"font-medium text-blue-600",children:[Re(P.quantity)," pacotes"]}),a.jsxs("p",{className:"text-gray-500",children:["(",P.quantity.toLocaleString("pt-BR")," unidades)"]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-sm text-gray-600",children:["Entrega: ",P.delivery_date]}),a.jsxs("p",{className:I("text-sm font-medium",P.days_until_delivery<=3?"text-red-600":"text-gray-600"),children:[P.days_until_delivery," dias"]})]})]},P.id))})]})]})]})}),a.jsxs("div",{className:"p-6 border-t bg-gray-50 flex justify-between items-center",children:[a.jsx("div",{className:"text-sm text-gray-600",children:d&&a.jsxs(a.Fragment,{children:["Última atualização: ",new Date().toLocaleString("pt-BR")]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:e,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition",children:"Cancelar"}),a.jsx("button",{onClick:B,disabled:o||!g,className:I("px-6 py-2 rounded-lg transition flex items-center gap-2",o||!g?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:o?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Salvando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Lr,{className:"w-4 h-4"}),"Salvar Configuração"]})})]})]})]})}):null},c2=({isOpen:t,onClose:e})=>{const[r,n]=k.useState("dashboard"),[s,o]=k.useState(!1),[i,l]=k.useState(!1),[c,d]=k.useState(null),[u,h]=k.useState([]),[p,x]=k.useState([]),[b,y]=k.useState(!1),[w,g]=k.useState({device_id:"",name:"",machine_id:"",wifi_ssid:"Soropel_IoT",sensor_pin:34});k.useEffect(()=>{if(t){m(!0);const _=setInterval(()=>m(!1),5e3);return()=>clearInterval(_)}},[t]);const m=async(_=!1)=>{_?o(!0):l(!0),d(null);try{_&&await new Promise(j=>setTimeout(j,500));const E=[{id:"1",device_id:"ESP32_001",name:"Contador Máquina 1",type:"ESP32_CONTADOR",machine_id:"1",ip_address:"192.168.1.101",last_seen:"2025-08-04T21:30:00Z",status:"online",firmware_version:"v1.0.0",config_settings:{sensor_pin:34,wifi_ssid:"Soropel_IoT"},active:!0,created_at:"2025-08-01T10:00:00Z",updated_at:"2025-08-04T21:30:00Z"},{id:"2",device_id:"ESP32_002",name:"Contador Máquina 2",type:"ESP32_CONTADOR",machine_id:"2",ip_address:"192.168.1.102",last_seen:"2025-08-04T21:25:00Z",status:"offline",firmware_version:"v1.0.0",config_settings:{sensor_pin:34,wifi_ssid:"Soropel_IoT"},active:!0,created_at:"2025-08-01T10:00:00Z",updated_at:"2025-08-04T21:25:00Z"},{id:"3",device_id:"ESP32_003",name:"Contador Máquina 3",type:"ESP32_CONTADOR",machine_id:"3",ip_address:"192.168.1.103",last_seen:"2025-08-04T21:31:00Z",status:"online",firmware_version:"v1.0.0",config_settings:{sensor_pin:34,wifi_ssid:"Soropel_IoT"},active:!0,created_at:"2025-08-01T10:00:00Z",updated_at:"2025-08-04T21:31:00Z"}],N=[{device:E[0],currentCount:2156,dailyGoal:2800,currentSpeed:13.8,efficiency:82,lastUpdate:"2025-08-04T21:30:00Z",isOnline:!0},{device:E[1],currentCount:0,dailyGoal:2200,currentSpeed:0,efficiency:0,lastUpdate:"2025-08-04T21:25:00Z",isOnline:!1},{device:E[2],currentCount:2847,dailyGoal:3500,currentSpeed:15.2,efficiency:89,lastUpdate:"2025-08-04T21:31:00Z",isOnline:!0}];h(E),x(N)}catch(E){d("Erro ao carregar dados IoT"),console.error("Erro IoT:",E)}finally{_?o(!1):l(!1)}},f=async()=>{if(!w.device_id||!w.name){d("Preencha todos os campos obrigatórios");return}o(!0);try{await new Promise(_=>setTimeout(_,1e3)),y(!1),g({device_id:"",name:"",machine_id:"",wifi_ssid:"Soropel_IoT",sensor_pin:34}),m(!1)}catch{d("Erro ao adicionar dispositivo")}finally{o(!1)}},v=_=>{const E=new Date,N=new Date(_),j=Math.floor((E.getTime()-N.getTime())/1e3);return j<60?`${j}s atrás`:j<3600?`${Math.floor(j/60)}min atrás`:`${Math.floor(j/3600)}h atrás`};return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 bg-gradient-to-r from-purple-600 to-blue-600 text-white",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-white bg-opacity-20 rounded-lg flex items-center justify-center",children:a.jsx(K0,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Sistema IoT - Dashboard de Produção"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("p",{className:"text-purple-100",children:"Análise de Batidas e Performance em Tempo Real"}),i&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Pr,{className:"w-3 h-3 animate-spin"}),a.jsx("span",{className:"text-xs text-purple-100",children:"Atualizando..."})]})]})]})]}),a.jsx("button",{onClick:e,className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-white hover:bg-opacity-20 transition-colors",children:a.jsx(rt,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"flex border-b border-gray-200",children:[a.jsx("button",{onClick:()=>n("dashboard"),className:`px-6 py-3 font-medium transition-colors ${r==="dashboard"?"text-purple-600 border-b-2 border-purple-600 bg-purple-50":"text-gray-600 hover:text-purple-600"}`,children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(T0,{className:"w-4 h-4"}),a.jsx("span",{children:"Dashboard"})]})}),a.jsx("button",{onClick:()=>n("devices"),className:`px-6 py-3 font-medium transition-colors ${r==="devices"?"text-purple-600 border-b-2 border-purple-600 bg-purple-50":"text-gray-600 hover:text-purple-600"}`,children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Nl,{className:"w-4 h-4"}),a.jsx("span",{children:"Dispositivos"})]})}),a.jsx("button",{onClick:()=>n("analytics"),className:`px-6 py-3 font-medium transition-colors ${r==="analytics"?"text-purple-600 border-b-2 border-purple-600 bg-purple-50":"text-gray-600 hover:text-purple-600"}`,children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(_l,{className:"w-4 h-4"}),a.jsx("span",{children:"Análise Avançada"})]})})]}),a.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[s&&a.jsxs("div",{className:"flex items-center justify-center py-8",children:[a.jsx(Pr,{className:"w-6 h-6 animate-spin text-purple-600 mr-2"}),a.jsx("span",{children:"Carregando dados..."})]}),c&&a.jsx("div",{className:"bg-red-50 border border-red-200 p-4 rounded-lg mb-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Vt,{className:"w-5 h-5 text-red-500 mr-2"}),a.jsx("span",{className:"text-red-700",children:c})]})}),r==="dashboard"&&!s&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:p.filter(_=>_.isOnline).map((_,E)=>a.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-xl border border-gray-200 p-6 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"font-semibold text-gray-800",children:_.device.name}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),a.jsx("span",{className:"text-xs text-green-600",children:"Online"})]})]}),a.jsxs("div",{className:"text-center mb-4",children:[a.jsx("div",{className:"text-3xl font-bold text-blue-600",children:_.currentCount.toLocaleString()}),a.jsx("div",{className:"text-sm text-gray-600",children:"Batidas hoje"}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:a.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(_.currentCount/_.dailyGoal*100,100)}%`}})}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Meta: ",_.dailyGoal.toLocaleString()," (",Math.round(_.currentCount/_.dailyGoal*100),"%)"]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"bg-green-50 p-3 rounded-lg text-center",children:[a.jsxs("div",{className:"text-lg font-bold text-green-600",children:[_.currentSpeed,"/min"]}),a.jsx("div",{className:"text-xs text-green-700",children:"Velocidade atual"})]}),a.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg text-center",children:[a.jsxs("div",{className:"text-lg font-bold text-purple-600",children:[_.efficiency,"%"]}),a.jsx("div",{className:"text-xs text-purple-700",children:"Eficiência"})]})]})]},E))}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[a.jsxs("h4",{className:"font-semibold text-gray-800 mb-4 flex items-center space-x-2",children:[a.jsx(ho,{className:"w-5 h-5"}),a.jsx("span",{children:"🏆 Ranking de Produtividade (Batidas/Minuto)"})]}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-yellow-100 p-4 rounded-lg border-l-4 border-yellow-500",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"font-medium text-gray-800",children:"Máquina 3"}),a.jsx("span",{className:"text-sm text-yellow-600 font-bold",children:"🥇 1º"})]}),a.jsx("div",{className:"text-2xl font-bold text-yellow-700",children:"15.2/min"}),a.jsx("div",{className:"text-sm text-gray-600",children:"2.847 batidas hoje"}),a.jsx("div",{className:"text-xs text-yellow-600 mt-1",children:"Meta: 81% concluída"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 p-4 rounded-lg border-l-4 border-gray-400",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"font-medium text-gray-800",children:"Máquina 1"}),a.jsx("span",{className:"text-sm text-gray-600 font-bold",children:"🥈 2º"})]}),a.jsx("div",{className:"text-2xl font-bold text-gray-700",children:"13.8/min"}),a.jsx("div",{className:"text-sm text-gray-600",children:"2.156 batidas hoje"}),a.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Meta: 77% concluída"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-red-100 p-4 rounded-lg border-l-4 border-red-500",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"font-medium text-gray-800",children:"Máquina 2"}),a.jsx("span",{className:"text-sm text-red-600 font-bold",children:"⏸️ Parada"})]}),a.jsx("div",{className:"text-2xl font-bold text-red-700",children:"0/min"}),a.jsx("div",{className:"text-sm text-gray-600",children:"0 batidas hoje"}),a.jsx("div",{className:"text-xs text-red-600 mt-1",children:"Parada há 35min"})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-xl border border-green-200 p-6",children:[a.jsxs("h4",{className:"font-semibold text-gray-800 mb-4 flex items-center space-x-2",children:[a.jsx(Io,{className:"w-5 h-5"}),a.jsx("span",{children:"📊 Análise de Médias de Produção"})]}),a.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-white p-4 rounded-lg border border-blue-200 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"12.4"}),a.jsx("div",{className:"text-sm text-gray-700",children:"Média Geral"}),a.jsx("div",{className:"text-xs text-blue-600",children:"batidas/min"})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg border border-green-200 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:"738"}),a.jsx("div",{className:"text-sm text-gray-700",children:"Média/Hora"}),a.jsx("div",{className:"text-xs text-green-600",children:"batidas ativas"})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg border border-purple-200 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"5.003"}),a.jsx("div",{className:"text-sm text-gray-700",children:"Total Hoje"}),a.jsx("div",{className:"text-xs text-purple-600",children:"todas máquinas"})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg border border-yellow-200 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:"85%"}),a.jsx("div",{className:"text-sm text-gray-700",children:"Meta Atingida"}),a.jsx("div",{className:"text-xs text-yellow-600",children:"performance geral"})]})]}),a.jsxs("div",{className:"mt-4 grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h5",{className:"font-medium text-gray-700 mb-3 flex items-center",children:"⚡ Performance por Turno"}),a.jsx("div",{className:"space-y-2",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Único (07h-17h/18h):"}),a.jsx("span",{className:"text-sm font-bold text-emerald-600 bg-emerald-50 px-2 py-1 rounded",children:"13.8/min"})]})})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[a.jsx("h5",{className:"font-medium text-gray-700 mb-2",children:"🎯 Projeções"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Previsão fim do dia:"}),a.jsx("span",{className:"text-sm font-bold text-purple-600",children:"6.245 batidas"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Velocidade necessária:"}),a.jsx("span",{className:"text-sm font-bold text-orange-600",children:"13.5/min"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Possibilidade de meta:"}),a.jsx("span",{className:"text-sm font-bold text-green-600",children:"87% provável"})]})]})]})]})]})]}),r==="devices"&&!s&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Dispositivos IoT Conectados"}),a.jsx("button",{onClick:()=>y(!0),className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors",children:"+ Adicionar Dispositivo"})]}),a.jsx("div",{className:"grid gap-4",children:u.map(_=>a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${_.status==="online"?"bg-green-500":_.status==="offline"?"bg-red-500":"bg-yellow-500"}`}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium",children:_.name}),a.jsx("p",{className:"text-sm text-gray-600",children:_.device_id})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm font-medium",children:_.status==="online"?a.jsxs("span",{className:"text-green-600 flex items-center",children:[a.jsx(Nl,{className:"w-4 h-4 mr-1"}),"Online"]}):a.jsxs("span",{className:"text-red-600 flex items-center",children:[a.jsx(Z0,{className:"w-4 h-4 mr-1"}),"Offline"]})}),_.last_seen&&a.jsx("div",{className:"text-xs text-gray-500",children:v(_.last_seen)})]})]}),a.jsxs("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"IP:"}),a.jsx("span",{className:"ml-1 font-mono",children:_.ip_address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Firmware:"}),a.jsx("span",{className:"ml-1",children:_.firmware_version})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Tipo:"}),a.jsx("span",{className:"ml-1",children:_.type})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Status:"}),a.jsx("span",{className:`ml-1 ${_.active?"text-green-600":"text-red-600"}`,children:_.active?"Ativo":"Inativo"})]})]})]},_.id))})]}),r==="analytics"&&!s&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[a.jsxs("h4",{className:"font-semibold text-gray-800 mb-4 flex items-center space-x-2",children:[a.jsx(_l,{className:"w-5 h-5"}),a.jsx("span",{children:"📈 Histórico de Performance (Últimos 7 dias)"})]}),a.jsxs("div",{className:"grid md:grid-cols-7 gap-3",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Segunda"}),a.jsx("div",{className:"h-20 bg-gradient-to-t from-blue-200 to-blue-100 rounded-lg relative flex items-end",children:a.jsx("div",{className:"w-full h-16 bg-blue-500 rounded-lg"})}),a.jsx("div",{className:"text-sm font-bold text-blue-600 mt-2",children:"12.5/min"}),a.jsx("div",{className:"text-xs text-gray-500",children:"2.450 batidas"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Terça"}),a.jsx("div",{className:"h-20 bg-gradient-to-t from-green-200 to-green-100 rounded-lg relative flex items-end",children:a.jsx("div",{className:"w-full h-18 bg-green-500 rounded-lg"})}),a.jsx("div",{className:"text-sm font-bold text-green-600 mt-2",children:"14.2/min"}),a.jsx("div",{className:"text-xs text-gray-500",children:"2.680 batidas"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Quarta"}),a.jsx("div",{className:"h-20 bg-gradient-to-t from-yellow-200 to-yellow-100 rounded-lg relative flex items-end",children:a.jsx("div",{className:"w-full h-12 bg-yellow-500 rounded-lg"})}),a.jsx("div",{className:"text-sm font-bold text-yellow-600 mt-2",children:"11.8/min"}),a.jsx("div",{className:"text-xs text-gray-500",children:"2.180 batidas"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Quinta"}),a.jsx("div",{className:"h-20 bg-gradient-to-t from-purple-200 to-purple-100 rounded-lg relative flex items-end",children:a.jsx("div",{className:"w-full h-17 bg-purple-500 rounded-lg"})}),a.jsx("div",{className:"text-sm font-bold text-purple-600 mt-2",children:"13.9/min"}),a.jsx("div",{className:"text-xs text-gray-500",children:"2.590 batidas"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Sexta"}),a.jsx("div",{className:"h-20 bg-gradient-to-t from-green-200 to-green-100 rounded-lg relative flex items-end",children:a.jsx("div",{className:"w-full h-20 bg-green-600 rounded-lg"})}),a.jsx("div",{className:"text-sm font-bold text-green-700 mt-2",children:"15.2/min"}),a.jsx("div",{className:"text-xs text-gray-500",children:"2.847 batidas"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Sábado"}),a.jsx("div",{className:"h-20 bg-gradient-to-t from-blue-200 to-blue-100 rounded-lg relative flex items-end",children:a.jsx("div",{className:"w-full h-10 bg-blue-400 rounded-lg"})}),a.jsx("div",{className:"text-sm font-bold text-blue-500 mt-2",children:"9.5/min"}),a.jsx("div",{className:"text-xs text-gray-500",children:"1.520 batidas"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Domingo"}),a.jsx("div",{className:"h-20 bg-gradient-to-t from-gray-200 to-gray-100 rounded-lg relative flex items-end",children:a.jsx("div",{className:"w-full h-2 bg-gray-400 rounded-lg"})}),a.jsx("div",{className:"text-sm font-bold text-gray-500 mt-2",children:"0.8/min"}),a.jsx("div",{className:"text-xs text-gray-500",children:"95 batidas"})]})]}),a.jsx("div",{className:"mt-6 bg-gradient-to-r from-green-50 to-blue-50 p-4 rounded-lg",children:a.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:"12.4"}),a.jsx("div",{className:"text-sm text-gray-700",children:"Média Semanal"}),a.jsx("div",{className:"text-xs text-green-600",children:"+8% vs semana anterior"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"15.2"}),a.jsx("div",{className:"text-sm text-gray-700",children:"Melhor Performance"}),a.jsx("div",{className:"text-xs text-blue-600",children:"Sexta-feira"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"14.362"}),a.jsx("div",{className:"text-sm text-gray-700",children:"Total Batidas"}),a.jsx("div",{className:"text-xs text-purple-600",children:"Esta semana"})]})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[a.jsxs("h4",{className:"font-semibold text-gray-800 mb-4 flex items-center space-x-2",children:[a.jsx(Rn,{className:"w-5 h-5"}),a.jsx("span",{children:"⏰ Análise Detalhada por Turnos"})]}),a.jsx("div",{className:"grid md:grid-cols-1 gap-6",children:a.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 p-4 rounded-lg border border-emerald-200",children:[a.jsx("h5",{className:"font-medium text-emerald-800 mb-3",children:"⭐ Turno Único (07h-17h/18h)"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Média/min:"}),a.jsx("span",{className:"text-sm font-bold text-emerald-600",children:"13.8"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Total batidas:"}),a.jsx("span",{className:"text-sm font-bold",children:"8.280"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Eficiência:"}),a.jsx("span",{className:"text-sm font-bold text-green-600",children:"88%"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Paradas:"}),a.jsx("span",{className:"text-sm font-bold text-yellow-600",children:"3 (35min)"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"H. Extra:"}),a.jsx("span",{className:"text-sm font-bold text-emerald-600",children:"+1h (828 bat.)"})]})]})]})}),a.jsxs("div",{className:"mt-6 bg-gradient-to-r from-gray-50 to-blue-50 p-4 rounded-lg",children:[a.jsx("h5",{className:"font-medium text-gray-800 mb-3",children:"💡 Insights Automáticos:"}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-1 text-sm",children:[a.jsxs("p",{children:["• ",a.jsx("strong",{children:"Turno único:"})," 88% eficiência com hora extra produtiva"]}),a.jsxs("p",{children:["• ",a.jsx("strong",{children:"Performance consistente:"})," Evita quedas de produtividade"]}),a.jsxs("p",{children:["• ",a.jsx("strong",{children:"Paradas controladas:"})," Apenas 3 paradas em 35min"]})]}),a.jsxs("div",{className:"space-y-1 text-sm",children:[a.jsxs("p",{children:["• ",a.jsx("strong",{children:"Vantagem operacional:"})," Melhor controle de qualidade"]}),a.jsxs("p",{children:["• ",a.jsx("strong",{children:"Flexibilidade:"})," Hora extra quando necessário"]}),a.jsxs("p",{children:["• ",a.jsx("strong",{children:"Eficiência:"})," Redução de setup entre turnos"]})]})]})]})]})]})]}),b&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Adicionar Novo Dispositivo"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID do Dispositivo"}),a.jsx("input",{type:"text",value:w.device_id,onChange:_=>g({...w,device_id:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"ESP32_004"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Dispositivo"}),a.jsx("input",{type:"text",value:w.name,onChange:_=>g({...w,name:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Contador Máquina 4"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID da Máquina"}),a.jsx("input",{type:"text",value:w.machine_id,onChange:_=>g({...w,machine_id:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"4"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"WiFi SSID"}),a.jsx("input",{type:"text",value:w.wifi_ssid,onChange:_=>g({...w,wifi_ssid:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sensor Pin"}),a.jsx("input",{type:"number",value:w.sensor_pin,onChange:_=>g({...w,sensor_pin:parseInt(_.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[a.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:f,disabled:s,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50",children:s?"Adicionando...":"Adicionar"})]})]})}),a.jsxs("div",{className:"border-t border-gray-200 p-4 bg-gray-50 flex justify-between items-center",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Sistema IoT ESP32 - Soropel Embalagens | Análise de Produção em Tempo Real"}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),a.jsxs("span",{className:"text-sm text-gray-600",children:[p.filter(_=>_.isOnline).length," dispositivos online"]})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Última atualização: ",new Date().toLocaleTimeString()]})]})]})]})}):null},d2=[{id:1,name:"Máquina 01 - Produção A"},{id:2,name:"Máquina 02 - Produção B"},{id:3,name:"Máquina 03 - Produção C"},{id:4,name:"Máquina 04 - Produção D"},{id:5,name:"Máquina 05 - Produção E"},{id:6,name:"Máquina 06 - Produção F"},{id:7,name:"Máquina 07 - Produção G"},{id:8,name:"Máquina 08 - Produção H"},{id:9,name:"Máquina 09 - Produção I"}],u2=[{value:"operador",label:"Operador"},{value:"supervisor",label:"Supervisor"},{value:"tecnico",label:"Técnico"},{value:"manutencao",label:"Manutenção"}],h2=[{value:"manha",label:"Manhã (06:00 - 14:00)"},{value:"tarde",label:"Tarde (14:00 - 22:00)"},{value:"noite",label:"Noite (22:00 - 06:00)"},{value:"unico",label:"Turno Único (07:00 - 17:00/18:00 + H.Extra)"},{value:"integral",label:"Integral (Flexível)"}],Xm=({isOpen:t,onClose:e,operator:r,onSuccess:n})=>{const[s,o]=k.useState({name:"",cpf:"",phone:"",email:"",role:"operador",shift:"manha",machine_ids:[]}),[i,l]=k.useState({}),[c,d]=k.useState(!1),[u,h]=k.useState(!1),p=!!r;k.useEffect(()=>{o(r?{name:r.name,cpf:r.cpf||"",phone:r.phone||"",email:r.email||"",role:r.role,shift:r.shift,machine_ids:r.machine_ids||[]}:{name:"",cpf:"",phone:"",email:"",role:"operador",shift:"manha",machine_ids:[]}),l({}),h(!1)},[r,t]);const x=()=>{const f={};return s.name.trim()||(f.name="Nome é obrigatório"),s.cpf&&!/^\d{11}$/.test(s.cpf.replace(/\D/g,""))&&(f.cpf="CPF deve ter 11 dígitos"),s.phone&&!/^\(\d{2}\)\s\d{4,5}-\d{4}$/.test(s.phone)&&(f.phone="Telefone deve estar no formato (11) 99999-9999"),s.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)&&(f.email="Email deve ter um formato válido"),s.machine_ids.length===0&&(f.machine_ids="Selecione pelo menos uma máquina"),l(f),Object.keys(f).length===0},b=f=>f.replace(/\D/g,"").replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"),y=f=>{const v=f.replace(/\D/g,"");return v.length<=10?v.replace(/(\d{2})(\d{4})(\d{4})/,"($1) $2-$3"):v.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3")},w=(f,v)=>{let _=v;f==="cpf"&&typeof v=="string"?_=b(v):f==="phone"&&typeof v=="string"&&(_=y(v)),o(E=>({...E,[f]:_})),i[f]&&l(E=>({...E,[f]:void 0}))},g=f=>{const v=s.machine_ids.includes(f)?s.machine_ids.filter(_=>_!==f):[...s.machine_ids,f];w("machine_ids",v)},m=async f=>{if(f.preventDefault(),!!x()){d(!0);try{let v;p&&r?v=await xn.updateOperator(r.id,{name:s.name,cpf:s.cpf||void 0,phone:s.phone||void 0,email:s.email||void 0,role:s.role,shift:s.shift,machine_ids:s.machine_ids}):v=await xn.createOperator({name:s.name,cpf:s.cpf||void 0,phone:s.phone||void 0,email:s.email||void 0,role:s.role,shift:s.shift,machine_ids:s.machine_ids}),h(!0),n&&n(v),setTimeout(()=>{e(),h(!1)},1500)}catch(v){console.error("Erro ao salvar operador:",v),l({name:"Erro ao salvar operador. Tente novamente."})}finally{d(!1)}}};return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(En,{className:"w-6 h-6"}),a.jsx("h2",{className:"text-xl font-bold",children:p?"Editar Operador":"Cadastrar Operador"})]}),a.jsx("button",{onClick:e,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors",children:a.jsx(rt,{className:"w-5 h-5"})})]})}),a.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:u?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Rr,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:p?"Operador atualizado!":"Operador cadastrado!"}),a.jsx("p",{className:"text-gray-600",children:p?"As informações foram atualizadas com sucesso.":"O operador foi adicionado ao sistema."})]}):a.jsxs("form",{onSubmit:m,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(En,{className:"w-5 h-5 text-blue-600"}),"Dados Pessoais"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome Completo *"}),a.jsx("input",{type:"text",value:s.name,onChange:f=>w("name",f.target.value),className:I("w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",i.name?"border-red-500":"border-gray-300"),placeholder:"Digite o nome completo"}),i.name&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[a.jsx(Vt,{className:"w-4 h-4"}),i.name]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CPF"}),a.jsxs("div",{className:"relative",children:[a.jsx($0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",value:s.cpf,onChange:f=>w("cpf",f.target.value),className:I("w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",i.cpf?"border-red-500":"border-gray-300"),placeholder:"000.000.000-00",maxLength:14})]}),i.cpf&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[a.jsx(Vt,{className:"w-4 h-4"}),i.cpf]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone"}),a.jsxs("div",{className:"relative",children:[a.jsx(rm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",value:s.phone,onChange:f=>w("phone",f.target.value),className:I("w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",i.phone?"border-red-500":"border-gray-300"),placeholder:"(11) 99999-9999",maxLength:15})]}),i.phone&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[a.jsx(Vt,{className:"w-4 h-4"}),i.phone]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(tm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"email",value:s.email,onChange:f=>w("email",f.target.value),className:I("w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",i.email?"border-red-500":"border-gray-300"),placeholder:"operador@soropel.com"})]}),i.email&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[a.jsx(Vt,{className:"w-4 h-4"}),i.email]})]})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(tt,{className:"w-5 h-5 text-blue-600"}),"Função e Turno"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Função *"}),a.jsx("select",{value:s.role,onChange:f=>w("role",f.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:u2.map(f=>a.jsx("option",{value:f.value,children:f.label},f.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Turno *"}),a.jsxs("div",{className:"relative",children:[a.jsx(Rn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("select",{value:s.shift,onChange:f=>w("shift",f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:h2.map(f=>a.jsx("option",{value:f.value,children:f.label},f.value))})]})]})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(tt,{className:"w-5 h-5 text-blue-600"}),"Máquinas que Pode Operar *"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:d2.map(f=>a.jsxs("label",{className:I("flex items-center p-3 border rounded-lg cursor-pointer transition-colors",s.machine_ids.includes(f.id)?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"),children:[a.jsx("input",{type:"checkbox",checked:s.machine_ids.includes(f.id),onChange:()=>g(f.id),className:"mr-3 w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:f.name})]},f.id))}),i.machine_ids&&a.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[a.jsx(Vt,{className:"w-4 h-4"}),i.machine_ids]})]})]})}),!u&&a.jsxs("div",{className:"p-6 border-t bg-gray-50 flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",disabled:c,children:"Cancelar"}),a.jsx("button",{onClick:m,disabled:c,className:I("px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",c&&"opacity-50 cursor-not-allowed"),children:c?a.jsxs(a.Fragment,{children:[a.jsx(ar,{className:"w-4 h-4 animate-spin"}),p?"Atualizando...":"Cadastrando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Lr,{className:"w-4 h-4"}),p?"Atualizar":"Cadastrar"]})})]})]})}):null},f2={operador:"Operador",supervisor:"Supervisor",tecnico:"Técnico",manutencao:"Manutenção"},m2={manha:"Manhã",tarde:"Tarde",noite:"Noite",unico:"Turno Único",integral:"Integral"},p2={operador:"bg-blue-100 text-blue-800",supervisor:"bg-purple-100 text-purple-800",tecnico:"bg-green-100 text-green-800",manutencao:"bg-orange-100 text-orange-800"},g2={manha:"bg-yellow-100 text-yellow-800",tarde:"bg-orange-100 text-orange-800",noite:"bg-indigo-100 text-indigo-800",unico:"bg-emerald-100 text-emerald-800",integral:"bg-gray-100 text-gray-800"},x2=({isOpen:t,onClose:e})=>{const[r,n]=k.useState([]),[s,o]=k.useState([]),[i,l]=k.useState(!1),[c,d]=k.useState(null),[u,h]=k.useState(!1),[p,x]=k.useState(null),[b,y]=k.useState(null),[w,g]=k.useState({search:"",role:"all",shift:"all",status:"all"}),[m,f]=k.useState(null),v=async()=>{l(!0),d(null);try{const S=await xn.getAllOperators({active:w.status==="all"?void 0:w.status==="active"});S.error?(d(S.error),n([])):n(S.data||[])}catch(S){console.error("Erro ao carregar operadores:",S),d("Erro ao carregar operadores"),n([])}finally{l(!1)}};k.useEffect(()=>{let S=r;if(w.search){const q=w.search.toLowerCase();S=S.filter(B=>{var R,T,z;return B.name.toLowerCase().includes(q)||((R=B.cpf)==null?void 0:R.includes(w.search))||((T=B.phone)==null?void 0:T.includes(w.search))||((z=B.email)==null?void 0:z.toLowerCase().includes(q))})}w.role!=="all"&&(S=S.filter(q=>q.role===w.role)),w.shift!=="all"&&(S=S.filter(q=>q.shift===w.shift)),w.status!=="all"&&(S=S.filter(q=>w.status==="active"?q.active:!q.active)),o(S)},[r,w]),k.useEffect(()=>{t&&v()},[t]);const _=(S,q)=>{g(B=>({...B,[S]:q}))},E=()=>{g({search:"",role:"all",shift:"all",status:"all"})},N=()=>{x(null),h(!0)},j=S=>{x(S),h(!0),f(null)},C=S=>{y(S),f(null)},M=async()=>{if(b)try{await xn.deleteOperator(b.id),await v(),y(null)}catch(S){console.error("Erro ao excluir operador:",S),d("Erro ao excluir operador")}},$=async S=>{try{await xn.reactivateOperator(S.id),await v(),f(null)}catch(q){console.error("Erro ao reativar operador:",q),d("Erro ao reativar operador")}},U=()=>{h(!1),x(null),v()},F=()=>{f(null)};return t?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(fo,{className:"w-6 h-6"}),a.jsx("h2",{className:"text-xl font-bold",children:"Gerenciar Operadores"})]}),a.jsx("button",{onClick:e,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors",children:a.jsx(jl,{className:"w-5 h-5"})})]})}),a.jsx("div",{className:"p-6 border-b bg-gray-50",children:a.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[a.jsx("div",{className:"flex-1 max-w-md",children:a.jsxs("div",{className:"relative",children:[a.jsx(kn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Buscar por nome, CPF, telefone ou email...",value:w.search,onChange:S=>_("search",S.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsxs("select",{value:w.role,onChange:S=>_("role",S.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"Todas as Funções"}),a.jsx("option",{value:"operador",children:"Operador"}),a.jsx("option",{value:"supervisor",children:"Supervisor"}),a.jsx("option",{value:"tecnico",children:"Técnico"}),a.jsx("option",{value:"manutencao",children:"Manutenção"})]}),a.jsxs("select",{value:w.shift,onChange:S=>_("shift",S.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"Todos os Turnos"}),a.jsx("option",{value:"manha",children:"Manhã"}),a.jsx("option",{value:"tarde",children:"Tarde"}),a.jsx("option",{value:"noite",children:"Noite"}),a.jsx("option",{value:"unico",children:"Turno Único"}),a.jsx("option",{value:"integral",children:"Integral"})]}),a.jsxs("select",{value:w.status,onChange:S=>_("status",S.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"Todos os Status"}),a.jsx("option",{value:"active",children:"Ativos"}),a.jsx("option",{value:"inactive",children:"Inativos"})]}),a.jsx("button",{onClick:E,className:"px-3 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Limpar"})]}),a.jsxs("button",{onClick:N,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[a.jsx(Ds,{className:"w-4 h-4"}),"Novo Operador"]})]})}),a.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-280px)]",children:[c&&a.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[a.jsx(jt,{className:"w-5 h-5"}),c]}),i?a.jsxs("div",{className:"flex items-center justify-center py-12",children:[a.jsx(ar,{className:"w-8 h-8 animate-spin text-blue-600"}),a.jsx("span",{className:"ml-2 text-gray-600",children:"Carregando operadores..."})]}):s.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(fo,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:r.length===0?"Nenhum operador cadastrado":"Nenhum operador encontrado"}),a.jsx("p",{className:"text-gray-500 mb-4",children:r.length===0?"Comece cadastrando o primeiro operador do sistema.":"Tente ajustar os filtros para encontrar o operador desejado."}),r.length===0&&a.jsxs("button",{onClick:N,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 mx-auto",children:[a.jsx(Ds,{className:"w-4 h-4"}),"Cadastrar Primeiro Operador"]})]}):a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:s.map(S=>a.jsxs("div",{className:I("bg-white border rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow relative",!S.active&&"opacity-60 border-gray-300"),children:[a.jsxs("div",{className:"absolute top-4 right-4",children:[a.jsx("button",{onClick:()=>f(m===S.id?null:S.id),className:"p-1 hover:bg-gray-100 rounded transition-colors",children:a.jsx(D0,{className:"w-4 h-4 text-gray-500"})}),m===S.id&&a.jsxs("div",{className:"absolute right-0 top-8 bg-white border border-gray-200 rounded-lg shadow-lg z-10 min-w-[150px]",children:[a.jsxs("button",{onClick:()=>j(S),className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center gap-2 text-gray-700",children:[a.jsx(Q0,{className:"w-4 h-4"}),"Editar"]}),S.active?a.jsxs("button",{onClick:()=>C(S),className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center gap-2 text-red-600",children:[a.jsx(Ro,{className:"w-4 h-4"}),"Desativar"]}):a.jsxs("button",{onClick:()=>$(S),className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center gap-2 text-green-600",children:[a.jsx(Rr,{className:"w-4 h-4"}),"Reativar"]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[S.active?a.jsx(Rr,{className:"w-5 h-5 text-green-500"}):a.jsx(jl,{className:"w-5 h-5 text-red-500"}),a.jsx("span",{className:I("text-sm font-medium",S.active?"text-green-700":"text-red-700"),children:S.active?"Ativo":"Inativo"})]}),a.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:S.name}),a.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[a.jsx("span",{className:I("px-2 py-1 rounded-full text-xs font-medium",p2[S.role]),children:f2[S.role]}),a.jsx("span",{className:I("px-2 py-1 rounded-full text-xs font-medium",g2[S.shift]),children:m2[S.shift]})]}),a.jsxs("div",{className:"space-y-2 mb-4",children:[S.phone&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(rm,{className:"w-4 h-4"}),S.phone]}),S.email&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(tm,{className:"w-4 h-4"}),S.email]})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[a.jsx(tt,{className:"w-4 h-4"}),a.jsx("span",{className:"font-medium",children:"Máquinas:"})]}),a.jsx("div",{className:"text-xs",children:S.machine_ids&&S.machine_ids.length>0?`${S.machine_ids.length} máquina(s) habilitada(s)`:"Nenhuma máquina habilitada"})]})]},S.id))})]}),a.jsx("div",{className:"p-6 border-t bg-gray-50",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.filter(S=>S.active).length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Ativos"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600",children:r.filter(S=>S.role==="operador").length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Operadores"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600",children:r.filter(S=>S.role==="supervisor").length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Supervisores"})]})]})})]})}),a.jsx(Xm,{isOpen:u,onClose:()=>{h(!1),x(null)},operator:p,onSuccess:U}),b&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:a.jsx("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(jt,{className:"w-6 h-6 text-red-500"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Confirmar Desativação"})]}),a.jsxs("p",{className:"text-gray-600 mb-6",children:["Tem certeza que deseja desativar o operador ",a.jsx("strong",{children:b.name}),"?",a.jsx("br",{}),a.jsx("br",{}),"O operador será marcado como inativo, mas seus dados serão preservados."]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{onClick:()=>y(null),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:M,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Desativar"})]})]})})}),m&&a.jsx("div",{className:"fixed inset-0 z-[5]",onClick:F})]}):null},Sa=()=>!!"https://chhtllsprlqvjeivspxq.supabase.co"&&!!"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNoaHRsbHNwcmxxdmplaXZzcHhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4NTQ0OTcsImV4cCI6MjA3NDQzMDQ5N30.qvoJ7Y53yihGkzzMxHcY8hBqiLb68kZxvR1mBpwWnAY",v2=(t,e)=>{var l,c;const r={ativa:"active",manutencao:"maintenance",parada:"stopped"},n={sem_impressao:"no_print",com_impressao:"with_print",especial:"special"},s=d=>{if(!d)return"N/A";const u=d.match(/(\d+):(\d+):(\d+)/);if(u){const[,h,p]=u,x=parseInt(h),b=parseInt(p);return x>0?`${x}h ${b}min`:`${b}min`}return d},i=(d=>{const h={1:3500,2:2200,3:1500,4:1800,5:3e3,6:2800,7:4500,8:1800,9:2e3}[t.machine_number]||2e3;return{current:Math.round(d/100*h),target:h}})(t.progress_percentage);return{id:t.machine_number,name:t.name,status:r[t.status]||"stopped",currentProduct:(e==null?void 0:e.current_product)||t.current_product||"Sem produto",progress:(e==null?void 0:e.progress_percentage)||t.progress_percentage,targetProduction:i.target,currentProduction:i.current,efficiency:(e==null?void 0:e.efficiency_current)||t.efficiency_rate||0,timeRemaining:s((e==null?void 0:e.time_remaining)||t.time_remaining),lastMaintenance:t.last_maintenance?new Date(t.last_maintenance).toLocaleDateString("pt-BR"):"N/A",nextMaintenance:t.last_maintenance?new Date(new Date(t.last_maintenance).getTime()+7*24*60*60*1e3).toLocaleDateString("pt-BR"):"N/A",operatingHours:Math.round(Math.random()*2e3+1500),operator:(l=e==null?void 0:e.observations)!=null&&l.includes("Operador")?(c=e.observations.split("Operador: ")[1])==null?void 0:c.split(",")[0]:void 0,type:t.is_special?"special":n[t.type]||"no_print"}};class Iu{static async getMachines(){if(!Sa())return console.warn("Supabase não disponível, usando dados simulados"),this.getMockMachines();try{const{data:e,error:r}=await O.from("machines").select(`
          *,
          bobinas:bobinas!machines_current_bobina_id_fkey(
            reel_number,
            paper_type,
            current_weight,
            product_in_production
          ),
          current_order:order_items!order_items_machine_id_fkey(
            quantity,
            progress_percentage,
            status,
            order:orders(order_number),
            product:products(name)
          )
        `).order("machine_number");if(r)throw new Error(`Erro ao buscar máquinas: ${r.message}`);const{data:n,error:s}=await O.from("machine_status").select("*");s&&console.warn("Erro ao buscar status das máquinas:",s.message);const o=e.map(i=>{var u,h;const l=n==null?void 0:n.find(p=>p.machine_id===i.id),c=(u=i.current_order)==null?void 0:u.find(p=>p.status==="em_producao"),d=(h=i.bobinas)==null?void 0:h[0];return v2(i,l,c,d)});return console.log(`✅ Carregadas ${o.length} máquinas com dados integrados do Supabase`),o}catch(e){return console.error("Erro no service getMachines:",e),console.log("🔄 Fallback para dados simulados"),this.getMockMachines()}}static async updateMachineStatus(e,r,n){if(!Sa())return console.log(`🔄 Simulando atualização da Máquina ${e} para ${r}`),!0;try{const s={active:"ativa",maintenance:"manutencao",stopped:"parada",waiting:"parada"},{data:o,error:i}=await O.from("machines").select("id").eq("machine_number",e).single();if(i||!o)throw new Error(`Máquina ${e} não encontrada`);const{error:l}=await O.from("machines").update({status:s[r],observations:n||null,updated_at:new Date().toISOString()}).eq("id",o.id);if(l)throw new Error(`Erro ao atualizar máquina: ${l.message}`);return await this.logActivity({type:r==="maintenance"?"maintenance":r==="active"?"started":"machine_stopped",title:`Máquina ${e}`,description:r==="active"?"Máquina iniciada":r==="maintenance"?`Parada para manutenção${n?`: ${n}`:""}`:"Máquina pausada",machine_id:o.id,observations:n}),console.log(`✅ Status da Máquina ${e} atualizado para ${r}`),!0}catch(s){return console.error("Erro ao atualizar status da máquina:",s),!1}}static async stopForMaintenance(e,r){return this.updateMachineStatus(e,"maintenance",r)}static async stopWithoutOperator(e){return this.updateMachineStatus(e,"stopped","Parada - Sem operador")}static async updateMachineConfig(e,r){if(!Sa())return console.log(`🔄 Simulando update config Máquina ${e}:`,r),!0;try{const{data:n,error:s}=await O.from("machines").select("id").eq("machine_number",e).single();if(s||!n)throw new Error(`Máquina ${e} não encontrada`);const o={updated_at:new Date().toISOString()};r.currentProduct&&(o.current_product=r.currentProduct);const{error:i}=await O.from("machines").update(o).eq("id",n.id);if(i)throw new Error(`Erro ao atualizar configurações: ${i.message}`);return await this.logActivity({type:"changed",title:`Configuração Máquina ${e}`,description:`Configurações atualizadas: ${Object.keys(r).join(", ")}`,machine_id:n.id}),console.log(`✅ Configurações da Máquina ${e} atualizadas`),!0}catch(n){return console.error("Erro ao atualizar configurações:",n),!1}}static async getMachineMetrics(){const e=await this.getMachines();return{totalActive:e.filter(r=>r.status==="active").length,totalStopped:e.filter(r=>r.status==="stopped").length,totalMaintenance:e.filter(r=>r.status==="maintenance").length,averageEfficiency:e.reduce((r,n)=>r+n.efficiency,0)/e.length||0}}static async logActivity(e){if(Sa())try{const{error:r}=await O.from("activities").insert({type:e.type,title:e.title,description:e.description,machine_id:e.machine_id||null,user_name:"Sistema",metadata:e.observations?{observations:e.observations}:{},created_at:new Date().toISOString()});r&&console.warn("Erro ao registrar atividade:",r.message)}catch(r){console.warn("Erro ao registrar atividade:",r)}}static getMockMachines(){return[{id:1,name:"Máquina 1",status:"active",currentProduct:"SACO KRAFT 2KG",progress:81,targetProduction:3500,currentProduction:2850,efficiency:87,timeRemaining:"2h 15min",lastMaintenance:"15/07/2025",nextMaintenance:"22/07/2025",operatingHours:1847,type:"no_print"},{id:2,name:"Máquina 2",status:"maintenance",currentProduct:"Manutenção Preventiva",progress:0,targetProduction:2200,currentProduction:0,efficiency:0,timeRemaining:"1h 30min",lastMaintenance:"15/07/2025",nextMaintenance:"22/07/2025",operatingHours:1650,operator:"Técnico João",type:"no_print"},{id:3,name:"Máquina 3",status:"active",currentProduct:"SACO KRAFT 1KG",progress:65,targetProduction:1500,currentProduction:980,efficiency:78,timeRemaining:"1h 45min",lastMaintenance:"10/07/2025",nextMaintenance:"17/07/2025",operatingHours:1623,type:"no_print"},{id:4,name:"Máquina 4",status:"stopped",currentProduct:"Aguardando Material",progress:0,targetProduction:1800,currentProduction:0,efficiency:0,timeRemaining:"Parada há 35min",lastMaintenance:"12/07/2025",nextMaintenance:"19/07/2025",operatingHours:1580,type:"no_print"},{id:5,name:"Máquina 5",status:"active",currentProduct:"PAPEL SEMI KRAFT",progress:43,targetProduction:3e3,currentProduction:1290,efficiency:92,timeRemaining:"3h 10min",lastMaintenance:"14/07/2025",nextMaintenance:"21/07/2025",operatingHours:1890,type:"with_print"},{id:6,name:"Máquina 6",status:"waiting",currentProduct:"Aguardando Setup",progress:0,targetProduction:2800,currentProduction:0,efficiency:0,timeRemaining:"Setup pendente",lastMaintenance:"11/07/2025",nextMaintenance:"18/07/2025",operatingHours:1720,operator:"Operador Carlos",type:"with_print"},{id:7,name:"Máquina 7",status:"active",currentProduct:"KRAFT REVISTA",progress:94,targetProduction:4500,currentProduction:4230,efficiency:95,timeRemaining:"6h 20min",lastMaintenance:"13/07/2025",nextMaintenance:"20/07/2025",operatingHours:2100,type:"with_print"},{id:8,name:"Máquina 8",status:"stopped",currentProduct:"Produção Finalizada",progress:100,targetProduction:1800,currentProduction:1800,efficiency:98,timeRemaining:"Finalizada 16:45",lastMaintenance:"16/07/2025",nextMaintenance:"23/07/2025",operatingHours:1950,type:"with_print"},{id:9,name:"Máquina 9",status:"active",currentProduct:"TOALHA AMERICANA",progress:76,targetProduction:2e3,currentProduction:1520,efficiency:89,timeRemaining:"4h 05min",lastMaintenance:"15/07/2025",nextMaintenance:"22/07/2025",operatingHours:1800,type:"special"}]}}const y2=Qs()(Lo((t,e)=>({machines:[],notifications:[],modals:{planejamento:!1,configurarProdutos:!1,configuracaoMaquina:!1,iotSystem:!1},availableOrders:[],machineConfigs:[],loading:!1,error:null,setMachines:r=>t({machines:r}),setSelectedMachine:r=>t({selectedMachine:r}),setLoading:r=>t({loading:r}),setError:r=>t({error:r}),updateMachineStatus:async(r,n)=>{const s=e().machines.map(o=>o.id===r?{...o,status:n}:o);t({machines:s});try{if(await Iu.updateMachineStatus(r,n))setTimeout(()=>{e().refreshData()},1e3);else{const i=e().machines.map(l=>l.id===r?{...l,status:l.status===n?"stopped":"active"}:l);t({machines:i,error:"Falha ao atualizar status da máquina"})}}catch(o){console.error("Erro ao atualizar status:",o);const i=e().machines.map(l=>l.id===r?{...l,status:l.status===n?"stopped":"active"}:l);t({machines:i,error:"Erro na comunicação com servidor"})}},openModal:(r,n)=>{const s={modals:{...e().modals,[r]:!0,selectedMachine:n}};if(n&&r==="configuracaoMaquina"){const o=e().machines.find(i=>i.id===n);s.selectedMachine=o}t(s)},closeModal:r=>t({modals:{...e().modals,[r]:!1}}),closeAllModals:()=>t({modals:{planejamento:!1,configurarProdutos:!1,configuracaoMaquina:!1,iotSystem:!1},selectedMachine:void 0}),setPlanejamento:r=>t({planejamento:r}),selectOrder:r=>{const n=e().availableOrders.map(s=>s.id===r?{...s,selected:!s.selected}:s);t({availableOrders:n})},autoDistribute:()=>{const r=e().availableOrders.filter(s=>s.selected),n=e().machines;console.log("Distribuindo automaticamente:",r,n)},savePlanejamento:async()=>{t({loading:!0,error:null});try{await new Promise(r=>setTimeout(r,1e3)),t({loading:!1})}catch(r){t({loading:!1,error:r instanceof Error?r.message:"Erro ao salvar planejamento"})}},updateMachineConfig:(r,n)=>{const s=e().machineConfigs.map(o=>o.machineId===r?{...o,...n}:o);t({machineConfigs:s})},saveMachineConfigs:async()=>{t({loading:!0,error:null});try{await new Promise(r=>setTimeout(r,1e3)),t({loading:!1})}catch(r){t({loading:!1,error:r instanceof Error?r.message:"Erro ao salvar configurações"})}},getMachineMetrics:()=>{const r=e().machines;return{totalActive:r.filter(n=>n.status==="active").length,totalStopped:r.filter(n=>n.status==="stopped").length,totalMaintenance:r.filter(n=>n.status==="maintenance").length,averageEfficiency:r.reduce((n,s)=>n+s.efficiency,0)/r.length||0}},refreshData:async()=>{t({loading:!0,error:null});try{const r=await Iu.getMachines(),n=[];for(const s of r){const o=await Ow(s.id.toString());if(o.length>0){const i=o[0],l=new Date(i.timestamp).toLocaleTimeString("pt-BR");n.push(`Máquina ${s.id}: Nova bobina ${i.bobinaNumero} atribuída (${l})`)}}t({machines:r,loading:!1,notifications:n}),console.log(`✅ ${r.length} máquinas carregadas + ${n.length} notificações`)}catch(r){console.error("Erro ao carregar máquinas:",r),t({loading:!1,error:r instanceof Error?r.message:"Erro ao carregar dados das máquinas"})}}}),{name:"gestao-maquinas-store"})),b2=()=>{const{machines:t,loading:e,error:r,modals:n,notifications:s,refreshData:o,updateMachineStatus:i,openModal:l,closeModal:c,getMachineMetrics:d}=y2(),[u,h]=k.useState(!1),[p,x]=k.useState(!1),b=d();k.useEffect(()=>{o();const j=setInterval(()=>{o()},3e4);return()=>clearInterval(j)},[o]);const y=(j,C)=>{const M=C==="active"?"stopped":"active";i(j,M),console.log(`Máquina ${j} ${M==="active"?"iniciada":"pausada"}`)},w=j=>{l("configuracaoMaquina",j)},g=()=>{l("planejamento"),console.log("Abrindo planejamento semanal...")},m=()=>{l("configurarProdutos"),console.log("Abrindo configuração de produtos...")},f=()=>{l("iotSystem"),console.log("Abrindo configuração do Sistema IoT...")},v=()=>{x(!0),console.log("Abrindo gerenciamento de operadores...")},_=()=>{h(!0),console.log("Abrindo cadastro de novo operador...")},E=()=>{h(!1)},N=()=>{o()};return e?a.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600"}),a.jsx("p",{className:"mt-4 text-lg font-medium text-gray-600",children:"Carregando máquinas..."})]}):r?a.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50",children:a.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg border max-w-md w-full mx-4",children:[a.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-red-100 rounded-full mx-auto mb-4",children:a.jsx(jt,{className:"w-8 h-8 text-red-600"})}),a.jsx("h2",{className:"text-xl font-bold text-gray-800 text-center mb-2",children:"Erro ao carregar dados"}),a.jsx("p",{className:"text-gray-600 text-center mb-6",children:r}),a.jsxs("button",{onClick:N,className:"w-full bg-red-600 hover:bg-red-700 text-white py-3 px-4 rounded-lg font-semibold transition-colors duration-300 flex items-center justify-center space-x-2",children:[a.jsx(Pr,{className:"w-5 h-5"}),a.jsx("span",{children:"Tentar Novamente"})]})]})}):a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto p-3 sm:p-4 lg:p-6 xl:p-8",children:[a.jsx("div",{className:"mb-6 lg:mb-8",children:a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"Gestão de Máquinas"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Controle e monitoramento das 9 máquinas de produção"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-center space-y-3 sm:space-y-0 sm:space-x-3",children:[a.jsxs("button",{onClick:N,className:"w-full sm:w-auto bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-300 flex items-center justify-center space-x-2",children:[a.jsx(Pr,{className:"w-4 h-4"}),a.jsx("span",{children:"Atualizar"})]}),a.jsxs("button",{onClick:g,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors duration-300 flex items-center space-x-2 shadow-lg",children:[a.jsx(Sn,{className:"w-5 h-5"}),a.jsx("span",{children:"Planejar Semana"})]}),a.jsxs("button",{onClick:m,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors duration-300 flex items-center space-x-2 shadow-lg",children:[a.jsx(tt,{className:"w-5 h-5"}),a.jsx("span",{children:"Configurar Produtos"})]}),a.jsxs("button",{onClick:f,className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors duration-300 flex items-center space-x-2 shadow-lg",children:[a.jsx(Nl,{className:"w-5 h-5"}),a.jsx("span",{children:"Sistema IoT"})]}),a.jsxs("button",{onClick:v,className:"bg-orange-600 hover:bg-orange-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors duration-300 flex items-center space-x-2 shadow-lg",children:[a.jsx(fo,{className:"w-5 h-5"}),a.jsx("span",{children:"Operadores"})]})]})]})}),a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[a.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 text-sm",children:"Máquinas Ativas"}),a.jsx("p",{className:"text-3xl font-bold text-green-600",children:b.totalActive})]}),a.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx(uo,{className:"w-6 h-6 text-green-600"})})]})}),a.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 text-sm",children:"Máquinas Paradas"}),a.jsx("p",{className:"text-3xl font-bold text-red-600",children:b.totalStopped})]}),a.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:a.jsx(Ac,{className:"w-6 h-6 text-red-600"})})]})}),a.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 text-sm",children:"Em Manutenção"}),a.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:b.totalMaintenance})]}),a.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:a.jsx($o,{className:"w-6 h-6 text-yellow-600"})})]})}),a.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 text-sm",children:"Eficiência Média"}),a.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:[Math.round(b.averageEfficiency),"%"]})]}),a.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:a.jsx(_l,{className:"w-6 h-6 text-blue-600"})})]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:t.map(j=>a.jsx(i1,{machine:j,onToggleStatus:y,onOpenConfig:w},j.id))}),t.length===0&&a.jsxs("div",{className:"text-center py-12 lg:py-16",children:[a.jsx("div",{className:"w-20 h-20 lg:w-24 lg:h-24 bg-gradient-to-r from-gray-100 to-gray-200 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg",children:a.jsx(q0,{className:"w-10 h-10 lg:w-12 lg:h-12 text-gray-400"})}),a.jsx("div",{className:"text-gray-500 text-lg lg:text-xl mb-6 font-medium",children:"Nenhuma máquina encontrada"}),a.jsxs("button",{onClick:o,className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-6 lg:px-8 py-3 lg:py-4 rounded-xl font-semibold text-sm lg:text-base transition-all duration-300 flex items-center space-x-2 mx-auto shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[a.jsx(Pr,{className:"w-4 h-4 lg:w-5 lg:h-5"}),a.jsx("span",{children:"Recarregar Dados"})]})]}),a.jsx(Vj,{isOpen:n.planejamento,onClose:()=>c("planejamento")}),a.jsx(Yj,{isOpen:n.configurarProdutos,onClose:()=>c("configurarProdutos")}),a.jsx(l2,{isOpen:n.configuracaoMaquina,onClose:()=>c("configuracaoMaquina"),machineId:n.selectedMachine}),a.jsx(c2,{isOpen:n.iotSystem,onClose:()=>c("iotSystem")}),a.jsx(Xm,{isOpen:u,onClose:()=>h(!1),onSuccess:E}),a.jsx(x2,{isOpen:p,onClose:()=>x(!1),onNovoOperador:_})]})})};function w2(){const[t,e]=k.useState("dashboard"),r=()=>{switch(t){case"nova-bobina":return a.jsx(Fw,{});case"novo-pedido":return a.jsx(Zw,{});case"pedidos":return a.jsx(o1,{});case"maquinas":return a.jsx(b2,{});case"dashboard":default:return a.jsx(Sw,{})}};return a.jsx(xw,{currentPage:t,onPageChange:e,children:r()})}Pi.createRoot(document.getElementById("root")).render(a.jsx(dt.StrictMode,{children:a.jsx(w2,{})}));
